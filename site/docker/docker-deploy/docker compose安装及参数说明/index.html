
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录相关知识，沉淀生活，记录点滴。">
      
      
        <meta name="author" content="Jerion">
      
      
        <link rel="canonical" href="https://jerion.cn/docker/docker-deploy/docker%20compose%E5%AE%89%E8%A3%85%E5%8F%8A%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/">
      
      
        <link rel="prev" href="../deploy-reader%20%26%20music/%E9%85%8D%E7%BD%AE%20TTS-Server%E8%AF%AD%E9%9F%B3%2BLegado%E9%98%85%E8%AF%BB/">
      
      
        <link rel="next" href="../docker%20%E5%AE%89%E8%A3%85KeyManager/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS 订阅" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="已更新内容的 RSS 订阅" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.33">
    
    
      
        <title>docker compose安装及参数说明 - Jerion's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Microsoft+Yahei:300,300i,400,400i,700,700i%7CConsolas,Courier,courier+new,stkaiti,kaiti,simkai,monospace:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Microsoft Yahei";--md-code-font:"Consolas,Courier,courier new,stkaiti,kaiti,simkai,monospace"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <script async src="https://umami.weiyan.cc/script.js" data-website-id="b713abc7-f5eb-4683-a132-9fda53e29198"></script>
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3JIbgFniDcGIaNP7",ck:"3JIbgFniDcGIaNP7",autoTrack:true})</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
   <meta name="baidu-site-verification" content="codeva-hJH2gPjZkn" />

   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-compose安装及参数说明" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Jerion&#39;s Blog" class="md-header__button md-logo" aria-label="Jerion's Blog" data-md-component="logo">
      
  <img src="../../../assets/octocat.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jerion's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              docker compose安装及参数说明
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="deep-orange"  aria-label="切换到暗色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到暗色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="deep-orange"  aria-label="切换到亮色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到亮色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zyx3721/Jerion-MkDoc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Jerion-MkDoc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
    
  
  博客

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux/Ansible/Ansible%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/" class="md-tabs__link">
          
  
    
  
  Linux

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../shell/" class="md-tabs__link">
          
  
    
  
  Shell

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../vmware/Esxi6.7%E5%AE%89%E8%A3%85MacOS%2010.15.6/" class="md-tabs__link">
          
  
    
  
  VMware

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../python/Python%E5%8F%8APycharm%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" class="md-tabs__link">
          
  
    
  
  Python

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../deploy-blog/docker%20%E5%AE%89%E8%A3%85typecho%E5%8D%9A%E5%AE%A2/" class="md-tabs__link">
          
  
    
  
  Docker

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../routeswitch/Cisio/%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1/" class="md-tabs__link">
          
  
    
  
  路由交换

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../synology/VSP%20%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96/" class="md-tabs__link">
          
  
    
  
  群晖

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../sql/PostgreSQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" class="md-tabs__link">
          
  
    
  
  数据库

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../bat/git/" class="md-tabs__link">
          
  
    
  
  批处理

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../k8s/" class="md-tabs__link">
          
  
    
  
  K8S

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../git/Git/Git%20Extensions%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" class="md-tabs__link">
          
  
    
  
  Git

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../essay/" class="md-tabs__link">
          
  
    
  
  随笔

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Jerion&#39;s Blog" class="md-nav__button md-logo" aria-label="Jerion's Blog" data-md-component="logo">
      
  <img src="../../../assets/octocat.jpg" alt="logo">

    </a>
    Jerion's Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zyx3721/Jerion-MkDoc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Jerion-MkDoc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../blog/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    博客
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../linux/Ansible/Ansible%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Linux
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../shell/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Shell
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../vmware/Esxi6.7%E5%AE%89%E8%A3%85MacOS%2010.15.6/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    VMware
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../python/Python%E5%8F%8APycharm%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Python
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
          
        
      
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Docker
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" checked>
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Docker deploy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            Docker deploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../deploy-blog/docker%20%E5%AE%89%E8%A3%85typecho%E5%8D%9A%E5%AE%A2/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Deploy blog
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../deploy-reader%20%26%20music/docker%20%E9%83%A8%E7%BD%B2Koodo%20Reader/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Deploy reader & music
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    docker compose安装及参数说明
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    docker compose安装及参数说明
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#一安装docker-copose-v1" class="md-nav__link">
    <span class="md-ellipsis">
      一、安装docker-copose v1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、安装docker-copose v1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1下载docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      1.下载Docker Compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2赋权使二进制文件可执行" class="md-nav__link">
    <span class="md-ellipsis">
      2.赋权使二进制文件可执行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3测试安装" class="md-nav__link">
    <span class="md-ellipsis">
      3.测试安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4启动停止" class="md-nav__link">
    <span class="md-ellipsis">
      4.启动停止
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#二安装docker-compose-v2" class="md-nav__link">
    <span class="md-ellipsis">
      二、安装docker compose v2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、安装docker compose v2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1compose官网下载地址" class="md-nav__link">
    <span class="md-ellipsis">
      1.compose官网下载地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2赋权" class="md-nav__link">
    <span class="md-ellipsis">
      2.赋权
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3测试安装是否成功" class="md-nav__link">
    <span class="md-ellipsis">
      3.测试安装是否成功
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.测试安装是否成功">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4启动方式" class="md-nav__link">
    <span class="md-ellipsis">
      4.启动方式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#三相关说明" class="md-nav__link">
    <span class="md-ellipsis">
      三、相关说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、相关说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1docker-compose-up--d-和-docker-compose-up--d-的区别" class="md-nav__link">
    <span class="md-ellipsis">
      1.docker-compose up -d 和 docker compose up -d 的区别
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2docker-compose-up--d-命令" class="md-nav__link">
    <span class="md-ellipsis">
      2.docker compose up -d 命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3docker-compose中的version参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      3.docker compose中的version参数说明
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4通过docker-compose创建后的容器网络" class="md-nav__link">
    <span class="md-ellipsis">
      4.通过Docker Compose创建后的容器网络
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5docker-compose中的-符号" class="md-nav__link">
    <span class="md-ellipsis">
      5.docker-compose中的-符号
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.docker-compose中的-符号">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-什么情况下每个属性前要加-" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 什么情况下每个属性前要加-
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-如何叛变是否为列表项" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 如何叛变是否为列表项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-定义服务使用自定义网络的情况" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 定义服务使用自定义网络的情况
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#四domain-admin的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      四、Domain Admin的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、Domain Admin的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1version" class="md-nav__link">
    <span class="md-ellipsis">
      1.version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2services" class="md-nav__link">
    <span class="md-ellipsis">
      2.services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3domain-admin" class="md-nav__link">
    <span class="md-ellipsis">
      3.domain-admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4volumes" class="md-nav__link">
    <span class="md-ellipsis">
      4.volumes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5ports" class="md-nav__link">
    <span class="md-ellipsis">
      5.ports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6container_name" class="md-nav__link">
    <span class="md-ellipsis">
      6.container_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7image" class="md-nav__link">
    <span class="md-ellipsis">
      7.image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8network" class="md-nav__link">
    <span class="md-ellipsis">
      8.network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9ipam" class="md-nav__link">
    <span class="md-ellipsis">
      9.ipam
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#五halo的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      五、Halo的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、Halo的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2halo服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.halo服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3halodb服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.halodb服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#六oneapi的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      六、OneAPI的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、OneAPI的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2mysql服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.mysql服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3oneapi服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.oneapi服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_1" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#七fastgpt的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      七、FastGPT的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、FastGPT的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_2" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2pgpostgresql数据库服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.pg（PostgreSQL数据库）服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3mongomongodb-数据库服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.mongo（MongoDB 数据库）服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4fastgpt服务" class="md-nav__link">
    <span class="md-ellipsis">
      4.fastgpt服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5网络定义" class="md-nav__link">
    <span class="md-ellipsis">
      5.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#八dify的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      八、Dify的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、Dify的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_3" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2api服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.api服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3worker服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.worker服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4web服务" class="md-nav__link">
    <span class="md-ellipsis">
      4.web服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5db服务" class="md-nav__link">
    <span class="md-ellipsis">
      5.db服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6redis服务" class="md-nav__link">
    <span class="md-ellipsis">
      6.redis服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7weaviate服务" class="md-nav__link">
    <span class="md-ellipsis">
      7.weaviate服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8sandbox服务" class="md-nav__link">
    <span class="md-ellipsis">
      8.sandbox服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9ssrf_proxy服务" class="md-nav__link">
    <span class="md-ellipsis">
      9.ssrf_proxy服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10nginx服务" class="md-nav__link">
    <span class="md-ellipsis">
      10.nginx服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11网络定义" class="md-nav__link">
    <span class="md-ellipsis">
      11.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#九typecho的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      九、typecho的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="九、typecho的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_4" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2typecho服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.typecho服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3typechdb服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.typechdb服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_2" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#十reader的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      十、reader的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十、reader的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_5" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2read_all服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.read_all服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3watchtower服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.watchtower服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_3" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#十一navidrome的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      十一、navidrome的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十一、navidrome的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_6" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2navidrome服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.navidrome服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3miniserve服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.miniserve服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_4" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E5%AE%89%E8%A3%85KeyManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 安装KeyManager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2IT-Tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署IT-Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2django/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署django
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2dockerNAS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署dockerNAS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2gitlab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署gitlab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2itops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署itops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2jumpserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署jumpserver-v2.8.4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2jupyter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署jupyter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2redis%20-%20%E5%89%AF%E6%9C%AC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署redis - 副本
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2smokeping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署SmokePing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2wizard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署wizard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2zabbix6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署zabbix6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell一键部署docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Docker note
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Docker note
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/1%20docker%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker概念
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/2%20docker%E5%AE%89%E8%A3%85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker安装
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/3.1%20docker%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker下载加速
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/3.2%20Registry%E6%90%AD%E5%BB%BAdocker%E7%A7%81%E4%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registry搭建docker私仓
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/3.3%20%E5%B0%86%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将镜像推送到阿里云
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/4%20%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    镜像命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/5%20%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    容器命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/6%20%E9%83%A8%E7%BD%B2mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署MySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/7%20%E9%83%A8%E7%BD%B2tomcat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署Tomcat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/9%20Dockerfile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dockerfile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/19.1%20%E9%83%A8%E7%BD%B2OpenLDAP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署OpenLDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/19.2%20%E9%83%A8%E7%BD%B2gogs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署Gogs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/19.3%20%E9%83%A8%E7%BD%B2chatgpt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署ChatGPT
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../routeswitch/Cisio/%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    路由交换
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../synology/VSP%20%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    群晖
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../sql/PostgreSQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    数据库
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../bat/git/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    批处理
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../k8s/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    K8S
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../git/Git/Git%20Extensions%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Git
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../essay/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    随笔
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#一安装docker-copose-v1" class="md-nav__link">
    <span class="md-ellipsis">
      一、安装docker-copose v1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、安装docker-copose v1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1下载docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      1.下载Docker Compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2赋权使二进制文件可执行" class="md-nav__link">
    <span class="md-ellipsis">
      2.赋权使二进制文件可执行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3测试安装" class="md-nav__link">
    <span class="md-ellipsis">
      3.测试安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4启动停止" class="md-nav__link">
    <span class="md-ellipsis">
      4.启动停止
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#二安装docker-compose-v2" class="md-nav__link">
    <span class="md-ellipsis">
      二、安装docker compose v2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、安装docker compose v2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1compose官网下载地址" class="md-nav__link">
    <span class="md-ellipsis">
      1.compose官网下载地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2赋权" class="md-nav__link">
    <span class="md-ellipsis">
      2.赋权
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3测试安装是否成功" class="md-nav__link">
    <span class="md-ellipsis">
      3.测试安装是否成功
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.测试安装是否成功">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4启动方式" class="md-nav__link">
    <span class="md-ellipsis">
      4.启动方式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#三相关说明" class="md-nav__link">
    <span class="md-ellipsis">
      三、相关说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、相关说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1docker-compose-up--d-和-docker-compose-up--d-的区别" class="md-nav__link">
    <span class="md-ellipsis">
      1.docker-compose up -d 和 docker compose up -d 的区别
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2docker-compose-up--d-命令" class="md-nav__link">
    <span class="md-ellipsis">
      2.docker compose up -d 命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3docker-compose中的version参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      3.docker compose中的version参数说明
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4通过docker-compose创建后的容器网络" class="md-nav__link">
    <span class="md-ellipsis">
      4.通过Docker Compose创建后的容器网络
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5docker-compose中的-符号" class="md-nav__link">
    <span class="md-ellipsis">
      5.docker-compose中的-符号
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.docker-compose中的-符号">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-什么情况下每个属性前要加-" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 什么情况下每个属性前要加-
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-如何叛变是否为列表项" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 如何叛变是否为列表项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-定义服务使用自定义网络的情况" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 定义服务使用自定义网络的情况
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#四domain-admin的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      四、Domain Admin的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、Domain Admin的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1version" class="md-nav__link">
    <span class="md-ellipsis">
      1.version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2services" class="md-nav__link">
    <span class="md-ellipsis">
      2.services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3domain-admin" class="md-nav__link">
    <span class="md-ellipsis">
      3.domain-admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4volumes" class="md-nav__link">
    <span class="md-ellipsis">
      4.volumes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5ports" class="md-nav__link">
    <span class="md-ellipsis">
      5.ports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6container_name" class="md-nav__link">
    <span class="md-ellipsis">
      6.container_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7image" class="md-nav__link">
    <span class="md-ellipsis">
      7.image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8network" class="md-nav__link">
    <span class="md-ellipsis">
      8.network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9ipam" class="md-nav__link">
    <span class="md-ellipsis">
      9.ipam
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#五halo的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      五、Halo的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、Halo的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2halo服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.halo服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3halodb服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.halodb服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#六oneapi的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      六、OneAPI的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、OneAPI的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2mysql服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.mysql服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3oneapi服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.oneapi服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_1" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#七fastgpt的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      七、FastGPT的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、FastGPT的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_2" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2pgpostgresql数据库服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.pg（PostgreSQL数据库）服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3mongomongodb-数据库服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.mongo（MongoDB 数据库）服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4fastgpt服务" class="md-nav__link">
    <span class="md-ellipsis">
      4.fastgpt服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5网络定义" class="md-nav__link">
    <span class="md-ellipsis">
      5.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#八dify的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      八、Dify的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、Dify的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_3" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2api服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.api服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3worker服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.worker服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4web服务" class="md-nav__link">
    <span class="md-ellipsis">
      4.web服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5db服务" class="md-nav__link">
    <span class="md-ellipsis">
      5.db服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6redis服务" class="md-nav__link">
    <span class="md-ellipsis">
      6.redis服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7weaviate服务" class="md-nav__link">
    <span class="md-ellipsis">
      7.weaviate服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8sandbox服务" class="md-nav__link">
    <span class="md-ellipsis">
      8.sandbox服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9ssrf_proxy服务" class="md-nav__link">
    <span class="md-ellipsis">
      9.ssrf_proxy服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10nginx服务" class="md-nav__link">
    <span class="md-ellipsis">
      10.nginx服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11网络定义" class="md-nav__link">
    <span class="md-ellipsis">
      11.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#九typecho的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      九、typecho的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="九、typecho的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_4" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2typecho服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.typecho服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3typechdb服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.typechdb服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_2" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#十reader的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      十、reader的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十、reader的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_5" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2read_all服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.read_all服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3watchtower服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.watchtower服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_3" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#十一navidrome的yml参数说明" class="md-nav__link">
    <span class="md-ellipsis">
      十一、navidrome的yml参数说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十一、navidrome的yml参数说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1版本_6" class="md-nav__link">
    <span class="md-ellipsis">
      1.版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2navidrome服务" class="md-nav__link">
    <span class="md-ellipsis">
      2.navidrome服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3miniserve服务" class="md-nav__link">
    <span class="md-ellipsis">
      3.miniserve服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4网络定义_4" class="md-nav__link">
    <span class="md-ellipsis">
      4.网络定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  
    
      
    
    <a href="https://github.com/zyx3721/Jerion-MkDoc/raw/main/docs/docker/docker-deploy/docker compose安装及参数说明.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="docker-compose安装及参数说明">docker compose安装及参数说明<a class="headerlink" href="#docker-compose安装及参数说明" title="Permanent link">&para;</a></h1>
<h2 id="一安装docker-copose-v1">一、安装docker-copose v1<a class="headerlink" href="#一安装docker-copose-v1" title="Permanent link">&para;</a></h2>
<h3 id="1下载docker-compose">1.下载Docker Compose<a class="headerlink" href="#1下载docker-compose" title="Permanent link">&para;</a></h3>
<p>可以访问<a href="https://github.com/docker/compose/releases"><strong>官方GitHub仓库</strong></a>查找最新版本。以下命令下载一个常用的版本，但请确认是否有更新的版本可用：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a>curl<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-</span><span class="k">$(</span>uname<span class="w"> </span>-s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname<span class="w"> </span>-m<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>-o<span class="w"> </span>/usr/local/bin/docker-compose
</code></pre></div>
<h3 id="2赋权使二进制文件可执行">2.赋权使二进制文件可执行<a class="headerlink" href="#2赋权使二进制文件可执行" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a>chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/bin/docker-compose
</code></pre></div>
<h3 id="3测试安装">3.测试安装<a class="headerlink" href="#3测试安装" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><a href="#__codelineno-2-1"><span class="linenos" data-linenos="1 "></span></a>docker-compose<span class="w"> </span>--version
</code></pre></div>
<h3 id="4启动停止">4.启动停止<a class="headerlink" href="#4启动停止" title="Permanent link">&para;</a></h3>
<p>（1）在后台启动所有服务：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><a href="#__codelineno-3-1"><span class="linenos" data-linenos="1 "></span></a>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>（2）停止并移除所有服务，以及默认创建的网络。如果加上<strong>-v</strong>参数，则同时移除相关的卷：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a>docker-compose<span class="w"> </span>down
</code></pre></div>
<p>（3）查看后台启动日志：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos="1 "></span></a>docker-comose<span class="w"> </span>logs<span class="w"> </span>容器id
</code></pre></div>
<p>（4）卸载docker compose v1：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><a href="#__codelineno-6-1"><span class="linenos" data-linenos="1 "></span></a>rm<span class="w"> </span>-rf<span class="w"> </span>/usr/local/bin/docker-compose
</code></pre></div>
<p>上述为二进制安装，直接删除二进制文件，即可卸载docker-compose v1。</p>
<h2 id="二安装docker-compose-v2">二、安装docker compose v2<a class="headerlink" href="#二安装docker-compose-v2" title="Permanent link">&para;</a></h2>
<h3 id="1compose官网下载地址">1.<a href="https://github.com/docker/compose/tags">compose官网下载地址</a><a class="headerlink" href="#1compose官网下载地址" title="Permanent link">&para;</a></h3>
<p>下载compose v2：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a><span class="nv">DOCKER_CONFIG</span><span class="o">=</span><span class="si">${</span><span class="nv">DOCKER_CONFIG</span><span class="k">:-</span><span class="nv">$HOME</span><span class="p">/.docker</span><span class="si">}</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><a href="#__codelineno-7-2"><span class="linenos" data-linenos="2 "></span></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><a href="#__codelineno-7-3"><span class="linenos" data-linenos="3 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$DOCKER_CONFIG</span>/cli-plugins
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><a href="#__codelineno-7-4"><span class="linenos" data-linenos="4 "></span></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><a href="#__codelineno-7-5"><span class="linenos" data-linenos="5 "></span></a>curl<span class="w"> </span>-SL<span class="w">  </span>https://github.com/docker/compose/releases/download/v2.3.4/docker-compose-linux-x86_64<span class="w"> </span>-o<span class="w"> </span><span class="nv">$DOCKER_CONFIG</span>/cli-plugins/docker-compose
</code></pre></div>
<h3 id="2赋权">2.赋权<a class="headerlink" href="#2赋权" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><a href="#__codelineno-8-1"><span class="linenos" data-linenos="1 "></span></a>chmod<span class="w"> </span>+x<span class="w"> </span><span class="nv">$DOCKER_CONFIG</span>/cli-plugins/docker-compose
</code></pre></div>
<h3 id="3测试安装是否成功">3.测试安装是否成功<a class="headerlink" href="#3测试安装是否成功" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><a href="#__codelineno-9-1"><span class="linenos" data-linenos="1 "></span></a><span class="o">[</span>root@zhongjl-test-01<span class="w"> </span>/root<span class="o">]</span><span class="c1"># docker compose version</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><a href="#__codelineno-9-2"><span class="linenos" data-linenos="2 "></span></a>Docker<span class="w"> </span>Compose<span class="w"> </span>version<span class="w"> </span>v2.3.4
</code></pre></div>
<h4 id="4启动方式">4.启动方式<a class="headerlink" href="#4启动方式" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><a href="#__codelineno-10-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w">   </span><span class="c1"># 使用此命令需要在拥有yml文件的目录下执行</span>
</code></pre></div>
<h2 id="三相关说明">三、相关说明<a class="headerlink" href="#三相关说明" title="Permanent link">&para;</a></h2>
<h3 id="1docker-compose-up--d-和-docker-compose-up--d-的区别">1.<code>docker-compose up -d</code> 和 <code>docker compose up -d</code> 的区别<a class="headerlink" href="#1docker-compose-up--d-和-docker-compose-up--d-的区别" title="Permanent link">&para;</a></h3>
<p>​       主要区别在于命令的书写格式。</p>
<ul>
<li><code>docker-compose up -d</code>：这是旧版本的 Docker Compose 命令格式。在较早的版本中，使用 <code>docker-compose</code> 命令来操作 Docker Compose 相关的功能。因此，<code>docker-compose up -d</code> 表示使用 <code>docker-compose</code> 工具来启动容器服务并在后台运行。</li>
<li><code>docker compose up -d</code>：这是新版本 Docker Compose 的命令格式。在较新的版本中，Docker 将 Docker Compose 的功能整合到了 Docker CLI 中，因此可以直接使用 <code>docker compose</code> 命令来操作 Docker Compose 相关的功能。所以，<code>docker compose up -d</code> 表示使用 Docker CLI 中的 <code>compose</code> 子命令来启动容器服务并在后台运行。</li>
</ul>
<p>​       总的来说，两者的功能是相同的，只是命令格式略有不同。如果你使用的是较新版本的 Docker 和 Docker Compose，可以使用 <code>docker compose up -d</code> 来启动容器服务。如果你使用的是较旧版本的 Docker Compose，可以继续使用 <code>docker-compose up -d</code> 命令。</p>
<h3 id="2docker-compose-up--d-命令">2.<code>docker compose up -d</code> 命令<a class="headerlink" href="#2docker-compose-up--d-命令" title="Permanent link">&para;</a></h3>
<p>​       默认情况下会在当前目录下查找 <code>docker-compose.yml</code> 或 <code>docker-compose.yaml</code> 文件，并基于该文件中定义的服务配置来启动容器服务。如果当前目录下有多个不同的 yml 文件，只有最先找到的文件会被用来启动服务。</p>
<p>​       如果想在不同路径下运行不同的 <code>docker-compose.yml</code> 文件，可以在运行命令时指定文件的路径，例如：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><a href="#__codelineno-11-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>/path/to/your/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>​       这样就可以指定要使用的 <code>docker-compose.yml</code> 文件路径，从而确保你运行的是特定路径下的文件中定义的服务。</p>
<h3 id="3docker-compose中的version参数说明">3.<code>docker compose</code>中的<code>version</code>参数说明<a class="headerlink" href="#3docker-compose中的version参数说明" title="Permanent link">&para;</a></h3>
<p>​       用于指定 Docker Compose 文件的语法版本。不同版本的 Docker Compose 文件格式和支持的功能可能有所不同。以下是一些主要版本的说明：</p>
<ul>
<li><strong>Version 1</strong>：初始版本，功能有限，配置较简单。</li>
<li><strong>Version 2</strong>：引入了更多高级功能，如多容器应用的编排、网络和卷的管理等。</li>
<li><strong>Version 3</strong>：进一步扩展了功能，增加了对 Swarm 模式的支持，更适合于生产环境。</li>
</ul>
<p>​       在使用 Docker Compose 文件时，建议遵循以下原则：</p>
<ul>
<li><strong>版本选择</strong>: 根据你的需求和 Docker Compose 的版本选择合适的版本。如果你使用的是较新的Docker Compose，建议使用 <code>version: "3.3"</code> 或更新版本。</li>
<li><strong>兼容性</strong>: 确保 Docker 引擎和 Docker Compose 版本支持你指定的版本。例如，Docker Compose 1.25.0 及以上版本支持 Compose file 3.8。</li>
</ul>
<p>​       不建议随便更改 <code>version</code> 参数，特别是从低版本更改到高版本，因为高版本可能包含一些新特性或改变，而低版本不支持这些特性。</p>
<h3 id="4通过docker-compose创建后的容器网络">4.通过Docker Compose创建后的容器网络<a class="headerlink" href="#4通过docker-compose创建后的容器网络" title="Permanent link">&para;</a></h3>
<p>​       通过 Docker Compose 创建的容器会默认加入一个新的网络，网络名称是基于项目名生成的。除非你在Compose文件中明确指定了网络配置。</p>
<ul>
<li><strong>默认行为</strong>: 如果没有在 Compose 文件中定义自定义网络，Docker Compose 会为每个项目创建一个默认的桥接网络，网络名称通常是 <code>项目名_default</code>。</li>
<li><strong>自定义网络</strong>: 你可以在 Compose 文件中自定义网络，明确定义网络名称和类型。</li>
</ul>
<p>​       在Docker Compose文件中，定义网络配置时，还可以在<code>服务级别</code>或<code>全局级别</code>进行配置，分别为以下两种管理网络的方式：</p>
<ul>
<li><strong>显式引用网络</strong>：在每个服务中明确指定使用的网络。</li>
<li><strong>全局定义网络</strong>：在全局网络定义部分集中管理，然后在每个服务中引用。</li>
</ul>
<p>​       实际上，这两种方式在 Docker Compose 文件中的配置非常相似，以至于在文件中看起来几乎一模一样。</p>
<h3 id="5docker-compose中的-符号">5.docker-compose中的<code>-</code>符号<a class="headerlink" href="#5docker-compose中的-符号" title="Permanent link">&para;</a></h3>
<h4 id="51-什么情况下每个属性前要加-">5.1 什么情况下每个属性前要加<code>-</code><a class="headerlink" href="#51-什么情况下每个属性前要加-" title="Permanent link">&para;</a></h4>
<p>​       在 YAML 文件中，每个属性前是否需要加 <code>-</code> 取决于该属性是单独的键值对还是列表项。以下是一些基本规则和示例。</p>
<p>​       <strong>基本规则：</strong></p>
<ul>
<li><strong>键值对</strong>：当属性是普通的键值对时，不需要在前面加 <code>-</code>。</li>
<li><strong>列表项</strong>：当属性是列表中的一项时，需要在前面加 <code>-</code>。</li>
</ul>
<p>​       <strong>键值对示例：</strong></p>
<p>​       普通的键值对不需要在前面加 <code>-</code>。</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><a href="#__codelineno-12-1"><span class="linenos" data-linenos="1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3&#39;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><a href="#__codelineno-12-2"><span class="linenos" data-linenos="2 "></span></a>services:
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><a href="#__codelineno-12-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">  </span>app:
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><a href="#__codelineno-12-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span>image:<span class="w"> </span>myapp:latest
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><a href="#__codelineno-12-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><a href="#__codelineno-12-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">      </span>MODE:<span class="w"> </span>production
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><a href="#__codelineno-12-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">      </span>LOG_LEVEL:<span class="w"> </span>INFO
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><a href="#__codelineno-12-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><a href="#__codelineno-12-9"><span class="linenos" data-linenos="9 "></span></a><span class="w">      </span>-<span class="w"> </span>my_custom_network
</code></pre></div>
<p>​       <strong>列表项示例：</strong></p>
<p>​       当属性是列表中的一项时，需要在前面加 <code>-</code>。</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><a href="#__codelineno-13-1"><span class="linenos" data-linenos="1 "></span></a>networks:
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><a href="#__codelineno-13-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span>my_custom_network:
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><a href="#__codelineno-13-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span>driver:<span class="w"> </span>bridge
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><a href="#__codelineno-13-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><a href="#__codelineno-13-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">      </span>config:
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><a href="#__codelineno-13-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.20.0.0/16<span class="w">  </span><span class="c1"># 列表项，需要加 -</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><a href="#__codelineno-13-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">          </span>gateway:<span class="w"> </span><span class="m">172</span>.20.0.1
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><a href="#__codelineno-13-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.21.0.0/16<span class="w">  </span><span class="c1"># 列表项，需要加 -</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><a href="#__codelineno-13-9"><span class="linenos" data-linenos="9 "></span></a><span class="w">          </span>gateway:<span class="w"> </span><span class="m">172</span>.21.0.1
</code></pre></div>
<h4 id="52-如何叛变是否为列表项">5.2 如何叛变是否为列表项<a class="headerlink" href="#52-如何叛变是否为列表项" title="Permanent link">&para;</a></h4>
<p>​       判断是否是列表项主要看上下文，具体有以下几种情况：</p>
<ul>
<li><strong>直接定义列表</strong>：如果一个键对应的是一个列表，那么列表中的每一项前都需要加 <code>-</code>。</li>
<li><strong>列表中的字典</strong>：列表中的每一项如果是字典，则每个字典前也需要加 <code>-</code>。</li>
</ul>
<p>​       <strong>判断方法和示例：</strong></p>
<ul>
<li><strong>直接定义列表：</strong>当某个键的值是一个列表时，每个列表项前需要加 <code>-</code>。</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><a href="#__codelineno-14-1"><span class="linenos" data-linenos="1 "></span></a>services:
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><a href="#__codelineno-14-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span>app:
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><a href="#__codelineno-14-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span>image:<span class="w"> </span>myapp:latest
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><a href="#__codelineno-14-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><a href="#__codelineno-14-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">      </span>-<span class="w"> </span>my_custom_network<span class="w">  </span><span class="c1"># 这是一个列表项</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><a href="#__codelineno-14-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">      </span>-<span class="w"> </span>another_network<span class="w">  </span><span class="c1"># 这是一个列表项</span>
</code></pre></div>
<p>​       在上面的例子中，<code>networks</code> 是一个列表，因此它的每个项都需要加 <code>-</code>。</p>
<ul>
<li><strong>列表中的字典：</strong>当某个列表中的每一项是一个字典时，每个字典前也需要加 <code>-</code>。</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><a href="#__codelineno-15-1"><span class="linenos" data-linenos="1 "></span></a>networks:
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><a href="#__codelineno-15-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span>my_custom_network:
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><a href="#__codelineno-15-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span>driver:<span class="w"> </span>bridge
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><a href="#__codelineno-15-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><a href="#__codelineno-15-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">      </span>config:
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><a href="#__codelineno-15-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.20.0.0/16<span class="w">  </span><span class="c1"># 这是一个列表中的字典项</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><a href="#__codelineno-15-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">          </span>gateway:<span class="w"> </span><span class="m">172</span>.20.0.1
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><a href="#__codelineno-15-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.21.0.0/16<span class="w">  </span><span class="c1"># 这是一个列表中的字典项</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><a href="#__codelineno-15-9"><span class="linenos" data-linenos="9 "></span></a><span class="w">          </span>gateway:<span class="w"> </span><span class="m">172</span>.21.0.1
</code></pre></div>
<p>​       在这个例子中，<code>config</code> 是一个列表，因此每个字典项前需要加 <code>-</code>。</p>
<h4 id="53-定义服务使用自定义网络的情况">5.3 定义服务使用自定义网络的情况<a class="headerlink" href="#53-定义服务使用自定义网络的情况" title="Permanent link">&para;</a></h4>
<p>​       在 Docker Compose 文件中，定义服务使用自定义网络时，如果只是简单地将服务连接到一个网络，那么需要使用列表的方式；如果要在网络上设置其他属性（例如 <code>ipv4_address</code>），则不需要使用列表，而是直接定义键值对。下面具体解释这两种情况：</p>
<ul>
<li><strong>简单连接网络：</strong></li>
</ul>
<p>​       当你只是将服务连接到一个网络，不需要设置额外的属性时，使用列表形式：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos="1 "></span></a>services:
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><a href="#__codelineno-16-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span>app:
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><a href="#__codelineno-16-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span>image:<span class="w"> </span>myapp:latest
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><a href="#__codelineno-16-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><a href="#__codelineno-16-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">      </span>-<span class="w"> </span>my_custom_network<span class="w">  </span><span class="c1"># 这里是列表项</span>
</code></pre></div>
<ul>
<li><strong>连接网络并设置属性：</strong></li>
</ul>
<p>​       当你需要为网络配置额外的属性（例如 <code>ipv4_address</code>）时，直接在网络下定义键值对：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><a href="#__codelineno-17-1"><span class="linenos" data-linenos="1 "></span></a>services:
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><a href="#__codelineno-17-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">  </span>app:
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><a href="#__codelineno-17-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span>image:<span class="w"> </span>myapp:latest
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><a href="#__codelineno-17-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><a href="#__codelineno-17-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">      </span>my_custom_network:
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><a href="#__codelineno-17-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.0.2<span class="w">  </span><span class="c1"># 这里是键值对</span>
</code></pre></div>
<p>​       <strong>为什么不同的情况下是否需要 <code>-</code>：</strong></p>
<ul>
<li>在 <strong>简单连接网络</strong> 的情况下，<code>networks</code> 是一个列表，每个网络是列表中的一个项，因此每个项前需要 <code>-</code>。</li>
<li>在 <strong>设置网络属性</strong> 的情况下，<code>networks</code> 是一个字典，其中键是网络名，值是另一个字典（这个字典包含了网络的配置），所以不需要 <code>-</code>。</li>
</ul>
<h2 id="四domain-admin的yml参数说明">四、Domain Admin的yml参数说明<a class="headerlink" href="#四domain-admin的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><a href="#__codelineno-18-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3.3&#39;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><a href="#__codelineno-18-2"><span class="linenos" data-linenos=" 2 "></span></a>services:
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><a href="#__codelineno-18-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">  </span>domain-admin:
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><a href="#__codelineno-18-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><a href="#__codelineno-18-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s1">&#39;./database:/app/database&#39;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><a href="#__codelineno-18-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s1">&#39;./logs:/app/logs&#39;</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><a href="#__codelineno-18-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><a href="#__codelineno-18-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s1">&#39;8000:8000&#39;</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><a href="#__codelineno-18-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>domain-admin
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><a href="#__codelineno-18-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span>image:<span class="w"> </span>mouday/domain-admin:latest
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><a href="#__codelineno-18-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>network:
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><a href="#__codelineno-18-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">      </span>-<span class="w"> </span>domain_admin
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><a href="#__codelineno-18-13"><span class="linenos" data-linenos="13 "></span></a>networks:
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><a href="#__codelineno-18-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">  </span>domain_admin:
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><a href="#__codelineno-18-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span>name:<span class="w"> </span>halo_network
<a id="__codelineno-18-16" name="__codelineno-18-16"></a><a href="#__codelineno-18-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-18-17" name="__codelineno-18-17"></a><a href="#__codelineno-18-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-18-18" name="__codelineno-18-18"></a><a href="#__codelineno-18-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">      </span>config:
<a id="__codelineno-18-19" name="__codelineno-18-19"></a><a href="#__codelineno-18-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.196.0.0/16
</code></pre></div>
<h3 id="1version">1.version<a class="headerlink" href="#1version" title="Permanent link">&para;</a></h3>
<p>​       这是 Docker Compose 文件的版本，定义了使用的语法版本。</p>
<h3 id="2services">2.services<a class="headerlink" href="#2services" title="Permanent link">&para;</a></h3>
<p>​       这是一个顶层键，表示将要定义一组服务。</p>
<h3 id="3domain-admin">3.domain-admin<a class="headerlink" href="#3domain-admin" title="Permanent link">&para;</a></h3>
<p>​       这是服务的名称。可以通过这个名称来引用这个服务。</p>
<h3 id="4volumes">4.volumes<a class="headerlink" href="#4volumes" title="Permanent link">&para;</a></h3>
<p>​       这部分定义了要挂载到容器中的目录。</p>
<ul>
<li><code>'./database:/app/database'</code>: 将主机上的 <code>./database</code> 目录挂载到容器中的 <code>/app/database</code> 目录。这通常用于持久化数据。</li>
<li><code>'./logs:/app/logs'</code>: 将主机上的 <code>./logs</code> 目录挂载到容器中的 <code>/app/logs</code> 目录。这通常用于存储日志文件。</li>
</ul>
<h3 id="5ports">5.ports<a class="headerlink" href="#5ports" title="Permanent link">&para;</a></h3>
<p>​       这部分定义了端口映射。</p>
<ul>
<li><code>'8000:8000'</code>: 将主机上的 8000 端口映射到容器内的 8000 端口。这样你可以通过主机的 8000 端口访问容器内的服务。</li>
</ul>
<h3 id="6container_name">6.container_name<a class="headerlink" href="#6container_name" title="Permanent link">&para;</a></h3>
<p>​       定义了容器的名称，这里将容器命名为 <code>domain-admin</code>。</p>
<h3 id="7image">7.image<a class="headerlink" href="#7image" title="Permanent link">&para;</a></h3>
<p>​       指定了要使用的 Docker 镜像。</p>
<ul>
<li><code>mouday/domain-admin:latest</code>: 使用 <code>mouday</code> 仓库中的 <code>domain-admin</code> 镜像，并使用最新版本（<code>latest</code> 标签）。</li>
</ul>
<h3 id="8network">8.network<a class="headerlink" href="#8network" title="Permanent link">&para;</a></h3>
<p>​       指定该服务使用的网络，这里是 <code>domain_admin</code>。</p>
<ul>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>halo_network</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>halo_halo_network</code>。</li>
</ul>
<h3 id="9ipam">9.ipam<a class="headerlink" href="#9ipam" title="Permanent link">&para;</a></h3>
<p>​       是IP 地址管理。</p>
<ul>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.196.0.0/16</code>。</li>
</ul>
<h2 id="五halo的yml参数说明">五、Halo的yml参数说明<a class="headerlink" href="#五halo的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><a href="#__codelineno-19-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s2">&quot;3&quot;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><a href="#__codelineno-19-2"><span class="linenos" data-linenos=" 2 "></span></a>services:
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><a href="#__codelineno-19-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">  </span>halo:
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><a href="#__codelineno-19-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span>image:<span class="w"> </span>halohub/halo:2.14
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><a href="#__codelineno-19-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>halo2
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><a href="#__codelineno-19-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><a href="#__codelineno-19-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">      </span>-<span class="w"> </span>halo_network
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><a href="#__codelineno-19-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span>restart:<span class="w"> </span>on-failure:3
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><a href="#__codelineno-19-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><a href="#__codelineno-19-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">      </span>halodb:
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><a href="#__codelineno-19-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span>condition:<span class="w"> </span>service_healthy
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><a href="#__codelineno-19-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><a href="#__codelineno-19-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/Halo/halo2:/root/.halo2
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><a href="#__codelineno-19-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><a href="#__codelineno-19-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;8090:8090&quot;</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><a href="#__codelineno-19-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>healthcheck:
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><a href="#__codelineno-19-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">      </span><span class="c1"># test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8090/actuator/health/readiness&quot;]</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><a href="#__codelineno-19-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">      </span>test:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;CMD-SHELL&quot;</span>,<span class="w"> </span><span class="s2">&quot;curl -f http://localhost:8090/actuator/health/readiness || exit 1&quot;</span><span class="o">]</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><a href="#__codelineno-19-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">      </span>interval:<span class="w"> </span>1m
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><a href="#__codelineno-19-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">      </span>timeout:<span class="w"> </span>10s
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><a href="#__codelineno-19-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">      </span>retries:<span class="w"> </span><span class="m">3</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><a href="#__codelineno-19-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">      </span>start_period:<span class="w"> </span>1m
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><a href="#__codelineno-19-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span>command:
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><a href="#__codelineno-19-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">      </span>-<span class="w"> </span>--spring.r2dbc.url<span class="o">=</span>r2dbc:pool:postgresql://halodb/halo
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><a href="#__codelineno-19-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">      </span>-<span class="w"> </span>--spring.r2dbc.username<span class="o">=</span>halo
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><a href="#__codelineno-19-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">      </span><span class="c1"># #设置你的数据库PostgreSQL的密码，请保证与下方POSTGRES_PASSWORD的变量值一致。</span>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><a href="#__codelineno-19-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">      </span>-<span class="w"> </span>--spring.r2dbc.password<span class="o">=</span>dream13889
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><a href="#__codelineno-19-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">      </span>-<span class="w"> </span>--spring.sql.init.platform<span class="o">=</span>postgresql
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><a href="#__codelineno-19-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">      </span><span class="c1"># 外部访问地址，请根据实际需要修改</span>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a><a href="#__codelineno-19-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">      </span>-<span class="w"> </span>--halo.external-url<span class="o">=</span>https://blog.jerion.cn/
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><a href="#__codelineno-19-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">      </span>-<span class="w"> </span>--halo.security.initializer.superadminusername<span class="o">=</span>admin
<a id="__codelineno-19-32" name="__codelineno-19-32"></a><a href="#__codelineno-19-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">      </span>-<span class="w"> </span>--halo.security.initializer.superadminpassword<span class="o">=</span>dream13889
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><a href="#__codelineno-19-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">  </span>halodb:
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><a href="#__codelineno-19-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span>image:<span class="w"> </span>postgres:15.4
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><a href="#__codelineno-19-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>halodb2
<a id="__codelineno-19-36" name="__codelineno-19-36"></a><a href="#__codelineno-19-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-19-37" name="__codelineno-19-37"></a><a href="#__codelineno-19-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">      </span>-<span class="w"> </span>halo_network
<a id="__codelineno-19-38" name="__codelineno-19-38"></a><a href="#__codelineno-19-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span>restart:<span class="w"> </span>on-failure:3
<a id="__codelineno-19-39" name="__codelineno-19-39"></a><a href="#__codelineno-19-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-19-40" name="__codelineno-19-40"></a><a href="#__codelineno-19-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/Halo/db:/var/lib/postgresql/data
<a id="__codelineno-19-41" name="__codelineno-19-41"></a><a href="#__codelineno-19-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span>healthcheck:
<a id="__codelineno-19-42" name="__codelineno-19-42"></a><a href="#__codelineno-19-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">      </span><span class="c1"># test: [ &quot;CMD&quot;, &quot;pg_isready&quot; ]</span>
<a id="__codelineno-19-43" name="__codelineno-19-43"></a><a href="#__codelineno-19-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">      </span>test:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;CMD-SHELL&quot;</span>,<span class="w"> </span><span class="s2">&quot;pg_isready -U halo -d halo -h localhost&quot;</span><span class="o">]</span>
<a id="__codelineno-19-44" name="__codelineno-19-44"></a><a href="#__codelineno-19-44"><span class="linenos" data-linenos="44 "></span></a><span class="w">      </span>interval:<span class="w"> </span>30s
<a id="__codelineno-19-45" name="__codelineno-19-45"></a><a href="#__codelineno-19-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">      </span>timeout:<span class="w"> </span>5s
<a id="__codelineno-19-46" name="__codelineno-19-46"></a><a href="#__codelineno-19-46"><span class="linenos" data-linenos="46 "></span></a><span class="w">      </span>retries:<span class="w"> </span><span class="m">5</span>
<a id="__codelineno-19-47" name="__codelineno-19-47"></a><a href="#__codelineno-19-47"><span class="linenos" data-linenos="47 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-19-48" name="__codelineno-19-48"></a><a href="#__codelineno-19-48"><span class="linenos" data-linenos="48 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>dream13889<span class="w">  </span><span class="c1">#设置你的数据库密码</span>
<a id="__codelineno-19-49" name="__codelineno-19-49"></a><a href="#__codelineno-19-49"><span class="linenos" data-linenos="49 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">POSTGRES_USER</span><span class="o">=</span>halo
<a id="__codelineno-19-50" name="__codelineno-19-50"></a><a href="#__codelineno-19-50"><span class="linenos" data-linenos="50 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">POSTGRES_DB</span><span class="o">=</span>halo
<a id="__codelineno-19-51" name="__codelineno-19-51"></a><a href="#__codelineno-19-51"><span class="linenos" data-linenos="51 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">PGUSER</span><span class="o">=</span>halo
<a id="__codelineno-19-52" name="__codelineno-19-52"></a><a href="#__codelineno-19-52"><span class="linenos" data-linenos="52 "></span></a>networks:
<a id="__codelineno-19-53" name="__codelineno-19-53"></a><a href="#__codelineno-19-53"><span class="linenos" data-linenos="53 "></span></a><span class="w">  </span>halo_network:
<a id="__codelineno-19-54" name="__codelineno-19-54"></a><a href="#__codelineno-19-54"><span class="linenos" data-linenos="54 "></span></a><span class="w">    </span>name:<span class="w"> </span>halo_network
<a id="__codelineno-19-55" name="__codelineno-19-55"></a><a href="#__codelineno-19-55"><span class="linenos" data-linenos="55 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-19-56" name="__codelineno-19-56"></a><a href="#__codelineno-19-56"><span class="linenos" data-linenos="56 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-19-57" name="__codelineno-19-57"></a><a href="#__codelineno-19-57"><span class="linenos" data-linenos="57 "></span></a><span class="w">      </span>config:
<a id="__codelineno-19-58" name="__codelineno-19-58"></a><a href="#__codelineno-19-58"><span class="linenos" data-linenos="58 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.197.0.0/16
</code></pre></div>
<h3 id="1版本">1.版本<a class="headerlink" href="#1版本" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3。</li>
</ul>
<h3 id="2halo服务">2.halo服务<a class="headerlink" href="#2halo服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定使用的 Docker 镜像，这里是 <code>halohub/halo:2.14</code>。</li>
<li><code>container_name</code>: 容器的名称，这里是 <code>halo2</code>。</li>
<li><code>networks</code>: 指定该服务使用的网络，这里是 <code>halo_network</code>。</li>
<li><code>restart</code>: 指定重启策略，当容器失败时最多重试 3 次。</li>
<li><code>depends_on</code>: 指定服务的依赖关系，这里 <code>halo</code> 服务依赖于 <code>halodb</code> 服务，并且要求 <code>halodb</code> 服务处于健康状态。</li>
<li><code>volumes</code>: 将宿主机的 <code>/data/Halo/halo2</code> 目录挂载到容器的 <code>/root/.halo2</code> 目录。</li>
<li><code>ports</code>: 将宿主机的 8090 端口映射到容器的 8090 端口。</li>
<li><code>healthcheck</code>: 健康检查配置。</li>
<li><code>test</code>: 检查命令，这里使用 <code>curl</code> 检查 <code>http://localhost:8090/actuator/health/readiness</code>。</li>
<li><code>interval</code>: 检查间隔为 1 分钟。</li>
<li><code>timeout</code>: 检查超时时间为 10 秒。</li>
<li><code>retries</code>: 失败重试次数为 3 次。</li>
<li><code>start_period</code>: 开始检查的初始等待时间为 1 分钟。</li>
<li><code>command</code>: 容器启动时执行的命令和参数。</li>
<li><code>--spring.r2dbc.url</code>: 数据库连接 URL。</li>
<li><code>--spring.r2dbc.username</code>: 数据库用户名。</li>
<li><code>--spring.r2dbc.password</code>: 数据库密码。</li>
<li><code>--spring.sql.init.platform</code>: 数据库平台类型。</li>
<li><code>--halo.external-url</code>: 外部访问地址。</li>
<li><code>--halo.security.initializer.superadminusername</code>: 超级管理员用户名。</li>
<li><code>--halo.security.initializer.superadminpassword</code>: 超级管理员密码。</li>
</ul>
<h3 id="3halodb服务">3.halodb服务<a class="headerlink" href="#3halodb服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定使用的 Docker 镜像，这里是 <code>postgres:15.4</code>。</li>
<li><code>container_name</code>: 容器的名称，这里是 <code>halodb2</code>。</li>
<li><code>networks</code>: 指定该服务使用的网络，这里是 <code>halo_network</code>。</li>
<li><code>restart</code>: 指定重启策略，当容器失败时最多重试 3 次。</li>
<li><code>volumes</code>: 将宿主机的 <code>/data/Halo/db</code> 目录挂载到容器的 <code>/var/lib/postgresql/data</code> 目录。</li>
<li><code>healthcheck</code>: 健康检查配置。</li>
<li><code>test</code>: 检查命令，这里使用 <code>pg_isready</code> 检查数据库服务的可用性。</li>
<li><code>interval</code>: 检查间隔为 30 秒。</li>
<li><code>timeout</code>: 检查超时时间为 5 秒。</li>
<li><code>retries</code>: 失败重试次数为 5 次。</li>
<li><code>environment</code>: 环境变量设置。</li>
<li><code>POSTGRES_PASSWORD</code>: 设置数据库密码。</li>
<li><code>POSTGRES_USER</code>: 设置数据库用户名。</li>
<li><code>POSTGRES_DB</code>: 设置数据库名称。</li>
<li><code>PGUSER</code>: 设置 PostgreSQL 用户。</li>
</ul>
<h3 id="4网络定义">4.网络定义<a class="headerlink" href="#4网络定义" title="Permanent link">&para;</a></h3>
<ul>
<li><code>halo_network</code>：定义了一个名为 <code>halo_network</code> 的自定义网络，供 <code>halo</code> 和 <code>halodb</code> 服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>halo_network</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>halo_halo_network</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.197.0.0/16</code>。</li>
</ul>
<h2 id="六oneapi的yml参数说明">六、OneAPI的yml参数说明<a class="headerlink" href="#六oneapi的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><a href="#__codelineno-20-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3.3&#39;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><a href="#__codelineno-20-2"><span class="linenos" data-linenos=" 2 "></span></a>services:
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><a href="#__codelineno-20-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">  </span>mysql:
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><a href="#__codelineno-20-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span>image:<span class="w"> </span>mysql:8.0.36
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><a href="#__codelineno-20-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>mysql
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><a href="#__codelineno-20-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><a href="#__codelineno-20-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><a href="#__codelineno-20-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="m">3307</span>:3306
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><a href="#__codelineno-20-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><a href="#__codelineno-20-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">      </span>-<span class="w"> </span>oneapi
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><a href="#__codelineno-20-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>command:<span class="w"> </span>--default-authentication-plugin<span class="o">=</span>mysql_native_password
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><a href="#__codelineno-20-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><a href="#__codelineno-20-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">      </span>MYSQL_ROOT_PASSWORD:<span class="w"> </span>dream13889
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><a href="#__codelineno-20-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">      </span>MYSQL_DATABASE:<span class="w"> </span>oneapi
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><a href="#__codelineno-20-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><a href="#__codelineno-20-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">      </span>-<span class="w"> </span>./mysql:/var/lib/mysql
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><a href="#__codelineno-20-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">  </span>oneapi:
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><a href="#__codelineno-20-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>oneapi
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><a href="#__codelineno-20-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span>image:<span class="w"> </span>ghcr.io/songquanpeng/one-api:latest
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><a href="#__codelineno-20-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-20-21" name="__codelineno-20-21"></a><a href="#__codelineno-20-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="m">3000</span>:3000
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><a href="#__codelineno-20-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-20-23" name="__codelineno-20-23"></a><a href="#__codelineno-20-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">      </span>-<span class="w"> </span>mysql
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><a href="#__codelineno-20-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><a href="#__codelineno-20-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">      </span>-<span class="w"> </span>oneapi
<a id="__codelineno-20-26" name="__codelineno-20-26"></a><a href="#__codelineno-20-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-20-27" name="__codelineno-20-27"></a><a href="#__codelineno-20-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-20-28" name="__codelineno-20-28"></a><a href="#__codelineno-20-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">SQL_DSN</span><span class="o">=</span>root:dream13889@tcp<span class="o">(</span>mysql:3306<span class="o">)</span>/oneapi
<a id="__codelineno-20-29" name="__codelineno-20-29"></a><a href="#__codelineno-20-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">      </span><span class="c1"># 登录凭证加密密钥</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a><a href="#__codelineno-20-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">SESSION_SECRET</span><span class="o">=</span>oneapikey
<a id="__codelineno-20-31" name="__codelineno-20-31"></a><a href="#__codelineno-20-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">      </span><span class="c1"># 内存缓存</span>
<a id="__codelineno-20-32" name="__codelineno-20-32"></a><a href="#__codelineno-20-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MEMORY_CACHE_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a><a href="#__codelineno-20-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">      </span><span class="c1"># 启动聚合更新，减少数据交互频率</span>
<a id="__codelineno-20-34" name="__codelineno-20-34"></a><a href="#__codelineno-20-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">BATCH_UPDATE_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-20-35" name="__codelineno-20-35"></a><a href="#__codelineno-20-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">      </span><span class="c1"># 聚合更新时长</span>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a><a href="#__codelineno-20-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">BATCH_UPDATE_INTERVAL</span><span class="o">=</span><span class="m">10</span>
<a id="__codelineno-20-37" name="__codelineno-20-37"></a><a href="#__codelineno-20-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">      </span><span class="c1"># 初始化的 root 密钥（建议部署完后更改，否则容易泄露）</span>
<a id="__codelineno-20-38" name="__codelineno-20-38"></a><a href="#__codelineno-20-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">INITIAL_ROOT_TOKEN</span><span class="o">=</span>dream13889
<a id="__codelineno-20-39" name="__codelineno-20-39"></a><a href="#__codelineno-20-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-20-40" name="__codelineno-20-40"></a><a href="#__codelineno-20-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">      </span>-<span class="w"> </span>./oneapi:/data
<a id="__codelineno-20-41" name="__codelineno-20-41"></a><a href="#__codelineno-20-41"><span class="linenos" data-linenos="41 "></span></a>networks:
<a id="__codelineno-20-42" name="__codelineno-20-42"></a><a href="#__codelineno-20-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">  </span>oneapi:
<a id="__codelineno-20-43" name="__codelineno-20-43"></a><a href="#__codelineno-20-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span>name:<span class="w"> </span>oneapi
<a id="__codelineno-20-44" name="__codelineno-20-44"></a><a href="#__codelineno-20-44"><span class="linenos" data-linenos="44 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-20-45" name="__codelineno-20-45"></a><a href="#__codelineno-20-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-20-46" name="__codelineno-20-46"></a><a href="#__codelineno-20-46"><span class="linenos" data-linenos="46 "></span></a><span class="w">      </span>config:
<a id="__codelineno-20-47" name="__codelineno-20-47"></a><a href="#__codelineno-20-47"><span class="linenos" data-linenos="47 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.198.0.0/16
</code></pre></div>
<h3 id="1版本_1">1.版本<a class="headerlink" href="#1版本_1" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3.3。</li>
</ul>
<h3 id="2mysql服务">2.mysql服务<a class="headerlink" href="#2mysql服务" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>image</code>：使用 <code>mysql</code> 镜像的 <code>8.0.36</code> 版本。</p>
</li>
<li>
<p><code>container_name</code>：容器名称为 &ldquo;mysql&rdquo;。</p>
</li>
<li>
<p><code>restart</code>：容器总是重新启动。</p>
</li>
<li>
<p><code>ports</code>：端口映射，将主机的 <code>3307</code> 端口映射到容器的 <code>3306</code> 端口。</p>
</li>
<li>
<p><code>networks</code>：使用名为 <code>oneapi</code> 的网络。</p>
</li>
<li>
<p><code>command</code>：运行容器时执行的命令，这里设置 MySQL 的默认认证插件为 <code>mysql_native_password</code>。</p>
</li>
<li>
<p><code>environment</code>：环境变量。</p>
</li>
<li>
<p><code>MYSQL_ROOT_PASSWORD</code>：设置 MySQL 的 root 用户密码为 <code>dream13889</code>。</p>
</li>
<li>
<p><code>MYSQL_DATABASE</code>：创建名为 <code>oneapi</code> 的数据库。</p>
</li>
<li>
<p><code>volumes</code>：数据卷。</p>
</li>
<li><code>./mysql:/var/lib/mysql</code>：将当前目录下的 <code>mysql</code> 目录挂载到容器的 <code>/var/lib/mysql</code> 目录。</li>
</ul>
<h3 id="3oneapi服务">3.oneapi服务<a class="headerlink" href="#3oneapi服务" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>container_name</code>：容器名称为 &ldquo;oneapi&rdquo;。</p>
</li>
<li>
<p><code>image：使用</code>one-api` 镜像的最新版本。</p>
</li>
<li>
<p><code>ports：端口映射，将主机的</code>3000<code>端口映射到容器的</code>3000` 端口。</p>
</li>
<li>
<p><code>depends_on：依赖关系，确保</code>mysql` 服务先启动。</p>
</li>
<li>
<p><code>networks</code>：使用名为 <code>oneapi</code> 的网络。</p>
</li>
<li>
<p>`restart：容器总是重新启动。</p>
</li>
<li>
<p>`environment：环境变量。</p>
</li>
<li>
<p><code>SQL_DSN=root:dream13889@tcp(mysql:3306)/oneapi</code>：连接 MySQL 数据库的 DSN（数据源名称）。</p>
</li>
<li>
<p><code>SESSION_SECRET</code>：用于登录凭证加密的密钥。</p>
</li>
<li>
<p><code>MEMORY_CACHE_ENABLED</code>：启用内存缓存。</p>
</li>
<li>
<p><code>BATCH_UPDATE_ENABLED</code>：启用批量更新，以减少数据交互频率。</p>
</li>
<li>
<p><code>BATCH_UPDATE_INTERVAL</code>：批量更新的时间间隔为 10 秒。</p>
</li>
<li>
<p><code>INITIAL_ROOT_TOKEN</code>：初始化的 root 密钥（建议部署后更改）。</p>
</li>
<li>
<p><code>volumes</code>：数据卷。</p>
</li>
<li><code>./oneapi:/data</code>：将当前目录下的 <code>oneapi</code> 目录挂载到容器的 <code>/data</code> 目录。</li>
</ul>
<h3 id="4网络定义_1">4.网络定义<a class="headerlink" href="#4网络定义_1" title="Permanent link">&para;</a></h3>
<ul>
<li><code>oneapi</code>：定义了一个名为 <code>oneapi</code> 的自定义网络，供 <code>oneapi</code> 和 <code>mysql</code> 服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>oneapi</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>oneapi_oneapi</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.198.0.0/16</code>。</li>
</ul>
<h2 id="七fastgpt的yml参数说明">七、FastGPT的yml参数说明<a class="headerlink" href="#七fastgpt的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><a href="#__codelineno-21-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3.3&#39;</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><a href="#__codelineno-21-2"><span class="linenos" data-linenos=" 2 "></span></a>services:
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><a href="#__codelineno-21-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">  </span>pg:
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><a href="#__codelineno-21-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span>image:<span class="w"> </span>pgvector/pgvector:0.7.0-pg15<span class="w"> </span><span class="c1"># docker hub</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><a href="#__codelineno-21-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="c1"># image: ankane/pgvector:v0.5.0 # git</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><a href="#__codelineno-21-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="c1"># image: registry.cn-hangzhou.aliyuncs.com/fastgpt/pgvector:v0.5.0 # 阿里云</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><a href="#__codelineno-21-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>pg
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><a href="#__codelineno-21-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><a href="#__codelineno-21-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>ports:<span class="w"> </span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><a href="#__codelineno-21-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="m">5432</span>:5432
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><a href="#__codelineno-21-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><a href="#__codelineno-21-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">      </span>-<span class="w"> </span>fastgpt
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><a href="#__codelineno-21-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><a href="#__codelineno-21-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">POSTGRES_USER</span><span class="o">=</span>hongzelong
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><a href="#__codelineno-21-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>dream13889
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><a href="#__codelineno-21-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">POSTGRES_DB</span><span class="o">=</span>postgres
<a id="__codelineno-21-17" name="__codelineno-21-17"></a><a href="#__codelineno-21-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><a href="#__codelineno-21-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">      </span>-<span class="w"> </span>./pg/data:/var/lib/postgresql/data
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><a href="#__codelineno-21-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">  </span>mongo:
<a id="__codelineno-21-20" name="__codelineno-21-20"></a><a href="#__codelineno-21-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span>image:<span class="w"> </span>mongo:5.0.18<span class="w">  </span><span class="c1"># dockerhub</span>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a><a href="#__codelineno-21-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>mongo
<a id="__codelineno-21-22" name="__codelineno-21-22"></a><a href="#__codelineno-21-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-21-23" name="__codelineno-21-23"></a><a href="#__codelineno-21-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-21-24" name="__codelineno-21-24"></a><a href="#__codelineno-21-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="m">27017</span>:27017
<a id="__codelineno-21-25" name="__codelineno-21-25"></a><a href="#__codelineno-21-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-21-26" name="__codelineno-21-26"></a><a href="#__codelineno-21-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">      </span>-<span class="w"> </span>fastgpt
<a id="__codelineno-21-27" name="__codelineno-21-27"></a><a href="#__codelineno-21-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>command:<span class="w"> </span>mongod<span class="w"> </span>--keyFile<span class="w"> </span>/data/mongodb.key<span class="w"> </span>--replSet<span class="w"> </span>rs0
<a id="__codelineno-21-28" name="__codelineno-21-28"></a><a href="#__codelineno-21-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-21-29" name="__codelineno-21-29"></a><a href="#__codelineno-21-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MONGO_INITDB_ROOT_USERNAME</span><span class="o">=</span>hongzelong
<a id="__codelineno-21-30" name="__codelineno-21-30"></a><a href="#__codelineno-21-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MONGO_INITDB_ROOT_PASSWORD</span><span class="o">=</span>dream13889
<a id="__codelineno-21-31" name="__codelineno-21-31"></a><a href="#__codelineno-21-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-21-32" name="__codelineno-21-32"></a><a href="#__codelineno-21-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">      </span>-<span class="w"> </span>./mongo/data:/data/db
<a id="__codelineno-21-33" name="__codelineno-21-33"></a><a href="#__codelineno-21-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span>entrypoint:
<a id="__codelineno-21-34" name="__codelineno-21-34"></a><a href="#__codelineno-21-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">      </span>-<span class="w"> </span>bash
<a id="__codelineno-21-35" name="__codelineno-21-35"></a><a href="#__codelineno-21-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">      </span>-<span class="w"> </span>-c
<a id="__codelineno-21-36" name="__codelineno-21-36"></a><a href="#__codelineno-21-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="p">|</span>
<a id="__codelineno-21-37" name="__codelineno-21-37"></a><a href="#__codelineno-21-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">128</span><span class="w"> </span>&gt;<span class="w"> </span>/data/mongodb.key
<a id="__codelineno-21-38" name="__codelineno-21-38"></a><a href="#__codelineno-21-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">        </span>chmod<span class="w"> </span><span class="m">400</span><span class="w"> </span>/data/mongodb.key
<a id="__codelineno-21-39" name="__codelineno-21-39"></a><a href="#__codelineno-21-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">        </span>chown<span class="w"> </span><span class="m">999</span>:999<span class="w"> </span>/data/mongodb.key
<a id="__codelineno-21-40" name="__codelineno-21-40"></a><a href="#__codelineno-21-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;const isInited = rs.status().ok === 1</span>
<a id="__codelineno-21-41" name="__codelineno-21-41"></a><a href="#__codelineno-21-41"><span class="linenos" data-linenos="41 "></span></a><span class="s1">        if(!isInited){</span>
<a id="__codelineno-21-42" name="__codelineno-21-42"></a><a href="#__codelineno-21-42"><span class="linenos" data-linenos="42 "></span></a><span class="s1">          rs.initiate({</span>
<a id="__codelineno-21-43" name="__codelineno-21-43"></a><a href="#__codelineno-21-43"><span class="linenos" data-linenos="43 "></span></a><span class="s1">              _id: &quot;rs0&quot;,</span>
<a id="__codelineno-21-44" name="__codelineno-21-44"></a><a href="#__codelineno-21-44"><span class="linenos" data-linenos="44 "></span></a><span class="s1">              members: [</span>
<a id="__codelineno-21-45" name="__codelineno-21-45"></a><a href="#__codelineno-21-45"><span class="linenos" data-linenos="45 "></span></a><span class="s1">                  { _id: 0, host: &quot;mongo:27017&quot; }</span>
<a id="__codelineno-21-46" name="__codelineno-21-46"></a><a href="#__codelineno-21-46"><span class="linenos" data-linenos="46 "></span></a><span class="s1">              ]</span>
<a id="__codelineno-21-47" name="__codelineno-21-47"></a><a href="#__codelineno-21-47"><span class="linenos" data-linenos="47 "></span></a><span class="s1">          })</span>
<a id="__codelineno-21-48" name="__codelineno-21-48"></a><a href="#__codelineno-21-48"><span class="linenos" data-linenos="48 "></span></a><span class="s1">        }&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>/data/initReplicaSet.js
<a id="__codelineno-21-49" name="__codelineno-21-49"></a><a href="#__codelineno-21-49"><span class="linenos" data-linenos="49 "></span></a><span class="w">        </span><span class="nb">exec</span><span class="w"> </span>docker-entrypoint.sh<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$$</span><span class="s2">@&quot;</span><span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-21-50" name="__codelineno-21-50"></a><a href="#__codelineno-21-50"><span class="linenos" data-linenos="50 "></span></a>
<a id="__codelineno-21-51" name="__codelineno-21-51"></a><a href="#__codelineno-21-51"><span class="linenos" data-linenos="51 "></span></a><span class="w">        </span><span class="k">until</span><span class="w"> </span>mongo<span class="w"> </span>-u<span class="w"> </span>hongzelong<span class="w"> </span>-p<span class="w"> </span>dream13889<span class="w"> </span>--authenticationDatabase<span class="w"> </span>admin<span class="w"> </span>--eval<span class="w"> </span><span class="s2">&quot;print(&#39;waited for connection&#39;)&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-21-52" name="__codelineno-21-52"></a><a href="#__codelineno-21-52"><span class="linenos" data-linenos="52 "></span></a><span class="w">          </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Waiting for MongoDB to start...&quot;</span>
<a id="__codelineno-21-53" name="__codelineno-21-53"></a><a href="#__codelineno-21-53"><span class="linenos" data-linenos="53 "></span></a><span class="w">          </span>sleep<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-21-54" name="__codelineno-21-54"></a><a href="#__codelineno-21-54"><span class="linenos" data-linenos="54 "></span></a><span class="w">        </span><span class="k">done</span>
<a id="__codelineno-21-55" name="__codelineno-21-55"></a><a href="#__codelineno-21-55"><span class="linenos" data-linenos="55 "></span></a>
<a id="__codelineno-21-56" name="__codelineno-21-56"></a><a href="#__codelineno-21-56"><span class="linenos" data-linenos="56 "></span></a><span class="w">        </span>mongo<span class="w"> </span>-u<span class="w"> </span>hongzelong<span class="w"> </span>-p<span class="w"> </span>dream13889<span class="w"> </span>--authenticationDatabase<span class="w"> </span>admin<span class="w"> </span>/data/initReplicaSet.js
<a id="__codelineno-21-57" name="__codelineno-21-57"></a><a href="#__codelineno-21-57"><span class="linenos" data-linenos="57 "></span></a>
<a id="__codelineno-21-58" name="__codelineno-21-58"></a><a href="#__codelineno-21-58"><span class="linenos" data-linenos="58 "></span></a><span class="w">        </span><span class="nb">wait</span><span class="w"> </span><span class="nv">$$</span>!
<a id="__codelineno-21-59" name="__codelineno-21-59"></a><a href="#__codelineno-21-59"><span class="linenos" data-linenos="59 "></span></a><span class="w">  </span>fastgpt:
<a id="__codelineno-21-60" name="__codelineno-21-60"></a><a href="#__codelineno-21-60"><span class="linenos" data-linenos="60 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>fastgpt
<a id="__codelineno-21-61" name="__codelineno-21-61"></a><a href="#__codelineno-21-61"><span class="linenos" data-linenos="61 "></span></a><span class="w">    </span>image:<span class="w"> </span>ghcr.io/labring/fastgpt:v4.8.2<span class="w"> </span><span class="c1"># git</span>
<a id="__codelineno-21-62" name="__codelineno-21-62"></a><a href="#__codelineno-21-62"><span class="linenos" data-linenos="62 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-21-63" name="__codelineno-21-63"></a><a href="#__codelineno-21-63"><span class="linenos" data-linenos="63 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="m">9898</span>:3000
<a id="__codelineno-21-64" name="__codelineno-21-64"></a><a href="#__codelineno-21-64"><span class="linenos" data-linenos="64 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-21-65" name="__codelineno-21-65"></a><a href="#__codelineno-21-65"><span class="linenos" data-linenos="65 "></span></a><span class="w">      </span>-<span class="w"> </span>fastgpt
<a id="__codelineno-21-66" name="__codelineno-21-66"></a><a href="#__codelineno-21-66"><span class="linenos" data-linenos="66 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-21-67" name="__codelineno-21-67"></a><a href="#__codelineno-21-67"><span class="linenos" data-linenos="67 "></span></a><span class="w">      </span>-<span class="w"> </span>mongo
<a id="__codelineno-21-68" name="__codelineno-21-68"></a><a href="#__codelineno-21-68"><span class="linenos" data-linenos="68 "></span></a><span class="w">      </span>-<span class="w"> </span>pg
<a id="__codelineno-21-69" name="__codelineno-21-69"></a><a href="#__codelineno-21-69"><span class="linenos" data-linenos="69 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-21-70" name="__codelineno-21-70"></a><a href="#__codelineno-21-70"><span class="linenos" data-linenos="70 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-21-71" name="__codelineno-21-71"></a><a href="#__codelineno-21-71"><span class="linenos" data-linenos="71 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">DEFAULT_ROOT_PSW</span><span class="o">=</span>dream13889
<a id="__codelineno-21-72" name="__codelineno-21-72"></a><a href="#__codelineno-21-72"><span class="linenos" data-linenos="72 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">OPENAI_BASE_URL</span><span class="o">=</span>http://172.18.0.104:3000/v1
<a id="__codelineno-21-73" name="__codelineno-21-73"></a><a href="#__codelineno-21-73"><span class="linenos" data-linenos="73 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">CHAT_API_KEY</span><span class="o">=</span>sk-Vz6HDEC74r73Y0F312E39d1072B443Fa935e766434FcD97e
<a id="__codelineno-21-74" name="__codelineno-21-74"></a><a href="#__codelineno-21-74"><span class="linenos" data-linenos="74 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">DB_MAX_LINK</span><span class="o">=</span><span class="m">30</span>
<a id="__codelineno-21-75" name="__codelineno-21-75"></a><a href="#__codelineno-21-75"><span class="linenos" data-linenos="75 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">TOKEN_KEY</span><span class="o">=</span>any
<a id="__codelineno-21-76" name="__codelineno-21-76"></a><a href="#__codelineno-21-76"><span class="linenos" data-linenos="76 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">ROOT_KEY</span><span class="o">=</span>root_key
<a id="__codelineno-21-77" name="__codelineno-21-77"></a><a href="#__codelineno-21-77"><span class="linenos" data-linenos="77 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">FILE_TOKEN_KEY</span><span class="o">=</span>filetoken
<a id="__codelineno-21-78" name="__codelineno-21-78"></a><a href="#__codelineno-21-78"><span class="linenos" data-linenos="78 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MONGODB_URI</span><span class="o">=</span>mongodb://hongzelong:dream13889@mongo:27017/fastgpt?authSource<span class="o">=</span>admin
<a id="__codelineno-21-79" name="__codelineno-21-79"></a><a href="#__codelineno-21-79"><span class="linenos" data-linenos="79 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">PG_URL</span><span class="o">=</span>postgresql://hongzelong:dream13889@pg:5432/postgres
<a id="__codelineno-21-80" name="__codelineno-21-80"></a><a href="#__codelineno-21-80"><span class="linenos" data-linenos="80 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-21-81" name="__codelineno-21-81"></a><a href="#__codelineno-21-81"><span class="linenos" data-linenos="81 "></span></a><span class="w">      </span>-<span class="w"> </span>./config.json:/app/data/config.json
<a id="__codelineno-21-82" name="__codelineno-21-82"></a><a href="#__codelineno-21-82"><span class="linenos" data-linenos="82 "></span></a><span class="w">      </span>-<span class="w"> </span>./fastgpt/tmp:/app/tmp
<a id="__codelineno-21-83" name="__codelineno-21-83"></a><a href="#__codelineno-21-83"><span class="linenos" data-linenos="83 "></span></a>networks:
<a id="__codelineno-21-84" name="__codelineno-21-84"></a><a href="#__codelineno-21-84"><span class="linenos" data-linenos="84 "></span></a><span class="w">  </span>fastgpt:
<a id="__codelineno-21-85" name="__codelineno-21-85"></a><a href="#__codelineno-21-85"><span class="linenos" data-linenos="85 "></span></a><span class="w">    </span>name:<span class="w"> </span>fastgpt
<a id="__codelineno-21-86" name="__codelineno-21-86"></a><a href="#__codelineno-21-86"><span class="linenos" data-linenos="86 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-21-87" name="__codelineno-21-87"></a><a href="#__codelineno-21-87"><span class="linenos" data-linenos="87 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-21-88" name="__codelineno-21-88"></a><a href="#__codelineno-21-88"><span class="linenos" data-linenos="88 "></span></a><span class="w">      </span>config:
<a id="__codelineno-21-89" name="__codelineno-21-89"></a><a href="#__codelineno-21-89"><span class="linenos" data-linenos="89 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.199.0.0/16
</code></pre></div>
<h3 id="1版本_2">1.版本<a class="headerlink" href="#1版本_2" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3.3。</li>
</ul>
<h3 id="2pgpostgresql数据库服务">2.pg（PostgreSQL数据库）服务<a class="headerlink" href="#2pgpostgresql数据库服务" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>image</code>：指定要使用的 Docker 镜像。</p>
</li>
<li>
<p><code>container_name</code>：容器的名称。</p>
</li>
<li>
<p><code>restart</code>：总是重新启动容器。</p>
</li>
<li>
<p><code>ports</code>：将主机的 5432 端口映射到容器的 5432 端口。</p>
</li>
<li>
<p><code>networks</code>：连接到 <code>fastgpt</code> 网络。</p>
</li>
<li>
<p><code>environment</code>：环境变量设置。</p>
</li>
<li>
<p><code>POSTGRES_USER</code>：PostgreSQL 用户名。</p>
</li>
<li>
<p><code>POSTGRES_PASSWORD</code>：PostgreSQL 密码。</p>
</li>
<li>
<p><code>POSTGRES_DB</code>：数据库名称。</p>
</li>
<li>
<p><code>volumes:</code>数据卷。</p>
</li>
<li><code>./pg/data:/var/lib/postgresql/data</code>：将主机的 <code>./pg/data</code> 目录挂载到容器的 <code>/var/lib/postgresql/data</code> 目录。</li>
</ul>
<h3 id="3mongomongodb-数据库服务">3.mongo（MongoDB 数据库）服务<a class="headerlink" href="#3mongomongodb-数据库服务" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>image</code>：指定要使用的 Docker 镜像。</p>
</li>
<li>
<p><code>container_name</code>：容器的名称。</p>
</li>
<li>
<p><code>restart</code>：总是重新启动容器。</p>
</li>
<li>
<p><code>ports</code>：将主机的 27017 端口映射到容器的 27017 端口。</p>
</li>
<li>
<p><code>networks：连接到</code>fastgpt` 网络。</p>
</li>
<li>
<p><code>command: mongod --keyFile /data/mongodb.key --replSet rs0</code>：指定 MongoDB 启动命令，启用密钥文件和副本集。</p>
</li>
<li>
<p><code>environment</code>：环境变量设置。</p>
</li>
<li>
<p>`MONGO_INITDB_ROOT_USERNAME：MongoDB 用户名。</p>
</li>
<li>
<p><code>MONGO_INITDB_ROOT_PASSWORD</code>：MongoDB 密码。</p>
</li>
<li>
<p><code>volumes:</code>数据卷。</p>
</li>
<li>
<p><code>- ./mongo/data:/data/db</code>：将主机的 <code>./mongo/data</code> 目录挂载到容器的 <code>/data/db</code> 目录。</p>
</li>
<li>
<p><code>entrypoint</code>：启动时执行的命令。</p>
</li>
<li>
<p><code>bash -c</code>：使用 Bash 执行以下命令。</p>
</li>
<li>
<p><code>openssl rand -base64 128 &gt; /data/mongodb.key</code>：生成一个随机的密钥文件。</p>
</li>
<li>
<p><code>chmod 400 /data/mongodb.key</code>：设置密钥文件权限为 400。</p>
</li>
<li>
<p><code>chown 999:999 /data/mongodb.key</code>：更改密钥文件的所有者。</p>
</li>
<li>
<p><code>echo '...initReplicaSet.js'</code>：生成初始化副本集的 JavaScript 文件。</p>
</li>
<li>
<p><code>exec docker-entrypoint.sh "$$@" &amp;</code>：执行 Docker 入口点脚本并将其放在后台。</p>
</li>
<li>
<p><code>until mongo -u hongzelong -p dream13889 --authenticationDatabase admin --eval "print('waited for connection')"</code>：等待 MongoDB 启动完成。</p>
</li>
<li>
<p><code>mongo -u hongzelong -p dream13889 --authenticationDatabase admin /data/initReplicaSet.js</code>：运行初始化副本集的脚本。</p>
</li>
<li>
<p><code>wait $$!</code>：等待后台进程结束。</p>
</li>
</ul>
<h3 id="4fastgpt服务">4.fastgpt服务<a class="headerlink" href="#4fastgpt服务" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>`container_name：容器的名称。</p>
</li>
<li>
<p>`image：指定要使用的 Docker 镜像。</p>
</li>
<li>
<p>`ports：将主机的 9898 端口映射到容器的 3000 端口。</p>
</li>
<li>
<p><code>networks：连接到</code>fastgpt` 网络。</p>
</li>
<li>
<p><code>depends_on</code>：依赖于 <code>mongo</code> 和 <code>pg</code> 服务，确保它们先启动。</p>
</li>
<li>
<p>`restart：总是重新启动容器。</p>
</li>
<li>
<p><code>environment</code>：环境变量设置。</p>
</li>
<li>
<p>`DEFAULT_ROOT_PSW：默认根密码。</p>
</li>
<li>
<p><code>OPENAI_BASE_URL</code>：OpenAI 基础 URL。</p>
</li>
<li>
<p>`CHAT_API_KEY：聊天 API 密钥。</p>
</li>
<li>
<p><code>DB_MAX_LINK</code>：数据库最大连接数。</p>
</li>
<li>
<p>`TOKEN_KEY：令牌密钥。</p>
</li>
<li>
<p>`ROOT_KEY：根密钥。</p>
</li>
<li>
<p><code>FILE_TOKEN_KEY</code>：文件令牌密钥。</p>
</li>
<li>
<p><code>MONGODB_URI</code>：MongoDB URI。</p>
</li>
<li>
<p><code>PG_URL</code>：PostgreSQL URI。</p>
</li>
<li>
<p><code>volumes</code>：卷挂载。</p>
</li>
<li>
<p><code>./config.json:/app/data/config.json</code>：将主机的 <code>./config.json</code> 文件挂载到容器的 <code>/app/data/config.json</code> 文件。</p>
</li>
<li>
<p><code>./fastgpt/tmp:/app/tmp</code>：将主机的 <code>./fastgpt/tmp</code> 目录挂载到容器的 <code>/app/tmp</code> 目录。</p>
</li>
</ul>
<h3 id="5网络定义">5.网络定义<a class="headerlink" href="#5网络定义" title="Permanent link">&para;</a></h3>
<ul>
<li><code>fastgpt</code>：定义了一个名为 <code>fastgpt</code> 的自定义网络，供 <code>pg</code> 、<code>mongo</code>和 <code>fastgpt</code> 服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>fastgpt</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>fastgpt_fastgpt</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.199.0.0/16</code>。</li>
</ul>
<h2 id="八dify的yml参数说明">八、Dify的yml参数说明<a class="headerlink" href="#八dify的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><a href="#__codelineno-22-1"><span class="linenos" data-linenos="  1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3&#39;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><a href="#__codelineno-22-2"><span class="linenos" data-linenos="  2 "></span></a>services:
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><a href="#__codelineno-22-3"><span class="linenos" data-linenos="  3 "></span></a><span class="w">  </span>api:
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><a href="#__codelineno-22-4"><span class="linenos" data-linenos="  4 "></span></a><span class="w">    </span>image:<span class="w"> </span>langgenius/dify-api:0.6.9
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><a href="#__codelineno-22-5"><span class="linenos" data-linenos="  5 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><a href="#__codelineno-22-6"><span class="linenos" data-linenos="  6 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><a href="#__codelineno-22-7"><span class="linenos" data-linenos="  7 "></span></a><span class="w">      </span>MODE:<span class="w"> </span>api
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><a href="#__codelineno-22-8"><span class="linenos" data-linenos="  8 "></span></a><span class="w">      </span>LOG_LEVEL:<span class="w"> </span>INFO
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><a href="#__codelineno-22-9"><span class="linenos" data-linenos="  9 "></span></a><span class="w">      </span>SECRET_KEY:<span class="w"> </span>sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><a href="#__codelineno-22-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="w">      </span>CONSOLE_WEB_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><a href="#__codelineno-22-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="w">      </span>INIT_PASSWORD:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><a href="#__codelineno-22-12"><span class="linenos" data-linenos=" 12 "></span></a><span class="w">      </span>CONSOLE_API_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><a href="#__codelineno-22-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="w">      </span>SERVICE_API_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><a href="#__codelineno-22-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="w">      </span>APP_WEB_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><a href="#__codelineno-22-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="w">      </span>FILES_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><a href="#__codelineno-22-16"><span class="linenos" data-linenos=" 16 "></span></a><span class="w">      </span>FILES_ACCESS_TIMEOUT:<span class="w"> </span><span class="m">300</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><a href="#__codelineno-22-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="w">      </span>MIGRATION_ENABLED:<span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><a href="#__codelineno-22-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="w">      </span>DB_USERNAME:<span class="w"> </span>postgres
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><a href="#__codelineno-22-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="w">      </span>DB_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><a href="#__codelineno-22-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="w">      </span>DB_HOST:<span class="w"> </span>db
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><a href="#__codelineno-22-21"><span class="linenos" data-linenos=" 21 "></span></a><span class="w">      </span>DB_PORT:<span class="w"> </span><span class="m">5432</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a><a href="#__codelineno-22-22"><span class="linenos" data-linenos=" 22 "></span></a><span class="w">      </span>DB_DATABASE:<span class="w"> </span>dify
<a id="__codelineno-22-23" name="__codelineno-22-23"></a><a href="#__codelineno-22-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="w">      </span>REDIS_HOST:<span class="w"> </span>redis
<a id="__codelineno-22-24" name="__codelineno-22-24"></a><a href="#__codelineno-22-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="w">      </span>REDIS_PORT:<span class="w"> </span><span class="m">6379</span>
<a id="__codelineno-22-25" name="__codelineno-22-25"></a><a href="#__codelineno-22-25"><span class="linenos" data-linenos=" 25 "></span></a><span class="w">      </span>REDIS_USERNAME:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a><a href="#__codelineno-22-26"><span class="linenos" data-linenos=" 26 "></span></a><span class="w">      </span>REDIS_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-27" name="__codelineno-22-27"></a><a href="#__codelineno-22-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="w">      </span>REDIS_USE_SSL:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a><a href="#__codelineno-22-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="w">      </span>REDIS_DB:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a><a href="#__codelineno-22-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="w">      </span>CELERY_BROKER_URL:<span class="w"> </span>redis://:difyai123456@redis:6379/1
<a id="__codelineno-22-30" name="__codelineno-22-30"></a><a href="#__codelineno-22-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="w">      </span>WEB_API_CORS_ALLOW_ORIGINS:<span class="w"> </span><span class="s1">&#39;*&#39;</span>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a><a href="#__codelineno-22-31"><span class="linenos" data-linenos=" 31 "></span></a><span class="w">      </span>CONSOLE_CORS_ALLOW_ORIGINS:<span class="w"> </span><span class="s1">&#39;*&#39;</span>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a><a href="#__codelineno-22-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="w">      </span>STORAGE_TYPE:<span class="w"> </span><span class="nb">local</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a><a href="#__codelineno-22-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="w">      </span>STORAGE_LOCAL_PATH:<span class="w"> </span>storage
<a id="__codelineno-22-34" name="__codelineno-22-34"></a><a href="#__codelineno-22-34"><span class="linenos" data-linenos=" 34 "></span></a><span class="w">      </span>S3_ENDPOINT:<span class="w"> </span><span class="s1">&#39;https://xxx.r2.cloudflarestorage.com&#39;</span>
<a id="__codelineno-22-35" name="__codelineno-22-35"></a><a href="#__codelineno-22-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="w">      </span>S3_BUCKET_NAME:<span class="w"> </span><span class="s1">&#39;difyai&#39;</span>
<a id="__codelineno-22-36" name="__codelineno-22-36"></a><a href="#__codelineno-22-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="w">      </span>S3_ACCESS_KEY:<span class="w"> </span><span class="s1">&#39;ak-difyai&#39;</span>
<a id="__codelineno-22-37" name="__codelineno-22-37"></a><a href="#__codelineno-22-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="w">      </span>S3_SECRET_KEY:<span class="w"> </span><span class="s1">&#39;sk-difyai&#39;</span>
<a id="__codelineno-22-38" name="__codelineno-22-38"></a><a href="#__codelineno-22-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="w">      </span>S3_REGION:<span class="w"> </span><span class="s1">&#39;us-east-1&#39;</span>
<a id="__codelineno-22-39" name="__codelineno-22-39"></a><a href="#__codelineno-22-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="w">      </span>AZURE_BLOB_ACCOUNT_NAME:<span class="w"> </span><span class="s1">&#39;difyai&#39;</span>
<a id="__codelineno-22-40" name="__codelineno-22-40"></a><a href="#__codelineno-22-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="w">      </span>AZURE_BLOB_ACCOUNT_KEY:<span class="w"> </span><span class="s1">&#39;difyai&#39;</span>
<a id="__codelineno-22-41" name="__codelineno-22-41"></a><a href="#__codelineno-22-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="w">      </span>AZURE_BLOB_CONTAINER_NAME:<span class="w"> </span><span class="s1">&#39;difyai-container&#39;</span>
<a id="__codelineno-22-42" name="__codelineno-22-42"></a><a href="#__codelineno-22-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="w">      </span>AZURE_BLOB_ACCOUNT_URL:<span class="w"> </span><span class="s1">&#39;https://&lt;your_account_name&gt;.blob.core.windows.net&#39;</span>
<a id="__codelineno-22-43" name="__codelineno-22-43"></a><a href="#__codelineno-22-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="w">      </span>GOOGLE_STORAGE_BUCKET_NAME:<span class="w"> </span><span class="s1">&#39;yout-bucket-name&#39;</span>
<a id="__codelineno-22-44" name="__codelineno-22-44"></a><a href="#__codelineno-22-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="w">      </span>GOOGLE_STORAGE_SERVICE_ACCOUNT_JSON_BASE64:<span class="w"> </span><span class="s1">&#39;your-google-service-account-json-base64-string&#39;</span>
<a id="__codelineno-22-45" name="__codelineno-22-45"></a><a href="#__codelineno-22-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="w">      </span>VECTOR_STORE:<span class="w"> </span>weaviate
<a id="__codelineno-22-46" name="__codelineno-22-46"></a><a href="#__codelineno-22-46"><span class="linenos" data-linenos=" 46 "></span></a><span class="w">      </span>WEAVIATE_ENDPOINT:<span class="w"> </span>http://weaviate:8080
<a id="__codelineno-22-47" name="__codelineno-22-47"></a><a href="#__codelineno-22-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="w">      </span>WEAVIATE_API_KEY:<span class="w"> </span>WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih
<a id="__codelineno-22-48" name="__codelineno-22-48"></a><a href="#__codelineno-22-48"><span class="linenos" data-linenos=" 48 "></span></a><span class="w">      </span>QDRANT_URL:<span class="w"> </span>http://qdrant:6333
<a id="__codelineno-22-49" name="__codelineno-22-49"></a><a href="#__codelineno-22-49"><span class="linenos" data-linenos=" 49 "></span></a><span class="w">      </span>QDRANT_API_KEY:<span class="w"> </span>difyai123456
<a id="__codelineno-22-50" name="__codelineno-22-50"></a><a href="#__codelineno-22-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="w">      </span>QDRANT_CLIENT_TIMEOUT:<span class="w"> </span><span class="m">20</span>
<a id="__codelineno-22-51" name="__codelineno-22-51"></a><a href="#__codelineno-22-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="w">      </span>QDRANT_GRPC_ENABLED:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-52" name="__codelineno-22-52"></a><a href="#__codelineno-22-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="w">      </span>QDRANT_GRPC_PORT:<span class="w"> </span><span class="m">6334</span>
<a id="__codelineno-22-53" name="__codelineno-22-53"></a><a href="#__codelineno-22-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="w">      </span>MILVUS_HOST:<span class="w"> </span><span class="m">127</span>.0.0.1
<a id="__codelineno-22-54" name="__codelineno-22-54"></a><a href="#__codelineno-22-54"><span class="linenos" data-linenos=" 54 "></span></a><span class="w">      </span>MILVUS_PORT:<span class="w"> </span><span class="m">19530</span>
<a id="__codelineno-22-55" name="__codelineno-22-55"></a><a href="#__codelineno-22-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="w">      </span>MILVUS_USER:<span class="w"> </span>root
<a id="__codelineno-22-56" name="__codelineno-22-56"></a><a href="#__codelineno-22-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="w">      </span>MILVUS_PASSWORD:<span class="w"> </span>Milvus
<a id="__codelineno-22-57" name="__codelineno-22-57"></a><a href="#__codelineno-22-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="w">      </span>MILVUS_SECURE:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-58" name="__codelineno-22-58"></a><a href="#__codelineno-22-58"><span class="linenos" data-linenos=" 58 "></span></a><span class="w">      </span>RELYT_HOST:<span class="w"> </span>db
<a id="__codelineno-22-59" name="__codelineno-22-59"></a><a href="#__codelineno-22-59"><span class="linenos" data-linenos=" 59 "></span></a><span class="w">      </span>RELYT_PORT:<span class="w"> </span><span class="m">5432</span>
<a id="__codelineno-22-60" name="__codelineno-22-60"></a><a href="#__codelineno-22-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="w">      </span>RELYT_USER:<span class="w"> </span>postgres
<a id="__codelineno-22-61" name="__codelineno-22-61"></a><a href="#__codelineno-22-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="w">      </span>RELYT_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-62" name="__codelineno-22-62"></a><a href="#__codelineno-22-62"><span class="linenos" data-linenos=" 62 "></span></a><span class="w">      </span>RELYT_DATABASE:<span class="w"> </span>postgres
<a id="__codelineno-22-63" name="__codelineno-22-63"></a><a href="#__codelineno-22-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="w">      </span>PGVECTOR_HOST:<span class="w"> </span>pgvector
<a id="__codelineno-22-64" name="__codelineno-22-64"></a><a href="#__codelineno-22-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="w">      </span>PGVECTOR_PORT:<span class="w"> </span><span class="m">5432</span>
<a id="__codelineno-22-65" name="__codelineno-22-65"></a><a href="#__codelineno-22-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="w">      </span>PGVECTOR_USER:<span class="w"> </span>postgres
<a id="__codelineno-22-66" name="__codelineno-22-66"></a><a href="#__codelineno-22-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="w">      </span>PGVECTOR_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-67" name="__codelineno-22-67"></a><a href="#__codelineno-22-67"><span class="linenos" data-linenos=" 67 "></span></a><span class="w">      </span>PGVECTOR_DATABASE:<span class="w"> </span>dify
<a id="__codelineno-22-68" name="__codelineno-22-68"></a><a href="#__codelineno-22-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="w">      </span>MAIL_TYPE:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-69" name="__codelineno-22-69"></a><a href="#__codelineno-22-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="w">      </span>MAIL_DEFAULT_SEND_FROM:<span class="w"> </span><span class="s1">&#39;YOUR EMAIL FROM (eg: no-reply &lt;no-reply@dify.ai&gt;)&#39;</span>
<a id="__codelineno-22-70" name="__codelineno-22-70"></a><a href="#__codelineno-22-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="w">      </span>SMTP_SERVER:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-71" name="__codelineno-22-71"></a><a href="#__codelineno-22-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="w">      </span>SMTP_PORT:<span class="w"> </span><span class="m">465</span>
<a id="__codelineno-22-72" name="__codelineno-22-72"></a><a href="#__codelineno-22-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="w">      </span>SMTP_USERNAME:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-73" name="__codelineno-22-73"></a><a href="#__codelineno-22-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="w">      </span>SMTP_PASSWORD:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-74" name="__codelineno-22-74"></a><a href="#__codelineno-22-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="w">      </span>SMTP_USE_TLS:<span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-22-75" name="__codelineno-22-75"></a><a href="#__codelineno-22-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="w">      </span>SMTP_OPPORTUNISTIC_TLS:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-76" name="__codelineno-22-76"></a><a href="#__codelineno-22-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="w">      </span>RESEND_API_KEY:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-77" name="__codelineno-22-77"></a><a href="#__codelineno-22-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="w">      </span>RESEND_API_URL:<span class="w"> </span>https://api.resend.com
<a id="__codelineno-22-78" name="__codelineno-22-78"></a><a href="#__codelineno-22-78"><span class="linenos" data-linenos=" 78 "></span></a><span class="w">      </span>SENTRY_DSN:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-79" name="__codelineno-22-79"></a><a href="#__codelineno-22-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="w">      </span>SENTRY_TRACES_SAMPLE_RATE:<span class="w"> </span><span class="m">1</span>.0
<a id="__codelineno-22-80" name="__codelineno-22-80"></a><a href="#__codelineno-22-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="w">      </span>SENTRY_PROFILES_SAMPLE_RATE:<span class="w"> </span><span class="m">1</span>.0
<a id="__codelineno-22-81" name="__codelineno-22-81"></a><a href="#__codelineno-22-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="w">      </span>NOTION_INTEGRATION_TYPE:<span class="w"> </span>public
<a id="__codelineno-22-82" name="__codelineno-22-82"></a><a href="#__codelineno-22-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="w">      </span>NOTION_CLIENT_SECRET:<span class="w"> </span>you-client-secret
<a id="__codelineno-22-83" name="__codelineno-22-83"></a><a href="#__codelineno-22-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="w">      </span>NOTION_CLIENT_ID:<span class="w"> </span>you-client-id
<a id="__codelineno-22-84" name="__codelineno-22-84"></a><a href="#__codelineno-22-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="w">      </span>NOTION_INTERNAL_SECRET:<span class="w"> </span>you-internal-secret
<a id="__codelineno-22-85" name="__codelineno-22-85"></a><a href="#__codelineno-22-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="w">      </span>CODE_EXECUTION_ENDPOINT:<span class="w"> </span><span class="s2">&quot;http://sandbox:8194&quot;</span>
<a id="__codelineno-22-86" name="__codelineno-22-86"></a><a href="#__codelineno-22-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="w">      </span>CODE_EXECUTION_API_KEY:<span class="w"> </span>dify-sandbox
<a id="__codelineno-22-87" name="__codelineno-22-87"></a><a href="#__codelineno-22-87"><span class="linenos" data-linenos=" 87 "></span></a><span class="w">      </span>CODE_MAX_NUMBER:<span class="w"> </span><span class="m">9223372036854775807</span>
<a id="__codelineno-22-88" name="__codelineno-22-88"></a><a href="#__codelineno-22-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="w">      </span>CODE_MIN_NUMBER:<span class="w"> </span>-9223372036854775808
<a id="__codelineno-22-89" name="__codelineno-22-89"></a><a href="#__codelineno-22-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="w">      </span>CODE_MAX_STRING_LENGTH:<span class="w"> </span><span class="m">80000</span>
<a id="__codelineno-22-90" name="__codelineno-22-90"></a><a href="#__codelineno-22-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="w">      </span>TEMPLATE_TRANSFORM_MAX_LENGTH:<span class="w"> </span><span class="m">80000</span>
<a id="__codelineno-22-91" name="__codelineno-22-91"></a><a href="#__codelineno-22-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="w">      </span>CODE_MAX_STRING_ARRAY_LENGTH:<span class="w"> </span><span class="m">30</span>
<a id="__codelineno-22-92" name="__codelineno-22-92"></a><a href="#__codelineno-22-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="w">      </span>CODE_MAX_OBJECT_ARRAY_LENGTH:<span class="w"> </span><span class="m">30</span>
<a id="__codelineno-22-93" name="__codelineno-22-93"></a><a href="#__codelineno-22-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="w">      </span>CODE_MAX_NUMBER_ARRAY_LENGTH:<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-22-94" name="__codelineno-22-94"></a><a href="#__codelineno-22-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="w">      </span>SSRF_PROXY_HTTP_URL:<span class="w"> </span><span class="s1">&#39;http://ssrf_proxy:3128&#39;</span>
<a id="__codelineno-22-95" name="__codelineno-22-95"></a><a href="#__codelineno-22-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="w">      </span>SSRF_PROXY_HTTPS_URL:<span class="w"> </span><span class="s1">&#39;http://ssrf_proxy:3128&#39;</span>
<a id="__codelineno-22-96" name="__codelineno-22-96"></a><a href="#__codelineno-22-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="w">      </span>INDEXING_MAX_SEGMENTATION_TOKENS_LENGTH:<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-22-97" name="__codelineno-22-97"></a><a href="#__codelineno-22-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-22-98" name="__codelineno-22-98"></a><a href="#__codelineno-22-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="w">      </span>-<span class="w"> </span>db
<a id="__codelineno-22-99" name="__codelineno-22-99"></a><a href="#__codelineno-22-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="w">      </span>-<span class="w"> </span>redis
<a id="__codelineno-22-100" name="__codelineno-22-100"></a><a href="#__codelineno-22-100"><span class="linenos" data-linenos="100 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-101" name="__codelineno-22-101"></a><a href="#__codelineno-22-101"><span class="linenos" data-linenos="101 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/app/storage:/app/api/storage
<a id="__codelineno-22-102" name="__codelineno-22-102"></a><a href="#__codelineno-22-102"><span class="linenos" data-linenos="102 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-103" name="__codelineno-22-103"></a><a href="#__codelineno-22-103"><span class="linenos" data-linenos="103 "></span></a><span class="w">      </span>dify_ssrf_proxy_network:
<a id="__codelineno-22-104" name="__codelineno-22-104"></a><a href="#__codelineno-22-104"><span class="linenos" data-linenos="104 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.0.2
<a id="__codelineno-22-105" name="__codelineno-22-105"></a><a href="#__codelineno-22-105"><span class="linenos" data-linenos="105 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-106" name="__codelineno-22-106"></a><a href="#__codelineno-22-106"><span class="linenos" data-linenos="106 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.2
<a id="__codelineno-22-107" name="__codelineno-22-107"></a><a href="#__codelineno-22-107"><span class="linenos" data-linenos="107 "></span></a>
<a id="__codelineno-22-108" name="__codelineno-22-108"></a><a href="#__codelineno-22-108"><span class="linenos" data-linenos="108 "></span></a><span class="w">  </span>worker:
<a id="__codelineno-22-109" name="__codelineno-22-109"></a><a href="#__codelineno-22-109"><span class="linenos" data-linenos="109 "></span></a><span class="w">    </span>image:<span class="w"> </span>langgenius/dify-api:0.6.9
<a id="__codelineno-22-110" name="__codelineno-22-110"></a><a href="#__codelineno-22-110"><span class="linenos" data-linenos="110 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-111" name="__codelineno-22-111"></a><a href="#__codelineno-22-111"><span class="linenos" data-linenos="111 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-22-112" name="__codelineno-22-112"></a><a href="#__codelineno-22-112"><span class="linenos" data-linenos="112 "></span></a><span class="w">      </span>CONSOLE_WEB_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-113" name="__codelineno-22-113"></a><a href="#__codelineno-22-113"><span class="linenos" data-linenos="113 "></span></a><span class="w">      </span>MODE:<span class="w"> </span>worker
<a id="__codelineno-22-114" name="__codelineno-22-114"></a><a href="#__codelineno-22-114"><span class="linenos" data-linenos="114 "></span></a><span class="w">      </span>LOG_LEVEL:<span class="w"> </span>INFO
<a id="__codelineno-22-115" name="__codelineno-22-115"></a><a href="#__codelineno-22-115"><span class="linenos" data-linenos="115 "></span></a><span class="w">      </span>SECRET_KEY:<span class="w"> </span>sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U
<a id="__codelineno-22-116" name="__codelineno-22-116"></a><a href="#__codelineno-22-116"><span class="linenos" data-linenos="116 "></span></a><span class="w">      </span>DB_USERNAME:<span class="w"> </span>postgres
<a id="__codelineno-22-117" name="__codelineno-22-117"></a><a href="#__codelineno-22-117"><span class="linenos" data-linenos="117 "></span></a><span class="w">      </span>DB_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-118" name="__codelineno-22-118"></a><a href="#__codelineno-22-118"><span class="linenos" data-linenos="118 "></span></a><span class="w">      </span>DB_HOST:<span class="w"> </span>db
<a id="__codelineno-22-119" name="__codelineno-22-119"></a><a href="#__codelineno-22-119"><span class="linenos" data-linenos="119 "></span></a><span class="w">      </span>DB_PORT:<span class="w"> </span><span class="m">5432</span>
<a id="__codelineno-22-120" name="__codelineno-22-120"></a><a href="#__codelineno-22-120"><span class="linenos" data-linenos="120 "></span></a><span class="w">      </span>DB_DATABASE:<span class="w"> </span>dify
<a id="__codelineno-22-121" name="__codelineno-22-121"></a><a href="#__codelineno-22-121"><span class="linenos" data-linenos="121 "></span></a><span class="w">      </span>REDIS_HOST:<span class="w"> </span>redis
<a id="__codelineno-22-122" name="__codelineno-22-122"></a><a href="#__codelineno-22-122"><span class="linenos" data-linenos="122 "></span></a><span class="w">      </span>REDIS_PORT:<span class="w"> </span><span class="m">6379</span>
<a id="__codelineno-22-123" name="__codelineno-22-123"></a><a href="#__codelineno-22-123"><span class="linenos" data-linenos="123 "></span></a><span class="w">      </span>REDIS_USERNAME:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-124" name="__codelineno-22-124"></a><a href="#__codelineno-22-124"><span class="linenos" data-linenos="124 "></span></a><span class="w">      </span>REDIS_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-125" name="__codelineno-22-125"></a><a href="#__codelineno-22-125"><span class="linenos" data-linenos="125 "></span></a><span class="w">      </span>REDIS_DB:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-22-126" name="__codelineno-22-126"></a><a href="#__codelineno-22-126"><span class="linenos" data-linenos="126 "></span></a><span class="w">      </span>REDIS_USE_SSL:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-127" name="__codelineno-22-127"></a><a href="#__codelineno-22-127"><span class="linenos" data-linenos="127 "></span></a><span class="w">      </span>CELERY_BROKER_URL:<span class="w"> </span>redis://:difyai123456@redis:6379/1
<a id="__codelineno-22-128" name="__codelineno-22-128"></a><a href="#__codelineno-22-128"><span class="linenos" data-linenos="128 "></span></a><span class="w">      </span>STORAGE_TYPE:<span class="w"> </span><span class="nb">local</span>
<a id="__codelineno-22-129" name="__codelineno-22-129"></a><a href="#__codelineno-22-129"><span class="linenos" data-linenos="129 "></span></a><span class="w">      </span>STORAGE_LOCAL_PATH:<span class="w"> </span>storage
<a id="__codelineno-22-130" name="__codelineno-22-130"></a><a href="#__codelineno-22-130"><span class="linenos" data-linenos="130 "></span></a><span class="w">      </span>S3_ENDPOINT:<span class="w"> </span><span class="s1">&#39;https://xxx.r2.cloudflarestorage.com&#39;</span>
<a id="__codelineno-22-131" name="__codelineno-22-131"></a><a href="#__codelineno-22-131"><span class="linenos" data-linenos="131 "></span></a><span class="w">      </span>S3_BUCKET_NAME:<span class="w"> </span><span class="s1">&#39;difyai&#39;</span>
<a id="__codelineno-22-132" name="__codelineno-22-132"></a><a href="#__codelineno-22-132"><span class="linenos" data-linenos="132 "></span></a><span class="w">      </span>S3_ACCESS_KEY:<span class="w"> </span><span class="s1">&#39;ak-difyai&#39;</span>
<a id="__codelineno-22-133" name="__codelineno-22-133"></a><a href="#__codelineno-22-133"><span class="linenos" data-linenos="133 "></span></a><span class="w">      </span>S3_SECRET_KEY:<span class="w"> </span><span class="s1">&#39;sk-difyai&#39;</span>
<a id="__codelineno-22-134" name="__codelineno-22-134"></a><a href="#__codelineno-22-134"><span class="linenos" data-linenos="134 "></span></a><span class="w">      </span>S3_REGION:<span class="w"> </span><span class="s1">&#39;us-east-1&#39;</span>
<a id="__codelineno-22-135" name="__codelineno-22-135"></a><a href="#__codelineno-22-135"><span class="linenos" data-linenos="135 "></span></a><span class="w">      </span>AZURE_BLOB_ACCOUNT_NAME:<span class="w"> </span><span class="s1">&#39;difyai&#39;</span>
<a id="__codelineno-22-136" name="__codelineno-22-136"></a><a href="#__codelineno-22-136"><span class="linenos" data-linenos="136 "></span></a><span class="w">      </span>AZURE_BLOB_ACCOUNT_KEY:<span class="w"> </span><span class="s1">&#39;difyai&#39;</span>
<a id="__codelineno-22-137" name="__codelineno-22-137"></a><a href="#__codelineno-22-137"><span class="linenos" data-linenos="137 "></span></a><span class="w">      </span>AZURE_BLOB_CONTAINER_NAME:<span class="w"> </span><span class="s1">&#39;difyai-container&#39;</span>
<a id="__codelineno-22-138" name="__codelineno-22-138"></a><a href="#__codelineno-22-138"><span class="linenos" data-linenos="138 "></span></a><span class="w">      </span>AZURE_BLOB_ACCOUNT_URL:<span class="w"> </span><span class="s1">&#39;https://&lt;your_account_name&gt;.blob.core.windows.net&#39;</span>
<a id="__codelineno-22-139" name="__codelineno-22-139"></a><a href="#__codelineno-22-139"><span class="linenos" data-linenos="139 "></span></a><span class="w">      </span>GOOGLE_STORAGE_BUCKET_NAME:<span class="w"> </span><span class="s1">&#39;yout-bucket-name&#39;</span>
<a id="__codelineno-22-140" name="__codelineno-22-140"></a><a href="#__codelineno-22-140"><span class="linenos" data-linenos="140 "></span></a><span class="w">      </span>GOOGLE_STORAGE_SERVICE_ACCOUNT_JSON_BASE64:<span class="w"> </span><span class="s1">&#39;your-google-service-account-json-base64-string&#39;</span>
<a id="__codelineno-22-141" name="__codelineno-22-141"></a><a href="#__codelineno-22-141"><span class="linenos" data-linenos="141 "></span></a><span class="w">      </span>VECTOR_STORE:<span class="w"> </span>weaviate
<a id="__codelineno-22-142" name="__codelineno-22-142"></a><a href="#__codelineno-22-142"><span class="linenos" data-linenos="142 "></span></a><span class="w">      </span>WEAVIATE_ENDPOINT:<span class="w"> </span>http://weaviate:8080
<a id="__codelineno-22-143" name="__codelineno-22-143"></a><a href="#__codelineno-22-143"><span class="linenos" data-linenos="143 "></span></a><span class="w">      </span>WEAVIATE_API_KEY:<span class="w"> </span>WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih
<a id="__codelineno-22-144" name="__codelineno-22-144"></a><a href="#__codelineno-22-144"><span class="linenos" data-linenos="144 "></span></a><span class="w">      </span>QDRANT_URL:<span class="w"> </span>http://qdrant:6333
<a id="__codelineno-22-145" name="__codelineno-22-145"></a><a href="#__codelineno-22-145"><span class="linenos" data-linenos="145 "></span></a><span class="w">      </span>QDRANT_API_KEY:<span class="w"> </span>difyai123456
<a id="__codelineno-22-146" name="__codelineno-22-146"></a><a href="#__codelineno-22-146"><span class="linenos" data-linenos="146 "></span></a><span class="w">      </span>QDRANT_CLIENT_TIMEOUT:<span class="w"> </span><span class="m">20</span>
<a id="__codelineno-22-147" name="__codelineno-22-147"></a><a href="#__codelineno-22-147"><span class="linenos" data-linenos="147 "></span></a><span class="w">      </span>QDRANT_GRPC_ENABLED:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-148" name="__codelineno-22-148"></a><a href="#__codelineno-22-148"><span class="linenos" data-linenos="148 "></span></a><span class="w">      </span>QDRANT_GRPC_PORT:<span class="w"> </span><span class="m">6334</span>
<a id="__codelineno-22-149" name="__codelineno-22-149"></a><a href="#__codelineno-22-149"><span class="linenos" data-linenos="149 "></span></a><span class="w">      </span>MILVUS_HOST:<span class="w"> </span><span class="m">127</span>.0.0.1
<a id="__codelineno-22-150" name="__codelineno-22-150"></a><a href="#__codelineno-22-150"><span class="linenos" data-linenos="150 "></span></a><span class="w">      </span>MILVUS_PORT:<span class="w"> </span><span class="m">19530</span>
<a id="__codelineno-22-151" name="__codelineno-22-151"></a><a href="#__codelineno-22-151"><span class="linenos" data-linenos="151 "></span></a><span class="w">      </span>MILVUS_USER:<span class="w"> </span>root
<a id="__codelineno-22-152" name="__codelineno-22-152"></a><a href="#__codelineno-22-152"><span class="linenos" data-linenos="152 "></span></a><span class="w">      </span>MILVUS_PASSWORD:<span class="w"> </span>Milvus
<a id="__codelineno-22-153" name="__codelineno-22-153"></a><a href="#__codelineno-22-153"><span class="linenos" data-linenos="153 "></span></a><span class="w">      </span>MILVUS_SECURE:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-154" name="__codelineno-22-154"></a><a href="#__codelineno-22-154"><span class="linenos" data-linenos="154 "></span></a><span class="w">      </span>MAIL_TYPE:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-155" name="__codelineno-22-155"></a><a href="#__codelineno-22-155"><span class="linenos" data-linenos="155 "></span></a><span class="w">      </span>MAIL_DEFAULT_SEND_FROM:<span class="w"> </span><span class="s1">&#39;YOUR EMAIL FROM (eg: no-reply &lt;no-reply@dify.ai&gt;)&#39;</span>
<a id="__codelineno-22-156" name="__codelineno-22-156"></a><a href="#__codelineno-22-156"><span class="linenos" data-linenos="156 "></span></a><span class="w">      </span>SMTP_SERVER:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-157" name="__codelineno-22-157"></a><a href="#__codelineno-22-157"><span class="linenos" data-linenos="157 "></span></a><span class="w">      </span>SMTP_PORT:<span class="w"> </span><span class="m">465</span>
<a id="__codelineno-22-158" name="__codelineno-22-158"></a><a href="#__codelineno-22-158"><span class="linenos" data-linenos="158 "></span></a><span class="w">      </span>SMTP_USERNAME:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-159" name="__codelineno-22-159"></a><a href="#__codelineno-22-159"><span class="linenos" data-linenos="159 "></span></a><span class="w">      </span>SMTP_PASSWORD:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-160" name="__codelineno-22-160"></a><a href="#__codelineno-22-160"><span class="linenos" data-linenos="160 "></span></a><span class="w">      </span>SMTP_USE_TLS:<span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-22-161" name="__codelineno-22-161"></a><a href="#__codelineno-22-161"><span class="linenos" data-linenos="161 "></span></a><span class="w">      </span>SMTP_OPPORTUNISTIC_TLS:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-162" name="__codelineno-22-162"></a><a href="#__codelineno-22-162"><span class="linenos" data-linenos="162 "></span></a><span class="w">      </span>RESEND_API_KEY:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-163" name="__codelineno-22-163"></a><a href="#__codelineno-22-163"><span class="linenos" data-linenos="163 "></span></a><span class="w">      </span>RESEND_API_URL:<span class="w"> </span>https://api.resend.com
<a id="__codelineno-22-164" name="__codelineno-22-164"></a><a href="#__codelineno-22-164"><span class="linenos" data-linenos="164 "></span></a><span class="w">      </span>RELYT_HOST:<span class="w"> </span>db
<a id="__codelineno-22-165" name="__codelineno-22-165"></a><a href="#__codelineno-22-165"><span class="linenos" data-linenos="165 "></span></a><span class="w">      </span>RELYT_PORT:<span class="w"> </span><span class="m">5432</span>
<a id="__codelineno-22-166" name="__codelineno-22-166"></a><a href="#__codelineno-22-166"><span class="linenos" data-linenos="166 "></span></a><span class="w">      </span>RELYT_USER:<span class="w"> </span>postgres
<a id="__codelineno-22-167" name="__codelineno-22-167"></a><a href="#__codelineno-22-167"><span class="linenos" data-linenos="167 "></span></a><span class="w">      </span>RELYT_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-168" name="__codelineno-22-168"></a><a href="#__codelineno-22-168"><span class="linenos" data-linenos="168 "></span></a><span class="w">      </span>RELYT_DATABASE:<span class="w"> </span>postgres
<a id="__codelineno-22-169" name="__codelineno-22-169"></a><a href="#__codelineno-22-169"><span class="linenos" data-linenos="169 "></span></a><span class="w">      </span>PGVECTOR_HOST:<span class="w"> </span>pgvector
<a id="__codelineno-22-170" name="__codelineno-22-170"></a><a href="#__codelineno-22-170"><span class="linenos" data-linenos="170 "></span></a><span class="w">      </span>PGVECTOR_PORT:<span class="w"> </span><span class="m">5432</span>
<a id="__codelineno-22-171" name="__codelineno-22-171"></a><a href="#__codelineno-22-171"><span class="linenos" data-linenos="171 "></span></a><span class="w">      </span>PGVECTOR_USER:<span class="w"> </span>postgres
<a id="__codelineno-22-172" name="__codelineno-22-172"></a><a href="#__codelineno-22-172"><span class="linenos" data-linenos="172 "></span></a><span class="w">      </span>PGVECTOR_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-173" name="__codelineno-22-173"></a><a href="#__codelineno-22-173"><span class="linenos" data-linenos="173 "></span></a><span class="w">      </span>PGVECTOR_DATABASE:<span class="w"> </span>dify
<a id="__codelineno-22-174" name="__codelineno-22-174"></a><a href="#__codelineno-22-174"><span class="linenos" data-linenos="174 "></span></a><span class="w">      </span>NOTION_INTEGRATION_TYPE:<span class="w"> </span>public
<a id="__codelineno-22-175" name="__codelineno-22-175"></a><a href="#__codelineno-22-175"><span class="linenos" data-linenos="175 "></span></a><span class="w">      </span>NOTION_CLIENT_SECRET:<span class="w"> </span>you-client-secret
<a id="__codelineno-22-176" name="__codelineno-22-176"></a><a href="#__codelineno-22-176"><span class="linenos" data-linenos="176 "></span></a><span class="w">      </span>NOTION_CLIENT_ID:<span class="w"> </span>you-client-id
<a id="__codelineno-22-177" name="__codelineno-22-177"></a><a href="#__codelineno-22-177"><span class="linenos" data-linenos="177 "></span></a><span class="w">      </span>NOTION_INTERNAL_SECRET:<span class="w"> </span>you-internal-secret
<a id="__codelineno-22-178" name="__codelineno-22-178"></a><a href="#__codelineno-22-178"><span class="linenos" data-linenos="178 "></span></a><span class="w">      </span>INDEXING_MAX_SEGMENTATION_TOKENS_LENGTH:<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-22-179" name="__codelineno-22-179"></a><a href="#__codelineno-22-179"><span class="linenos" data-linenos="179 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-22-180" name="__codelineno-22-180"></a><a href="#__codelineno-22-180"><span class="linenos" data-linenos="180 "></span></a><span class="w">      </span>-<span class="w"> </span>db
<a id="__codelineno-22-181" name="__codelineno-22-181"></a><a href="#__codelineno-22-181"><span class="linenos" data-linenos="181 "></span></a><span class="w">      </span>-<span class="w"> </span>redis
<a id="__codelineno-22-182" name="__codelineno-22-182"></a><a href="#__codelineno-22-182"><span class="linenos" data-linenos="182 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-183" name="__codelineno-22-183"></a><a href="#__codelineno-22-183"><span class="linenos" data-linenos="183 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/app/storage:/app/api/storage
<a id="__codelineno-22-184" name="__codelineno-22-184"></a><a href="#__codelineno-22-184"><span class="linenos" data-linenos="184 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-185" name="__codelineno-22-185"></a><a href="#__codelineno-22-185"><span class="linenos" data-linenos="185 "></span></a><span class="w">      </span>dify_ssrf_proxy_network:
<a id="__codelineno-22-186" name="__codelineno-22-186"></a><a href="#__codelineno-22-186"><span class="linenos" data-linenos="186 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.0.3
<a id="__codelineno-22-187" name="__codelineno-22-187"></a><a href="#__codelineno-22-187"><span class="linenos" data-linenos="187 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-188" name="__codelineno-22-188"></a><a href="#__codelineno-22-188"><span class="linenos" data-linenos="188 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.3
<a id="__codelineno-22-189" name="__codelineno-22-189"></a><a href="#__codelineno-22-189"><span class="linenos" data-linenos="189 "></span></a>
<a id="__codelineno-22-190" name="__codelineno-22-190"></a><a href="#__codelineno-22-190"><span class="linenos" data-linenos="190 "></span></a><span class="w">  </span>web:
<a id="__codelineno-22-191" name="__codelineno-22-191"></a><a href="#__codelineno-22-191"><span class="linenos" data-linenos="191 "></span></a><span class="w">    </span>image:<span class="w"> </span>langgenius/dify-web:0.6.9
<a id="__codelineno-22-192" name="__codelineno-22-192"></a><a href="#__codelineno-22-192"><span class="linenos" data-linenos="192 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-193" name="__codelineno-22-193"></a><a href="#__codelineno-22-193"><span class="linenos" data-linenos="193 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-22-194" name="__codelineno-22-194"></a><a href="#__codelineno-22-194"><span class="linenos" data-linenos="194 "></span></a><span class="w">      </span>CONSOLE_API_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-195" name="__codelineno-22-195"></a><a href="#__codelineno-22-195"><span class="linenos" data-linenos="195 "></span></a><span class="w">      </span>APP_API_URL:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-196" name="__codelineno-22-196"></a><a href="#__codelineno-22-196"><span class="linenos" data-linenos="196 "></span></a><span class="w">      </span>SENTRY_DSN:<span class="w"> </span><span class="s1">&#39;&#39;</span>
<a id="__codelineno-22-197" name="__codelineno-22-197"></a><a href="#__codelineno-22-197"><span class="linenos" data-linenos="197 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-198" name="__codelineno-22-198"></a><a href="#__codelineno-22-198"><span class="linenos" data-linenos="198 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-199" name="__codelineno-22-199"></a><a href="#__codelineno-22-199"><span class="linenos" data-linenos="199 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.4
<a id="__codelineno-22-200" name="__codelineno-22-200"></a><a href="#__codelineno-22-200"><span class="linenos" data-linenos="200 "></span></a>
<a id="__codelineno-22-201" name="__codelineno-22-201"></a><a href="#__codelineno-22-201"><span class="linenos" data-linenos="201 "></span></a><span class="w">  </span>db:
<a id="__codelineno-22-202" name="__codelineno-22-202"></a><a href="#__codelineno-22-202"><span class="linenos" data-linenos="202 "></span></a><span class="w">    </span>image:<span class="w"> </span>postgres:15-alpine
<a id="__codelineno-22-203" name="__codelineno-22-203"></a><a href="#__codelineno-22-203"><span class="linenos" data-linenos="203 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-204" name="__codelineno-22-204"></a><a href="#__codelineno-22-204"><span class="linenos" data-linenos="204 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-22-205" name="__codelineno-22-205"></a><a href="#__codelineno-22-205"><span class="linenos" data-linenos="205 "></span></a><span class="w">      </span>PGUSER:<span class="w"> </span>postgres
<a id="__codelineno-22-206" name="__codelineno-22-206"></a><a href="#__codelineno-22-206"><span class="linenos" data-linenos="206 "></span></a><span class="w">      </span>POSTGRES_PASSWORD:<span class="w"> </span>difyai123456
<a id="__codelineno-22-207" name="__codelineno-22-207"></a><a href="#__codelineno-22-207"><span class="linenos" data-linenos="207 "></span></a><span class="w">      </span>POSTGRES_DB:<span class="w"> </span>dify
<a id="__codelineno-22-208" name="__codelineno-22-208"></a><a href="#__codelineno-22-208"><span class="linenos" data-linenos="208 "></span></a><span class="w">      </span>PGDATA:<span class="w"> </span>/var/lib/postgresql/data/pgdata
<a id="__codelineno-22-209" name="__codelineno-22-209"></a><a href="#__codelineno-22-209"><span class="linenos" data-linenos="209 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-210" name="__codelineno-22-210"></a><a href="#__codelineno-22-210"><span class="linenos" data-linenos="210 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/db/data:/var/lib/postgresql/data
<a id="__codelineno-22-211" name="__codelineno-22-211"></a><a href="#__codelineno-22-211"><span class="linenos" data-linenos="211 "></span></a><span class="w">    </span>healthcheck:
<a id="__codelineno-22-212" name="__codelineno-22-212"></a><a href="#__codelineno-22-212"><span class="linenos" data-linenos="212 "></span></a><span class="w">      </span>test:<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;CMD&quot;</span>,<span class="w"> </span><span class="s2">&quot;pg_isready&quot;</span><span class="w"> </span><span class="o">]</span>
<a id="__codelineno-22-213" name="__codelineno-22-213"></a><a href="#__codelineno-22-213"><span class="linenos" data-linenos="213 "></span></a><span class="w">      </span>interval:<span class="w"> </span>1s
<a id="__codelineno-22-214" name="__codelineno-22-214"></a><a href="#__codelineno-22-214"><span class="linenos" data-linenos="214 "></span></a><span class="w">      </span>timeout:<span class="w"> </span>3s
<a id="__codelineno-22-215" name="__codelineno-22-215"></a><a href="#__codelineno-22-215"><span class="linenos" data-linenos="215 "></span></a><span class="w">      </span>retries:<span class="w"> </span><span class="m">30</span>
<a id="__codelineno-22-216" name="__codelineno-22-216"></a><a href="#__codelineno-22-216"><span class="linenos" data-linenos="216 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-217" name="__codelineno-22-217"></a><a href="#__codelineno-22-217"><span class="linenos" data-linenos="217 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-218" name="__codelineno-22-218"></a><a href="#__codelineno-22-218"><span class="linenos" data-linenos="218 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.5
<a id="__codelineno-22-219" name="__codelineno-22-219"></a><a href="#__codelineno-22-219"><span class="linenos" data-linenos="219 "></span></a>
<a id="__codelineno-22-220" name="__codelineno-22-220"></a><a href="#__codelineno-22-220"><span class="linenos" data-linenos="220 "></span></a><span class="w">  </span>redis:
<a id="__codelineno-22-221" name="__codelineno-22-221"></a><a href="#__codelineno-22-221"><span class="linenos" data-linenos="221 "></span></a><span class="w">    </span>image:<span class="w"> </span>redis:6-alpine
<a id="__codelineno-22-222" name="__codelineno-22-222"></a><a href="#__codelineno-22-222"><span class="linenos" data-linenos="222 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-223" name="__codelineno-22-223"></a><a href="#__codelineno-22-223"><span class="linenos" data-linenos="223 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-224" name="__codelineno-22-224"></a><a href="#__codelineno-22-224"><span class="linenos" data-linenos="224 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/redis/data:/data
<a id="__codelineno-22-225" name="__codelineno-22-225"></a><a href="#__codelineno-22-225"><span class="linenos" data-linenos="225 "></span></a><span class="w">    </span>command:<span class="w"> </span>redis-server<span class="w"> </span>--requirepass<span class="w"> </span>difyai123456
<a id="__codelineno-22-226" name="__codelineno-22-226"></a><a href="#__codelineno-22-226"><span class="linenos" data-linenos="226 "></span></a><span class="w">    </span>healthcheck:
<a id="__codelineno-22-227" name="__codelineno-22-227"></a><a href="#__codelineno-22-227"><span class="linenos" data-linenos="227 "></span></a><span class="w">      </span>test:<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;CMD&quot;</span>,<span class="w"> </span><span class="s2">&quot;redis-cli&quot;</span>,<span class="w"> </span><span class="s2">&quot;ping&quot;</span><span class="w"> </span><span class="o">]</span>
<a id="__codelineno-22-228" name="__codelineno-22-228"></a><a href="#__codelineno-22-228"><span class="linenos" data-linenos="228 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-229" name="__codelineno-22-229"></a><a href="#__codelineno-22-229"><span class="linenos" data-linenos="229 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-230" name="__codelineno-22-230"></a><a href="#__codelineno-22-230"><span class="linenos" data-linenos="230 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.6
<a id="__codelineno-22-231" name="__codelineno-22-231"></a><a href="#__codelineno-22-231"><span class="linenos" data-linenos="231 "></span></a>
<a id="__codelineno-22-232" name="__codelineno-22-232"></a><a href="#__codelineno-22-232"><span class="linenos" data-linenos="232 "></span></a><span class="w">  </span>weaviate:
<a id="__codelineno-22-233" name="__codelineno-22-233"></a><a href="#__codelineno-22-233"><span class="linenos" data-linenos="233 "></span></a><span class="w">    </span>image:<span class="w"> </span>semitechnologies/weaviate:1.19.0
<a id="__codelineno-22-234" name="__codelineno-22-234"></a><a href="#__codelineno-22-234"><span class="linenos" data-linenos="234 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-235" name="__codelineno-22-235"></a><a href="#__codelineno-22-235"><span class="linenos" data-linenos="235 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-236" name="__codelineno-22-236"></a><a href="#__codelineno-22-236"><span class="linenos" data-linenos="236 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/weaviate:/var/lib/weaviate
<a id="__codelineno-22-237" name="__codelineno-22-237"></a><a href="#__codelineno-22-237"><span class="linenos" data-linenos="237 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-22-238" name="__codelineno-22-238"></a><a href="#__codelineno-22-238"><span class="linenos" data-linenos="238 "></span></a><span class="w">      </span>QUERY_DEFAULTS_LIMIT:<span class="w"> </span><span class="m">25</span>
<a id="__codelineno-22-239" name="__codelineno-22-239"></a><a href="#__codelineno-22-239"><span class="linenos" data-linenos="239 "></span></a><span class="w">      </span>AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED:<span class="w"> </span><span class="s1">&#39;false&#39;</span>
<a id="__codelineno-22-240" name="__codelineno-22-240"></a><a href="#__codelineno-22-240"><span class="linenos" data-linenos="240 "></span></a><span class="w">      </span>PERSISTENCE_DATA_PATH:<span class="w"> </span><span class="s1">&#39;/var/lib/weaviate&#39;</span>
<a id="__codelineno-22-241" name="__codelineno-22-241"></a><a href="#__codelineno-22-241"><span class="linenos" data-linenos="241 "></span></a><span class="w">      </span>DEFAULT_VECTORIZER_MODULE:<span class="w"> </span><span class="s1">&#39;none&#39;</span>
<a id="__codelineno-22-242" name="__codelineno-22-242"></a><a href="#__codelineno-22-242"><span class="linenos" data-linenos="242 "></span></a><span class="w">      </span>CLUSTER_HOSTNAME:<span class="w"> </span><span class="s1">&#39;node1&#39;</span>
<a id="__codelineno-22-243" name="__codelineno-22-243"></a><a href="#__codelineno-22-243"><span class="linenos" data-linenos="243 "></span></a><span class="w">      </span><span class="c1"># 添加显式的广告地址</span>
<a id="__codelineno-22-244" name="__codelineno-22-244"></a><a href="#__codelineno-22-244"><span class="linenos" data-linenos="244 "></span></a><span class="w">      </span><span class="c1"># CLUSTER_ADVERTISE_ADDR: &#39;172.20.1.7&#39;</span>
<a id="__codelineno-22-245" name="__codelineno-22-245"></a><a href="#__codelineno-22-245"><span class="linenos" data-linenos="245 "></span></a><span class="w">      </span>AUTHENTICATION_APIKEY_ENABLED:<span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-22-246" name="__codelineno-22-246"></a><a href="#__codelineno-22-246"><span class="linenos" data-linenos="246 "></span></a><span class="w">      </span>AUTHENTICATION_APIKEY_ALLOWED_KEYS:<span class="w"> </span><span class="s1">&#39;WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih&#39;</span>
<a id="__codelineno-22-247" name="__codelineno-22-247"></a><a href="#__codelineno-22-247"><span class="linenos" data-linenos="247 "></span></a><span class="w">      </span>AUTHENTICATION_APIKEY_USERS:<span class="w"> </span><span class="s1">&#39;hello@dify.ai&#39;</span>
<a id="__codelineno-22-248" name="__codelineno-22-248"></a><a href="#__codelineno-22-248"><span class="linenos" data-linenos="248 "></span></a><span class="w">      </span>AUTHORIZATION_ADMINLIST_ENABLED:<span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-22-249" name="__codelineno-22-249"></a><a href="#__codelineno-22-249"><span class="linenos" data-linenos="249 "></span></a><span class="w">      </span>AUTHORIZATION_ADMINLIST_USERS:<span class="w"> </span><span class="s1">&#39;hello@dify.ai&#39;</span>
<a id="__codelineno-22-250" name="__codelineno-22-250"></a><a href="#__codelineno-22-250"><span class="linenos" data-linenos="250 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-251" name="__codelineno-22-251"></a><a href="#__codelineno-22-251"><span class="linenos" data-linenos="251 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-252" name="__codelineno-22-252"></a><a href="#__codelineno-22-252"><span class="linenos" data-linenos="252 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.7
<a id="__codelineno-22-253" name="__codelineno-22-253"></a><a href="#__codelineno-22-253"><span class="linenos" data-linenos="253 "></span></a>
<a id="__codelineno-22-254" name="__codelineno-22-254"></a><a href="#__codelineno-22-254"><span class="linenos" data-linenos="254 "></span></a><span class="w">  </span>sandbox:
<a id="__codelineno-22-255" name="__codelineno-22-255"></a><a href="#__codelineno-22-255"><span class="linenos" data-linenos="255 "></span></a><span class="w">    </span>image:<span class="w"> </span>langgenius/dify-sandbox:0.2.0
<a id="__codelineno-22-256" name="__codelineno-22-256"></a><a href="#__codelineno-22-256"><span class="linenos" data-linenos="256 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-257" name="__codelineno-22-257"></a><a href="#__codelineno-22-257"><span class="linenos" data-linenos="257 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-22-258" name="__codelineno-22-258"></a><a href="#__codelineno-22-258"><span class="linenos" data-linenos="258 "></span></a><span class="w">      </span>API_KEY:<span class="w"> </span>dify-sandbox
<a id="__codelineno-22-259" name="__codelineno-22-259"></a><a href="#__codelineno-22-259"><span class="linenos" data-linenos="259 "></span></a><span class="w">      </span>GIN_MODE:<span class="w"> </span><span class="s1">&#39;release&#39;</span>
<a id="__codelineno-22-260" name="__codelineno-22-260"></a><a href="#__codelineno-22-260"><span class="linenos" data-linenos="260 "></span></a><span class="w">      </span>WORKER_TIMEOUT:<span class="w"> </span><span class="m">15</span>
<a id="__codelineno-22-261" name="__codelineno-22-261"></a><a href="#__codelineno-22-261"><span class="linenos" data-linenos="261 "></span></a><span class="w">      </span>ENABLE_NETWORK:<span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-22-262" name="__codelineno-22-262"></a><a href="#__codelineno-22-262"><span class="linenos" data-linenos="262 "></span></a><span class="w">      </span>HTTP_PROXY:<span class="w"> </span><span class="s1">&#39;http://ssrf_proxy:3128&#39;</span>
<a id="__codelineno-22-263" name="__codelineno-22-263"></a><a href="#__codelineno-22-263"><span class="linenos" data-linenos="263 "></span></a><span class="w">      </span>HTTPS_PROXY:<span class="w"> </span><span class="s1">&#39;http://ssrf_proxy:3128&#39;</span>
<a id="__codelineno-22-264" name="__codelineno-22-264"></a><a href="#__codelineno-22-264"><span class="linenos" data-linenos="264 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-265" name="__codelineno-22-265"></a><a href="#__codelineno-22-265"><span class="linenos" data-linenos="265 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/sandbox/dependencies:/dependencies
<a id="__codelineno-22-266" name="__codelineno-22-266"></a><a href="#__codelineno-22-266"><span class="linenos" data-linenos="266 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-267" name="__codelineno-22-267"></a><a href="#__codelineno-22-267"><span class="linenos" data-linenos="267 "></span></a><span class="w">      </span>dify_ssrf_proxy_network:
<a id="__codelineno-22-268" name="__codelineno-22-268"></a><a href="#__codelineno-22-268"><span class="linenos" data-linenos="268 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.0.4
<a id="__codelineno-22-269" name="__codelineno-22-269"></a><a href="#__codelineno-22-269"><span class="linenos" data-linenos="269 "></span></a>
<a id="__codelineno-22-270" name="__codelineno-22-270"></a><a href="#__codelineno-22-270"><span class="linenos" data-linenos="270 "></span></a><span class="w">  </span>ssrf_proxy:
<a id="__codelineno-22-271" name="__codelineno-22-271"></a><a href="#__codelineno-22-271"><span class="linenos" data-linenos="271 "></span></a><span class="w">    </span>image:<span class="w"> </span>ubuntu/squid:latest
<a id="__codelineno-22-272" name="__codelineno-22-272"></a><a href="#__codelineno-22-272"><span class="linenos" data-linenos="272 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-273" name="__codelineno-22-273"></a><a href="#__codelineno-22-273"><span class="linenos" data-linenos="273 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-274" name="__codelineno-22-274"></a><a href="#__codelineno-22-274"><span class="linenos" data-linenos="274 "></span></a><span class="w">      </span>-<span class="w"> </span>./volumes/ssrf_proxy/squid.conf:/etc/squid/squid.conf
<a id="__codelineno-22-275" name="__codelineno-22-275"></a><a href="#__codelineno-22-275"><span class="linenos" data-linenos="275 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-276" name="__codelineno-22-276"></a><a href="#__codelineno-22-276"><span class="linenos" data-linenos="276 "></span></a><span class="w">      </span>dify_ssrf_proxy_network:
<a id="__codelineno-22-277" name="__codelineno-22-277"></a><a href="#__codelineno-22-277"><span class="linenos" data-linenos="277 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.0.5
<a id="__codelineno-22-278" name="__codelineno-22-278"></a><a href="#__codelineno-22-278"><span class="linenos" data-linenos="278 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-279" name="__codelineno-22-279"></a><a href="#__codelineno-22-279"><span class="linenos" data-linenos="279 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.8
<a id="__codelineno-22-280" name="__codelineno-22-280"></a><a href="#__codelineno-22-280"><span class="linenos" data-linenos="280 "></span></a>
<a id="__codelineno-22-281" name="__codelineno-22-281"></a><a href="#__codelineno-22-281"><span class="linenos" data-linenos="281 "></span></a><span class="w">  </span>nginx:
<a id="__codelineno-22-282" name="__codelineno-22-282"></a><a href="#__codelineno-22-282"><span class="linenos" data-linenos="282 "></span></a><span class="w">    </span>image:<span class="w"> </span>nginx:latest
<a id="__codelineno-22-283" name="__codelineno-22-283"></a><a href="#__codelineno-22-283"><span class="linenos" data-linenos="283 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-22-284" name="__codelineno-22-284"></a><a href="#__codelineno-22-284"><span class="linenos" data-linenos="284 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-22-285" name="__codelineno-22-285"></a><a href="#__codelineno-22-285"><span class="linenos" data-linenos="285 "></span></a><span class="w">      </span>-<span class="w"> </span>./nginx/nginx.conf:/etc/nginx/nginx.conf
<a id="__codelineno-22-286" name="__codelineno-22-286"></a><a href="#__codelineno-22-286"><span class="linenos" data-linenos="286 "></span></a><span class="w">      </span>-<span class="w"> </span>./nginx/proxy.conf:/etc/nginx/proxy.conf
<a id="__codelineno-22-287" name="__codelineno-22-287"></a><a href="#__codelineno-22-287"><span class="linenos" data-linenos="287 "></span></a><span class="w">      </span>-<span class="w"> </span>./nginx/conf.d:/etc/nginx/conf.d
<a id="__codelineno-22-288" name="__codelineno-22-288"></a><a href="#__codelineno-22-288"><span class="linenos" data-linenos="288 "></span></a><span class="w">    </span>depends_on:<span class="w">     </span>
<a id="__codelineno-22-289" name="__codelineno-22-289"></a><a href="#__codelineno-22-289"><span class="linenos" data-linenos="289 "></span></a><span class="w">      </span>-<span class="w"> </span>api
<a id="__codelineno-22-290" name="__codelineno-22-290"></a><a href="#__codelineno-22-290"><span class="linenos" data-linenos="290 "></span></a><span class="w">      </span>-<span class="w"> </span>web
<a id="__codelineno-22-291" name="__codelineno-22-291"></a><a href="#__codelineno-22-291"><span class="linenos" data-linenos="291 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-22-292" name="__codelineno-22-292"></a><a href="#__codelineno-22-292"><span class="linenos" data-linenos="292 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;80:80&quot;</span>
<a id="__codelineno-22-293" name="__codelineno-22-293"></a><a href="#__codelineno-22-293"><span class="linenos" data-linenos="293 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-22-294" name="__codelineno-22-294"></a><a href="#__codelineno-22-294"><span class="linenos" data-linenos="294 "></span></a><span class="w">      </span>dify_default:
<a id="__codelineno-22-295" name="__codelineno-22-295"></a><a href="#__codelineno-22-295"><span class="linenos" data-linenos="295 "></span></a><span class="w">        </span>ipv4_address:<span class="w"> </span><span class="m">172</span>.20.1.9
<a id="__codelineno-22-296" name="__codelineno-22-296"></a><a href="#__codelineno-22-296"><span class="linenos" data-linenos="296 "></span></a>
<a id="__codelineno-22-297" name="__codelineno-22-297"></a><a href="#__codelineno-22-297"><span class="linenos" data-linenos="297 "></span></a>networks:
<a id="__codelineno-22-298" name="__codelineno-22-298"></a><a href="#__codelineno-22-298"><span class="linenos" data-linenos="298 "></span></a><span class="w">  </span>dify_ssrf_proxy_network:
<a id="__codelineno-22-299" name="__codelineno-22-299"></a><a href="#__codelineno-22-299"><span class="linenos" data-linenos="299 "></span></a><span class="w">    </span>name:<span class="w"> </span>dify_ssrf_proxy_network
<a id="__codelineno-22-300" name="__codelineno-22-300"></a><a href="#__codelineno-22-300"><span class="linenos" data-linenos="300 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-22-301" name="__codelineno-22-301"></a><a href="#__codelineno-22-301"><span class="linenos" data-linenos="301 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-22-302" name="__codelineno-22-302"></a><a href="#__codelineno-22-302"><span class="linenos" data-linenos="302 "></span></a><span class="w">      </span>config:
<a id="__codelineno-22-303" name="__codelineno-22-303"></a><a href="#__codelineno-22-303"><span class="linenos" data-linenos="303 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.20.0.0/24
<a id="__codelineno-22-304" name="__codelineno-22-304"></a><a href="#__codelineno-22-304"><span class="linenos" data-linenos="304 "></span></a><span class="w">          </span>gateway:<span class="w"> </span><span class="m">172</span>.20.0.1
<a id="__codelineno-22-305" name="__codelineno-22-305"></a><a href="#__codelineno-22-305"><span class="linenos" data-linenos="305 "></span></a><span class="w">    </span>internal:<span class="w"> </span><span class="nb">true</span>
<a id="__codelineno-22-306" name="__codelineno-22-306"></a><a href="#__codelineno-22-306"><span class="linenos" data-linenos="306 "></span></a><span class="w">  </span>dify_default:
<a id="__codelineno-22-307" name="__codelineno-22-307"></a><a href="#__codelineno-22-307"><span class="linenos" data-linenos="307 "></span></a><span class="w">    </span>name:<span class="w"> </span>dify_default
<a id="__codelineno-22-308" name="__codelineno-22-308"></a><a href="#__codelineno-22-308"><span class="linenos" data-linenos="308 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-22-309" name="__codelineno-22-309"></a><a href="#__codelineno-22-309"><span class="linenos" data-linenos="309 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-22-310" name="__codelineno-22-310"></a><a href="#__codelineno-22-310"><span class="linenos" data-linenos="310 "></span></a><span class="w">      </span>config:
<a id="__codelineno-22-311" name="__codelineno-22-311"></a><a href="#__codelineno-22-311"><span class="linenos" data-linenos="311 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.20.1.0/24
<a id="__codelineno-22-312" name="__codelineno-22-312"></a><a href="#__codelineno-22-312"><span class="linenos" data-linenos="312 "></span></a><span class="w">          </span>gateway:<span class="w"> </span><span class="m">172</span>.20.1.1
</code></pre></div>
<h3 id="1版本_3">1.版本<a class="headerlink" href="#1版本_3" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3。</li>
</ul>
<h3 id="2api服务">2.api服务<a class="headerlink" href="#2api服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>：使用langgenius/dify-api:0.6.9镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>environment</code>：定义了许多环境变量，如数据库连接信息、Redis连接信息、存储配置等。</li>
<li><code>depends_on</code>：表示此服务依赖于<code>db</code>和<code>redis</code>服务。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/app/storage</code>目录到容器内的<code>/app/api/storage</code>目录。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="3worker服务">3.worker服务<a class="headerlink" href="#3worker服务" title="Permanent link">&para;</a></h3>
<ul>
<li>`image：使用相同的API镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>environment</code>：定义了许多环境变量，与<code>api</code>服务类似，但模式为<code>worker</code>。</li>
<li><code>depends_on</code>：表示此服务依赖于<code>db</code>和<code>redis</code>服务。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/app/storage</code>目录到容器内的<code>/app/api/storage</code>目录。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="4web服务">4.web服务<a class="headerlink" href="#4web服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>：使用langgenius/dify-web:0.6.9镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>environment</code>：定义了几个环境变量。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="5db服务">5.db服务<a class="headerlink" href="#5db服务" title="Permanent link">&para;</a></h3>
<ul>
<li>`image：使用Postgres 15的轻量级镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>environment</code>：定义了Postgres数据库的用户、密码和数据库名称。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/db/data</code>目录到容器内的<code>/var/lib/postgresql/data</code>目录。</li>
<li><code>healthcheck</code>：配置了一个健康检查命令，确保数据库服务启动并运行。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="6redis服务">6.redis服务<a class="headerlink" href="#6redis服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>：使用Redis 6的轻量级镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/redis/data</code>目录到容器内的<code>/data</code>目录。</li>
<li><code>command</code>：运行Redis服务器并设置密码。</li>
<li><code>healthcheck</code>：配置了一个健康检查命令，确保Redis服务启动并运行。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="7weaviate服务">7.weaviate服务<a class="headerlink" href="#7weaviate服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>：使用Weaviate 1.19.0镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/weaviate</code>目录到容器内的<code>/var/lib/weaviate</code>目录。</li>
<li><code>environment</code>：定义了多个环境变量来配置Weaviate，包括身份验证、持久性和集群设置。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="8sandbox服务">8.sandbox服务<a class="headerlink" href="#8sandbox服务" title="Permanent link">&para;</a></h3>
<ul>
<li>`image：使用langgenius/dify-sandbox:0.2.0镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>environment</code>：定义了几个环境变量。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/sandbox/dependencies</code>目录到容器内的<code>/dependencies</code>目录。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="9ssrf_proxy服务">9.ssrf_proxy服务<a class="headerlink" href="#9ssrf_proxy服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>：使用最新版本的Squid代理镜像。</li>
<li><code>restart</code>：总是重启容器。</li>
<li><code>volumes</code>：映射主机的<code>./volumes/ssrf_proxy/squid.conf</code>配置文件到容器内的<code>/etc/squid/squid.conf</code>文件。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="10nginx服务">10.nginx服务<a class="headerlink" href="#10nginx服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image:</code>：使用最新版本的Nginx镜像。</li>
<li>`restart：总是重启容器。</li>
<li><code>volumes</code>：映射主机的Nginx配置文件目录到容器内的相应目录。</li>
<li><code>depends_on</code>：表示此服务依赖于<code>api</code>和<code>web</code>服务。</li>
<li><code>ports</code>：映射主机的80端口到容器的80端口。</li>
<li><code>networks</code>：配置该服务所连接的网络及其IP地址。</li>
</ul>
<h3 id="11网络定义">11.网络定义<a class="headerlink" href="#11网络定义" title="Permanent link">&para;</a></h3>
<ul>
<li><code>dify_ssrf_proxy_network</code>：定义了一个名为 <code>dify_ssrf_proxy_network</code> 的自定义网络，供 <code>api</code> 、<code>work</code>、<code>sandbox</code>、<code>ssrf_proxy</code>服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>dify_ssrf_proxy_network</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>docker_dify_ssrf_proxy_network</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config</code>: IP地址管理的配置列表项。<ul>
<li><code>- subnet</code>：设置子网为 <code>172.20.0.0/24</code>；</li>
<li><code>gateway</code>：设置网关为<code>172.20.0.1</code>。</li>
</ul>
</li>
<li><code>dify_default</code>：定义了一个名为 <code>dify_default</code> 的自定义网络，供 <code>api</code> 、<code>work</code>、<code>web</code>、<code>db</code>、<code>redis</code>、<code>weaviate</code>、<code>ssra_proxy</code>、<code>nginx</code>服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>dify_default</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>docker_dify_default</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config</code>: IP地址管理的配置列表项。<ul>
<li><code>- subnet</code>：设置子网为 <code>172.21.0.0/24</code>；</li>
<li><code>gateway</code>：设置网关为<code>172.21.0.1</code>。</li>
</ul>
</li>
</ul>
<h2 id="九typecho的yml参数说明">九、typecho的yml参数说明<a class="headerlink" href="#九typecho的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><a href="#__codelineno-23-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3&#39;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><a href="#__codelineno-23-2"><span class="linenos" data-linenos=" 2 "></span></a>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><a href="#__codelineno-23-3"><span class="linenos" data-linenos=" 3 "></span></a>services:
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><a href="#__codelineno-23-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">  </span>typecho:
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><a href="#__codelineno-23-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span>image:<span class="w"> </span>fukoy/nginx-php-fpm:php7.4
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><a href="#__codelineno-23-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>typecho2
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><a href="#__codelineno-23-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><a href="#__codelineno-23-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">      </span>-<span class="w"> </span>typecho_network
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><a href="#__codelineno-23-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><a href="#__codelineno-23-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s1">&#39;8090:80&#39;</span><span class="w">  </span><span class="c1">#开放端口8090</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><a href="#__codelineno-23-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><a href="#__codelineno-23-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><a href="#__codelineno-23-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/typecho/www:/usr/share/nginx/typecho/<span class="w">   </span><span class="c1">#typecho网站文件</span>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a><a href="#__codelineno-23-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/typecho/nginx/conf.d:/etc/nginx/conf.d<span class="w">   </span><span class="c1">#nginx配置文件夹</span>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><a href="#__codelineno-23-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/typecho/nginx/nginx.conf:/etc/nginx/nginx.conf<span class="w">  </span><span class="c1">#nginx配置文件</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><a href="#__codelineno-23-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><a href="#__codelineno-23-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">      </span>-<span class="w"> </span>mysql
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><a href="#__codelineno-23-18"><span class="linenos" data-linenos="18 "></span></a>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><a href="#__codelineno-23-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">  </span>typechdb:
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><a href="#__codelineno-23-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span>image:<span class="w"> </span>mysql:5.7
<a id="__codelineno-23-21" name="__codelineno-23-21"></a><a href="#__codelineno-23-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>typechodb2
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><a href="#__codelineno-23-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-23-23" name="__codelineno-23-23"></a><a href="#__codelineno-23-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">      </span>-<span class="w"> </span>typecho_network
<a id="__codelineno-23-24" name="__codelineno-23-24"></a><a href="#__codelineno-23-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-23-25" name="__codelineno-23-25"></a><a href="#__codelineno-23-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s1">&#39;3306:3306&#39;</span>
<a id="__codelineno-23-26" name="__codelineno-23-26"></a><a href="#__codelineno-23-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-23-27" name="__codelineno-23-27"></a><a href="#__codelineno-23-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-23-28" name="__codelineno-23-28"></a><a href="#__codelineno-23-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="m">123456</span><span class="w">   </span><span class="c1"># 替换为你的MySQL root密码</span>
<a id="__codelineno-23-29" name="__codelineno-23-29"></a><a href="#__codelineno-23-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MYSQL_DATABASE</span><span class="o">=</span>typecho<span class="w">       </span><span class="c1"># 替换为你的数据库名称</span>
<a id="__codelineno-23-30" name="__codelineno-23-30"></a><a href="#__codelineno-23-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MYSQL_USER</span><span class="o">=</span>typecho<span class="w">           </span><span class="c1"># 替换为你的数据库用户</span>
<a id="__codelineno-23-31" name="__codelineno-23-31"></a><a href="#__codelineno-23-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">MYSQL_PASSWORD</span><span class="o">=</span>typecho<span class="w">       </span><span class="c1"># 替换为你的数据库用户密码</span>
<a id="__codelineno-23-32" name="__codelineno-23-32"></a><a href="#__codelineno-23-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-23-33" name="__codelineno-23-33"></a><a href="#__codelineno-23-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/typecho/mysql/data:/var/lib/mysql
<a id="__codelineno-23-34" name="__codelineno-23-34"></a><a href="#__codelineno-23-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/typecho/mysql/logs:/var/log/mysql
<a id="__codelineno-23-35" name="__codelineno-23-35"></a><a href="#__codelineno-23-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/typecho/mysql/conf:/etc/mysql/conf.d
<a id="__codelineno-23-36" name="__codelineno-23-36"></a><a href="#__codelineno-23-36"><span class="linenos" data-linenos="36 "></span></a>
<a id="__codelineno-23-37" name="__codelineno-23-37"></a><a href="#__codelineno-23-37"><span class="linenos" data-linenos="37 "></span></a>networks:
<a id="__codelineno-23-38" name="__codelineno-23-38"></a><a href="#__codelineno-23-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">  </span>typecho_network:
<a id="__codelineno-23-39" name="__codelineno-23-39"></a><a href="#__codelineno-23-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span>name:<span class="w"> </span>typecho_network
<a id="__codelineno-23-40" name="__codelineno-23-40"></a><a href="#__codelineno-23-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-23-41" name="__codelineno-23-41"></a><a href="#__codelineno-23-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-23-42" name="__codelineno-23-42"></a><a href="#__codelineno-23-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">      </span>config:
<a id="__codelineno-23-43" name="__codelineno-23-43"></a><a href="#__codelineno-23-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.190.0.0/16
</code></pre></div>
<h3 id="1版本_4">1.版本<a class="headerlink" href="#1版本_4" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3。</li>
</ul>
<h3 id="2typecho服务">2.typecho服务<a class="headerlink" href="#2typecho服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定容器使用 <code>fukoy/nginx-php-fpm:php7.4</code> 镜像。</li>
<li><code>container_name</code>: 为该服务指定容器名称为 <code>typecho2</code>。</li>
<li><code>networks</code>: 将该容器连接到名为 <code>typecho_network</code> 的网络。</li>
<li><code>ports</code>: 将宿主机的 8090 端口映射到容器的 80 端口，允许通过宿主机的 8090 端口访问容器内的服务。</li>
<li><code>restart</code>: 设置容器在停止后自动重启。</li>
<li><code>volumes</code>: 定义了挂载卷，将宿主机目录映射到容器内对应的目录。</li>
<li><code>/data/typecho/www:/usr/share/nginx/typecho/</code>: 将宿主机的 <code>/data/typecho/www</code> 目录映射到容器的 <code>/usr/share/nginx/typecho/</code>，用于存储 Typecho 网站文件。</li>
<li><code>/data/typecho/nginx/conf.d:/etc/nginx/conf.d</code>: 将宿主机的 <code>/data/typecho/nginx/conf.d</code> 目录映射到容器的 <code>/etc/nginx/conf.d</code>，用于存储 Nginx 配置文件。</li>
<li><code>/data/typecho/nginx/nginx.conf:/etc/nginx/nginx.conf</code>: 将宿主机的 <code>/data/typecho/nginx/nginx.conf</code> 文件映射到容器的 <code>/etc/nginx/nginx.conf</code>，用于存储 Nginx 主配置文件。</li>
<li><code>depends_on</code>: 指定该服务依赖 <code>mysql</code> 服务，即在启动该服务前先启动 <code>mysql</code> 服务。</li>
</ul>
<h3 id="3typechdb服务">3.typechdb服务<a class="headerlink" href="#3typechdb服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定容器使用 <code>mysql:5.7</code> 镜像。</li>
<li><code>container_name</code>: 为该服务指定容器名称为 <code>typechodb2</code>。</li>
<li><code>networks</code>: 将该容器连接到名为 <code>typecho_network</code> 的网络。</li>
<li><code>ports</code>: 将宿主机的 3306 端口映射到容器的 3306 端口，允许通过宿主机的 3306 端口访问容器内的 MySQL 数据库。</li>
<li>`restart: 设置容器在停止后自动重启。</li>
<li><code>environment</code>: 定义环境变量来配置 MySQL 数据库。</li>
<li><code>MYSQL_ROOT_PASSWORD</code>: 设置 MySQL root 用户的密码为 <code>123456</code>。</li>
<li><code>MYSQL_DATABASE: 创建名为</code>typecho` 的数据库。</li>
<li><code>MYSQL_USER: 创建名为</code>typecho` 的数据库用户。</li>
<li><code>MYSQL_PASSWORD: 设置</code>typecho<code>用户的密码为</code>typecho`。</li>
<li><code>volumes</code>: 定义了挂载卷，将宿主机目录映射到容器内对应的目录。</li>
<li><code>/data/typecho/mysql/data:/var/lib/mysql</code>: 将宿主机的 <code>/data/typecho/mysql/data</code> 目录映射到容器的 <code>/var/lib/mysql</code>，用于存储 MySQL 数据。</li>
<li><code>/data/typecho/mysql/logs:/var/log/mysql</code>: 将宿主机的 <code>/data/typecho/mysql/logs</code> 目录映射到容器的 <code>/var/log/mysql</code>，用于存储 MySQL 日志。</li>
<li><code>/data/typecho/mysql/conf:/etc/mysql/conf.d</code>: 将宿主机的 <code>/data/typecho/mysql/conf</code> 目录映射到容器的 <code>/etc/mysql/conf.d</code>，用于存储 MySQL 配置文件。</li>
</ul>
<h3 id="4网络定义_2">4.网络定义<a class="headerlink" href="#4网络定义_2" title="Permanent link">&para;</a></h3>
<ul>
<li><code>typecho_network</code>：定义了一个名为 <code>typecho_network</code> 的自定义网络，供 <code>typecho</code> 和 <code>typechodb</code> 服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>typecho_network</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>typecho_typecho_network</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.190.0.0/16</code>。</li>
</ul>
<h2 id="十reader的yml参数说明">十、reader的yml参数说明<a class="headerlink" href="#十reader的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><a href="#__codelineno-24-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s1">&#39;3.1&#39;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><a href="#__codelineno-24-2"><span class="linenos" data-linenos=" 2 "></span></a>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><a href="#__codelineno-24-3"><span class="linenos" data-linenos=" 3 "></span></a>services:
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><a href="#__codelineno-24-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="c1"># 多用户版</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><a href="#__codelineno-24-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">  </span>read_all:
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><a href="#__codelineno-24-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span>image:<span class="w"> </span>hectorqin/reader
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><a href="#__codelineno-24-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>reader<span class="w">   </span><span class="c1">#容器名,可自行修改</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><a href="#__codelineno-24-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><a href="#__codelineno-24-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">      </span>-<span class="w"> </span>reader_network
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><a href="#__codelineno-24-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><a href="#__codelineno-24-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><a href="#__codelineno-24-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="m">4396</span>:8080<span class="w">   </span><span class="c1">#4396端口映射可自行修改</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><a href="#__codelineno-24-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><a href="#__codelineno-24-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/reader/logs:/logs<span class="w">   </span><span class="c1">#log映射目录 /root/data/docker_data/reader/logs 映射目录可自行修改</span>
<a id="__codelineno-24-15" name="__codelineno-24-15"></a><a href="#__codelineno-24-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">      </span>-<span class="w"> </span>/data/reader/storage:/storage<span class="w">   </span><span class="c1">#数据映射目录 /root/data/docker_data/reader/storage 映射目录可自行修改</span>
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><a href="#__codelineno-24-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-24-17" name="__codelineno-24-17"></a><a href="#__codelineno-24-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">SPRING_PROFILES_ACTIVE</span><span class="o">=</span>prod
<a id="__codelineno-24-18" name="__codelineno-24-18"></a><a href="#__codelineno-24-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">READER_APP_SECURE</span><span class="o">=</span><span class="nb">true</span><span class="w">   </span><span class="c1">#开启登录鉴权，开启后将支持多用户模式</span>
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><a href="#__codelineno-24-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">READER_APP_CACHECHAPTERCONTENT</span><span class="o">=</span><span class="nb">true</span><span class="w">   </span><span class="c1">#是否开启缓存章节内容 V2.0</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a><a href="#__codelineno-24-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="nv">READER_APP_SECUREKEY</span><span class="o">=</span>Sunline@2024<span class="w">   </span><span class="c1">#管理员密码  可自行修改</span>
<a id="__codelineno-24-21" name="__codelineno-24-21"></a><a href="#__codelineno-24-21"><span class="linenos" data-linenos="21 "></span></a><span class="c1"># 自动更新docker</span>
<a id="__codelineno-24-22" name="__codelineno-24-22"></a><a href="#__codelineno-24-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">  </span>watchtower:
<a id="__codelineno-24-23" name="__codelineno-24-23"></a><a href="#__codelineno-24-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span>image:<span class="w"> </span>containrrr/watchtower
<a id="__codelineno-24-24" name="__codelineno-24-24"></a><a href="#__codelineno-24-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>watchtower
<a id="__codelineno-24-25" name="__codelineno-24-25"></a><a href="#__codelineno-24-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-24-26" name="__codelineno-24-26"></a><a href="#__codelineno-24-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">      </span>-<span class="w"> </span>reader_network
<a id="__codelineno-24-27" name="__codelineno-24-27"></a><a href="#__codelineno-24-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>restart:<span class="w"> </span>always
<a id="__codelineno-24-28" name="__codelineno-24-28"></a><a href="#__codelineno-24-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span><span class="c1"># 环境变量,设置为上海时区</span>
<a id="__codelineno-24-29" name="__codelineno-24-29"></a><a href="#__codelineno-24-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-24-30" name="__codelineno-24-30"></a><a href="#__codelineno-24-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">        </span>-<span class="w"> </span><span class="nv">TZ</span><span class="o">=</span>Asia/Shanghai
<a id="__codelineno-24-31" name="__codelineno-24-31"></a><a href="#__codelineno-24-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-24-32" name="__codelineno-24-32"></a><a href="#__codelineno-24-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">      </span>-<span class="w"> </span>/var/run/docker.sock:/var/run/docker.sock
<a id="__codelineno-24-33" name="__codelineno-24-33"></a><a href="#__codelineno-24-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span>command:<span class="w"> </span>reader<span class="w"> </span>watchtower<span class="w"> </span>--cleanup<span class="w"> </span>--schedule<span class="w"> </span><span class="s2">&quot;0 0 4 * * *&quot;</span>
<a id="__codelineno-24-34" name="__codelineno-24-34"></a><a href="#__codelineno-24-34"><span class="linenos" data-linenos="34 "></span></a>
<a id="__codelineno-24-35" name="__codelineno-24-35"></a><a href="#__codelineno-24-35"><span class="linenos" data-linenos="35 "></span></a>networks:
<a id="__codelineno-24-36" name="__codelineno-24-36"></a><a href="#__codelineno-24-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">  </span>reader_network:
<a id="__codelineno-24-37" name="__codelineno-24-37"></a><a href="#__codelineno-24-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">    </span>name:<span class="w"> </span>reader_network
<a id="__codelineno-24-38" name="__codelineno-24-38"></a><a href="#__codelineno-24-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-24-39" name="__codelineno-24-39"></a><a href="#__codelineno-24-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-24-40" name="__codelineno-24-40"></a><a href="#__codelineno-24-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">      </span>config:
<a id="__codelineno-24-41" name="__codelineno-24-41"></a><a href="#__codelineno-24-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.100.0.0/16
</code></pre></div>
<h3 id="1版本_5">1.版本<a class="headerlink" href="#1版本_5" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3.1。</li>
</ul>
<h3 id="2read_all服务">2.read_all服务<a class="headerlink" href="#2read_all服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定容器使用 <code>hectorqin/reader</code> 镜像。</li>
<li><code>container_name</code>: 为该服务指定容器名称为 <code>reader</code>。</li>
<li><code>networks</code>: 将该容器连接到名为 <code>reader_network</code> 的网络。</li>
<li><code>restart</code>: 设置容器在停止后自动重启。</li>
<li><code>ports</code>: 将宿主机的 4396 端口映射到容器的 8080 端口，允许通过宿主机的 4396 端口访问容器内的服务。</li>
<li><code>volumes</code>: 定义了挂载卷，将宿主机目录映射到容器内对应的目录。</li>
<li><code>/data/reader/logs:/logs</code>: 将宿主机的 <code>/data/reader/logs</code> 目录映射到容器的 <code>/logs</code>，用于存储 Reader 日志文件。</li>
<li><code>/data/reader/storage:/storage</code>: 将宿主机的 <code>/data/reader/storage</code> 目录映射到容器的 <code>/storage</code>，用于存储 Reader 数据。</li>
<li><code>environment</code>: 环境变量设置。</li>
<li><code>SPRING_PROFILES_ACTIVE=prod</code>: 设置 Spring Boot 的运行环境为生产环境。</li>
<li><code>READER_APP_SECURE=true</code>: 开启登录鉴权，开启后将支持多用户模式。</li>
<li><code>READER_APP_CACHECHAPTERCONTENT=true</code>: 开启缓存章节内容（V2.0 版）。</li>
<li><code>READER_APP_SECUREKEY=Sunline@2024</code>: 管理员密码。</li>
</ul>
<h3 id="3watchtower服务">3.watchtower服务<a class="headerlink" href="#3watchtower服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定容器使用 <code>containrrr/watchtower</code> 镜像。</li>
<li><code>container_name</code>: 为该服务指定容器名称为 <code>watchtower</code>。</li>
<li><code>networks</code>: 将该容器连接到名为 <code>reader_network</code> 的网络。</li>
<li><code>restart</code>: 设置容器在停止后自动重启。</li>
<li><code>environment</code>: 环境变量设置。</li>
<li><code>TZ=Asia/Shanghai</code>: 设置时区为上海时区。</li>
<li><code>volumes</code>: 定义了挂载卷，将宿主机目录映射到容器内对应的目录。</li>
<li><code>/var/run/docker.sock:/var/run/docker.sock</code>：映射宿主机的 <code>/var/run/docker.sock</code> 到容器的 <code>/var/run/docker.sock</code>，使 Watchtower 能够管理 Docker 容器。</li>
<li><code>command: reader watchtower --cleanup --schedule "0 0 4 * * *"</code>：执行 Watchtower 命令，自动更新 <code>reader</code> 容器，并清理旧版本，按照计划任务（每天凌晨 4 点）进行。</li>
</ul>
<h3 id="4网络定义_3">4.网络定义<a class="headerlink" href="#4网络定义_3" title="Permanent link">&para;</a></h3>
<ul>
<li><code>reader_network</code>：定义了一个名为 <code>reader_network</code> 的自定义网络，供 <code>reader_all</code> 和 <code>watchtower</code> 服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>reader_network</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>reader_reader_network</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.100.0.0/16</code>。</li>
</ul>
<h2 id="十一navidrome的yml参数说明">十一、navidrome的yml参数说明<a class="headerlink" href="#十一navidrome的yml参数说明" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><a href="#__codelineno-25-1"><span class="linenos" data-linenos=" 1 "></span></a>version:<span class="w"> </span><span class="s2">&quot;3&quot;</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><a href="#__codelineno-25-2"><span class="linenos" data-linenos=" 2 "></span></a>services:
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><a href="#__codelineno-25-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">  </span>navidrome:
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><a href="#__codelineno-25-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span>image:<span class="w"> </span>deluan/navidrome:latest
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><a href="#__codelineno-25-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>navidrome
<a id="__codelineno-25-6" name="__codelineno-25-6"></a><a href="#__codelineno-25-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><a href="#__codelineno-25-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">      </span>-<span class="w"> </span>music_network
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><a href="#__codelineno-25-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span>restart:<span class="w"> </span>unless-stopped
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><a href="#__codelineno-25-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><a href="#__codelineno-25-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;4533:4533&quot;</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a><a href="#__codelineno-25-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-25-12" name="__codelineno-25-12"></a><a href="#__codelineno-25-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">      </span>ND_ENABLETRANSCODINGCONFIG:<span class="w"> </span><span class="nb">true</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><a href="#__codelineno-25-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">      </span>ND_TRANSCODINGCACHESIZE:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><a href="#__codelineno-25-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">      </span>ND_SCANSCHEDULE:<span class="w"> </span>1h
<a id="__codelineno-25-15" name="__codelineno-25-15"></a><a href="#__codelineno-25-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">      </span>ND_LOGLEVEL:<span class="w"> </span>info<span class="w">  </span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a><a href="#__codelineno-25-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">      </span>ND_SESSIONTIMEOUT:<span class="w"> </span>24h
<a id="__codelineno-25-17" name="__codelineno-25-17"></a><a href="#__codelineno-25-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">      </span>ND_BASEURL:<span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><a href="#__codelineno-25-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">      </span>LANG:<span class="w"> </span>C.UTF-8
<a id="__codelineno-25-19" name="__codelineno-25-19"></a><a href="#__codelineno-25-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">      </span>LC_ALL:<span class="w"> </span>C.UTF-8
<a id="__codelineno-25-20" name="__codelineno-25-20"></a><a href="#__codelineno-25-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-25-21" name="__codelineno-25-21"></a><a href="#__codelineno-25-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;/data/navidrome/data:/data&quot;</span>
<a id="__codelineno-25-22" name="__codelineno-25-22"></a><a href="#__codelineno-25-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;/data/navidrome/music:/music:ro&quot;</span>
<a id="__codelineno-25-23" name="__codelineno-25-23"></a><a href="#__codelineno-25-23"><span class="linenos" data-linenos="23 "></span></a>
<a id="__codelineno-25-24" name="__codelineno-25-24"></a><a href="#__codelineno-25-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">  </span>miniserve:
<a id="__codelineno-25-25" name="__codelineno-25-25"></a><a href="#__codelineno-25-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span>image:<span class="w"> </span>svenstaro/miniserve:latest
<a id="__codelineno-25-26" name="__codelineno-25-26"></a><a href="#__codelineno-25-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span>container_name:<span class="w"> </span>miniserve
<a id="__codelineno-25-27" name="__codelineno-25-27"></a><a href="#__codelineno-25-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>networks:
<a id="__codelineno-25-28" name="__codelineno-25-28"></a><a href="#__codelineno-25-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">      </span>-<span class="w"> </span>music_network
<a id="__codelineno-25-29" name="__codelineno-25-29"></a><a href="#__codelineno-25-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span>restart:<span class="w"> </span>unless-stopped
<a id="__codelineno-25-30" name="__codelineno-25-30"></a><a href="#__codelineno-25-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span>depends_on:
<a id="__codelineno-25-31" name="__codelineno-25-31"></a><a href="#__codelineno-25-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">      </span>-<span class="w"> </span>navidrome
<a id="__codelineno-25-32" name="__codelineno-25-32"></a><a href="#__codelineno-25-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span>ports:
<a id="__codelineno-25-33" name="__codelineno-25-33"></a><a href="#__codelineno-25-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;4534:8080&quot;</span>
<a id="__codelineno-25-34" name="__codelineno-25-34"></a><a href="#__codelineno-25-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span>environment:
<a id="__codelineno-25-35" name="__codelineno-25-35"></a><a href="#__codelineno-25-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">      </span>LANG:<span class="w"> </span>C.UTF-8
<a id="__codelineno-25-36" name="__codelineno-25-36"></a><a href="#__codelineno-25-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">      </span>LC_ALL:<span class="w"> </span>C.UTF-8
<a id="__codelineno-25-37" name="__codelineno-25-37"></a><a href="#__codelineno-25-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">    </span>volumes:
<a id="__codelineno-25-38" name="__codelineno-25-38"></a><a href="#__codelineno-25-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">      </span>-<span class="w"> </span><span class="s2">&quot;/data/navidrome/music:/downloads&quot;</span><span class="w">    </span><span class="c1"># 上传文件的目标目录</span>
<a id="__codelineno-25-39" name="__codelineno-25-39"></a><a href="#__codelineno-25-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span>command:<span class="w"> </span><span class="s2">&quot;-r -z -u -q -p 8080 -a admin:dream13889 /downloads&quot;</span>
<a id="__codelineno-25-40" name="__codelineno-25-40"></a><a href="#__codelineno-25-40"><span class="linenos" data-linenos="40 "></span></a>
<a id="__codelineno-25-41" name="__codelineno-25-41"></a><a href="#__codelineno-25-41"><span class="linenos" data-linenos="41 "></span></a>networks:
<a id="__codelineno-25-42" name="__codelineno-25-42"></a><a href="#__codelineno-25-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">  </span>music_network:
<a id="__codelineno-25-43" name="__codelineno-25-43"></a><a href="#__codelineno-25-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span>name:<span class="w"> </span>music_network
<a id="__codelineno-25-44" name="__codelineno-25-44"></a><a href="#__codelineno-25-44"><span class="linenos" data-linenos="44 "></span></a><span class="w">    </span>ipam:
<a id="__codelineno-25-45" name="__codelineno-25-45"></a><a href="#__codelineno-25-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">      </span>driver:<span class="w"> </span>default
<a id="__codelineno-25-46" name="__codelineno-25-46"></a><a href="#__codelineno-25-46"><span class="linenos" data-linenos="46 "></span></a><span class="w">      </span>config:
<a id="__codelineno-25-47" name="__codelineno-25-47"></a><a href="#__codelineno-25-47"><span class="linenos" data-linenos="47 "></span></a><span class="w">        </span>-<span class="w"> </span>subnet:<span class="w"> </span><span class="m">172</span>.101.0.0/16
</code></pre></div>
<h3 id="1版本_6">1.版本<a class="headerlink" href="#1版本_6" title="Permanent link">&para;</a></h3>
<ul>
<li><code>version</code>：指定了 Docker Compose 文件的版本，这里使用的是版本 3。</li>
</ul>
<h3 id="2navidrome服务">2.navidrome服务<a class="headerlink" href="#2navidrome服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定容器使用 <code>deluan/navidrome:latest</code> 镜像。</li>
<li><code>container_name</code>: 为该服务指定容器名称为 <code>navidrome</code>。</li>
<li><code>networks</code>: 将该容器连接到名为 <code>music_network</code> 的网络。</li>
<li><code>restart</code>: 容器将在失败时重启，除非手动停止。</li>
<li><code>ports</code>: 将宿主机的 4533 端口映射到容器的 4533 端口，允许通过宿主机的 4533 端口访问容器内的服务。</li>
<li><code>environment</code>：设置环境变量。</li>
<li><code>ND_ENABLETRANSCODINGCONFIG=true</code>: 启用转码配置。</li>
<li><code>ND_TRANSCODINGCACHESIZE=0</code>: 设置转码缓存大小为 0。</li>
<li><code>ND_SCANSCHEDULE=1h</code>: 每小时扫描一次。</li>
<li><code>ND_LOGLEVEL=info</code>: 设置日志级别为 <code>info</code>。</li>
<li><code>ND_SESSIONTIMEOUT=24h</code>: 会话超时时间为 24 小时。</li>
<li><code>ND_BASEURL=""</code>: 基本 URL（空字符串表示没有特定的基 URL）。</li>
<li><code>LANG=C.UTF-8</code> 和 <code>LC_ALL=C.UTF-8</code>: 设置语言环境为 <code>C.UTF-8</code>。</li>
<li><code>volumes</code>: 定义了挂载卷，将宿主机目录映射到容器内对应的目录。</li>
<li><code>/data/navidrome/data:/data</code>: 映射宿主机的 <code>/data/navidrome/data</code> 目录到容器的 <code>/data</code> 目录，用于存储 Navidrome 的数据。</li>
<li><code>/data/navidrome/music:/music:ro</code>: 映射宿主机的 <code>/data/navidrome/music</code> 目录到容器的 <code>/music</code> 目录（只读），用于存储音乐文件。</li>
</ul>
<h3 id="3miniserve服务">3.miniserve服务<a class="headerlink" href="#3miniserve服务" title="Permanent link">&para;</a></h3>
<ul>
<li><code>image</code>: 指定容器使用 <code>svenstaro/miniserve:latest</code> 镜像。</li>
<li><code>container_name</code>: 为该服务指定容器名称为 <code>miniserve</code>。</li>
<li><code>networks</code>: 将该容器连接到名为 <code>music_network</code> 的网络。</li>
<li><code>restart</code>: 容器将在失败时重启，除非手动停止。</li>
<li><code>depends_on</code>：表示 <code>miniserve</code> 服务依赖于 <code>navidrome</code> 服务。Docker Compose 将确保 <code>navidrome</code> 服务先启动。</li>
<li><code>ports</code>: 将宿主机的 4534 端口映射到容器的 8080 端口，允许通过宿主机的 4534 端口访问容器内的服务。</li>
<li><code>environment</code>: 环境变量设置。</li>
<li><code>LANG=C.UTF-8</code> 和 <code>LC_ALL=C.UTF-8</code>: 设置语言环境为 <code>C.UTF-8</code>。</li>
<li><code>volumes</code>: 定义了挂载卷，将宿主机目录映射到容器内对应的目录。</li>
<li><code>/data/navidrome/music:/downloads</code>：映射宿主机的 <code>/data/navidrome/music</code> 目录到容器的 <code>/downloads</code> 目录。</li>
<li><code>command: "-r -z -u -q -p 8080 -a admin:dream13889 /downloads"</code>：运行 <code>miniserve</code> 命令。</li>
<li><code>-r</code>: 递归显示目录。</li>
<li><code>-z</code>: 启用压缩下载。</li>
<li><code>-u</code>: 显示上传按钮。</li>
<li><code>-q</code>: 启用安静模式，减少日志输出。</li>
<li><code>-p 8080</code>: 指定端口为 8080。</li>
<li><code>-a admin:dream13889</code>: 设置基本身份验证，用户名为 <code>admin</code>，密码为 <code>dream13889</code>。</li>
<li><code>/downloads</code>: 指定要共享的目录。</li>
</ul>
<h3 id="4网络定义_4">4.网络定义<a class="headerlink" href="#4网络定义_4" title="Permanent link">&para;</a></h3>
<ul>
<li><code>music_network</code>：定义了一个名为 <code>music_network</code> 的自定义网络，供 <code>navidrome</code> 和 <code>miniserve</code> 服务使用。</li>
<li><code>name</code>：设置自定义网络名称，这里定义为<code>music_network</code>，如果不配置<code>name</code>参数，只指定了自定义网络，Docker Compose 会将该名称与项目名称（project name）结合起来作为实际创建的网络的名称，项目名称通常是当前目录的名称，比如上面的配置文件中如果不添加<code>name</code>参数后，最终创建的网络名称会是 <code>music_music_network</code>。</li>
<li><code>ipam</code>：IP 地址管理。</li>
<li><code>driver: default</code>：使用默认驱动<code>bridge</code>。</li>
<li><code>config: - subnet</code>：设置子网为 <code>172.101.0.0/16</code>。</li>
</ul>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-11-21</span>
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../deploy-reader%20%26%20music/%E9%85%8D%E7%BD%AE%20TTS-Server%E8%AF%AD%E9%9F%B3%2BLegado%E9%98%85%E8%AF%BB/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 配置 TTS-Server语音+Legado阅读">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                配置 TTS-Server语音+Legado阅读
              </div>
            </div>
          </a>
        
        
          
          <a href="../docker%20%E5%AE%89%E8%A3%85KeyManager/" class="md-footer__link md-footer__link--next" aria-label="下一页: docker 安装KeyManager">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                docker 安装KeyManager
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
  
    <div class="md-copyright__highlight">
      版权所有 © 2023-2024 | <a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">粤ICP备2024253391号</a>
    </div>
  
  
    <script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3JIbgFniDcGIaNP7/quote.js?theme=#FFFFFF,#808080,#808080,#B3B3B3,#FFFFFF,#1690FF,12&f=12&display=0,0,1,1,1,1,1,1"></script>
    <!--Made with
    <a
      href="https://squidfunk.github.io/mkdocs-material/"
      target="_blank" rel="noopener"
    >
      Material for MkDocs
    </a> | <a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">粤ICP备16023717号</a-->
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.google.com/" target="_blank" rel="noopener" title="Google" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linux.org/" target="_blank" rel="noopener" title="Linux" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.tracking", "navigation.indexes", "navigation.sections", "navigation.expand", "navigation.prune", "navigation.path", "toc.follow", "navigation.top", "search.suggest", "search.highlight", "search.share", "navigation.footer", "content.code.copy", "content.action.view"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.af256bd8.min.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.bootcss.com/mathjax/3.0.5/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>