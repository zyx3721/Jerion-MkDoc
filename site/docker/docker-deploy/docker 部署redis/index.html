
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录相关知识，沉淀生活，记录点滴。">
      
      
        <meta name="author" content="Jerion">
      
      
        <link rel="canonical" href="https://jerion.cn/docker/docker-deploy/docker%20%E9%83%A8%E7%BD%B2redis/">
      
      
        <link rel="prev" href="../docker%20%E9%83%A8%E7%BD%B2redis%20-%20%E5%89%AF%E6%9C%AC/">
      
      
        <link rel="next" href="../docker%20%E9%83%A8%E7%BD%B2smokeping/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS 订阅" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="已更新内容的 RSS 订阅" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.33">
    
    
      
        <title>docker 部署redis - Jerion's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Microsoft+Yahei:300,300i,400,400i,700,700i%7CConsolas,Courier,courier+new,stkaiti,kaiti,simkai,monospace:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Microsoft Yahei";--md-code-font:"Consolas,Courier,courier new,stkaiti,kaiti,simkai,monospace"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <script async src="https://umami.weiyan.cc/script.js" data-website-id="b713abc7-f5eb-4683-a132-9fda53e29198"></script>
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3JIbgFniDcGIaNP7",ck:"3JIbgFniDcGIaNP7",autoTrack:true})</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
   <meta name="baidu-site-verification" content="codeva-hJH2gPjZkn" />

   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-部署redis" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Jerion&#39;s Blog" class="md-header__button md-logo" aria-label="Jerion's Blog" data-md-component="logo">
      
  <img src="../../../assets/octocat.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jerion's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              docker 部署redis
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="deep-orange"  aria-label="切换到暗色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到暗色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="deep-orange"  aria-label="切换到亮色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到亮色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zyx3721/Jerion-MkDoc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Jerion-MkDoc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
    
  
  博客

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux/Ansible/Ansible%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/" class="md-tabs__link">
          
  
    
  
  Linux

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../shell/" class="md-tabs__link">
          
  
    
  
  Shell

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../vmware/Esxi6.7%E5%AE%89%E8%A3%85MacOS%2010.15.6/" class="md-tabs__link">
          
  
    
  
  VMware

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../python/Python%E5%8F%8APycharm%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" class="md-tabs__link">
          
  
    
  
  Python

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../deploy-blog/docker%20%E5%AE%89%E8%A3%85typecho%E5%8D%9A%E5%AE%A2/" class="md-tabs__link">
          
  
    
  
  Docker

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../routeswitch/Cisio/%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1/" class="md-tabs__link">
          
  
    
  
  路由交换

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../synology/VSP%20%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96/" class="md-tabs__link">
          
  
    
  
  群晖

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../sql/PostgreSQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" class="md-tabs__link">
          
  
    
  
  数据库

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../bat/git/" class="md-tabs__link">
          
  
    
  
  批处理

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../k8s/" class="md-tabs__link">
          
  
    
  
  K8S

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../git/Git/Git%20Extensions%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" class="md-tabs__link">
          
  
    
  
  Git

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../essay/" class="md-tabs__link">
          
  
    
  
  随笔

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Jerion&#39;s Blog" class="md-nav__button md-logo" aria-label="Jerion's Blog" data-md-component="logo">
      
  <img src="../../../assets/octocat.jpg" alt="logo">

    </a>
    Jerion's Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zyx3721/Jerion-MkDoc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Jerion-MkDoc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../blog/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    博客
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../linux/Ansible/Ansible%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Linux
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../shell/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Shell
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../vmware/Esxi6.7%E5%AE%89%E8%A3%85MacOS%2010.15.6/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    VMware
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../python/Python%E5%8F%8APycharm%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Python
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
          
        
      
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Docker
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" checked>
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Docker deploy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            Docker deploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../deploy-blog/docker%20%E5%AE%89%E8%A3%85typecho%E5%8D%9A%E5%AE%A2/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Deploy blog
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../deploy-reader%20%26%20music/docker%20%E9%83%A8%E7%BD%B2Koodo%20Reader/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Deploy reader & music
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20compose%E5%AE%89%E8%A3%85%E5%8F%8A%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker compose安装及参数说明
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E5%AE%89%E8%A3%85KeyManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 安装KeyManager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2IT-Tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署IT-Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2django/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署django
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2dockerNAS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署dockerNAS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2gitlab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署gitlab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2itops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署itops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2jumpserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署jumpserver-v2.8.4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2jupyter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署jupyter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2redis%20-%20%E5%89%AF%E6%9C%AC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署redis - 副本
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    docker 部署redis
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    docker 部署redis
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#一拉取redis镜像" class="md-nav__link">
    <span class="md-ellipsis">
      一、拉取Redis镜像
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#二redis安装" class="md-nav__link">
    <span class="md-ellipsis">
      二、Redis安装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、Redis安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1简单版redis" class="md-nav__link">
    <span class="md-ellipsis">
      （1）简单版Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2实际应用版redis" class="md-nav__link">
    <span class="md-ellipsis">
      （2）实际应用版Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3集群部署redis" class="md-nav__link">
    <span class="md-ellipsis">
      （3）集群部署Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="（3）集群部署Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1启动6台redis容器" class="md-nav__link">
    <span class="md-ellipsis">
      1、启动6台redis容器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2构建主从关系" class="md-nav__link">
    <span class="md-ellipsis">
      2、构建主从关系
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3查看集群状态" class="md-nav__link">
    <span class="md-ellipsis">
      3、查看集群状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4集群读写出错" class="md-nav__link">
    <span class="md-ellipsis">
      4、集群读写出错
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5检查集群信息" class="md-nav__link">
    <span class="md-ellipsis">
      5、检查集群信息
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6主从扩容" class="md-nav__link">
    <span class="md-ellipsis">
      6、主从扩容
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7主从缩容" class="md-nav__link">
    <span class="md-ellipsis">
      7、主从缩容
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#三自定义配置文件启动redis" class="md-nav__link">
    <span class="md-ellipsis">
      三、自定义配置文件启动redis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#四redis客户端连接" class="md-nav__link">
    <span class="md-ellipsis">
      四、redis客户端连接
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#五扩展内容" class="md-nav__link">
    <span class="md-ellipsis">
      五、扩展内容
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2smokeping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署SmokePing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2wizard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署wizard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker%20%E9%83%A8%E7%BD%B2zabbix6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 部署zabbix6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell一键部署docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Docker note
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Docker note
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/1%20docker%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker概念
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/2%20docker%E5%AE%89%E8%A3%85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker安装
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/3.1%20docker%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker下载加速
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/3.2%20Registry%E6%90%AD%E5%BB%BAdocker%E7%A7%81%E4%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registry搭建docker私仓
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/3.3%20%E5%B0%86%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将镜像推送到阿里云
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/4%20%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    镜像命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/5%20%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    容器命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/6%20%E9%83%A8%E7%BD%B2mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署MySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/7%20%E9%83%A8%E7%BD%B2tomcat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署Tomcat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/9%20Dockerfile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dockerfile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/19.1%20%E9%83%A8%E7%BD%B2OpenLDAP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署OpenLDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/19.2%20%E9%83%A8%E7%BD%B2gogs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署Gogs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-note/19.3%20%E9%83%A8%E7%BD%B2chatgpt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署ChatGPT
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../routeswitch/Cisio/%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    路由交换
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../synology/VSP%20%E5%AE%89%E8%A3%85%E9%BB%91%E7%BE%A4%E6%99%96/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    群晖
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../sql/PostgreSQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    数据库
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../bat/git/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    批处理
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../k8s/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    K8S
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../git/Git/Git%20Extensions%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Git
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../essay/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    随笔
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#一拉取redis镜像" class="md-nav__link">
    <span class="md-ellipsis">
      一、拉取Redis镜像
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#二redis安装" class="md-nav__link">
    <span class="md-ellipsis">
      二、Redis安装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、Redis安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1简单版redis" class="md-nav__link">
    <span class="md-ellipsis">
      （1）简单版Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2实际应用版redis" class="md-nav__link">
    <span class="md-ellipsis">
      （2）实际应用版Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3集群部署redis" class="md-nav__link">
    <span class="md-ellipsis">
      （3）集群部署Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="（3）集群部署Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1启动6台redis容器" class="md-nav__link">
    <span class="md-ellipsis">
      1、启动6台redis容器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2构建主从关系" class="md-nav__link">
    <span class="md-ellipsis">
      2、构建主从关系
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3查看集群状态" class="md-nav__link">
    <span class="md-ellipsis">
      3、查看集群状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4集群读写出错" class="md-nav__link">
    <span class="md-ellipsis">
      4、集群读写出错
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5检查集群信息" class="md-nav__link">
    <span class="md-ellipsis">
      5、检查集群信息
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6主从扩容" class="md-nav__link">
    <span class="md-ellipsis">
      6、主从扩容
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7主从缩容" class="md-nav__link">
    <span class="md-ellipsis">
      7、主从缩容
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#三自定义配置文件启动redis" class="md-nav__link">
    <span class="md-ellipsis">
      三、自定义配置文件启动redis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#四redis客户端连接" class="md-nav__link">
    <span class="md-ellipsis">
      四、redis客户端连接
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#五扩展内容" class="md-nav__link">
    <span class="md-ellipsis">
      五、扩展内容
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  
    
      
    
    <a href="https://github.com/zyx3721/Jerion-MkDoc/raw/main/docs/docker/docker-deploy/docker 部署redis.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="docker-部署redis">docker 部署redis<a class="headerlink" href="#docker-部署redis" title="Permanent link">&para;</a></h1>
<p>Redis是一款开源的高性能键值存储数据库，广泛应用于缓存、队列、实时分析等场景。使用Docker部署Redis可以简化安装和配置过程，提高部署效率。本文将介绍如何使用Docker部署Redis，并提供更详细的扩展内容，让你能够更好地理解和应用Redis。</p>
<h2 id="一拉取redis镜像">一、拉取Redis镜像<a class="headerlink" href="#一拉取redis镜像" title="Permanent link">&para;</a></h2>
<p>以Redis 6.0.8为例，可以使用以下命令从Docker Hub上拉取Redis镜像：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span>pull<span class="w"> </span>redis:6.0.8
</code></pre></div>
<h2 id="二redis安装">二、Redis安装<a class="headerlink" href="#二redis安装" title="Permanent link">&para;</a></h2>
<h3 id="1简单版redis">（1）简单版Redis<a class="headerlink" href="#1简单版redis" title="Permanent link">&para;</a></h3>
<p><strong>1、简单版Redis容器的创建启动</strong></p>
<p>命令如下：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>:6379<span class="w"> </span>-d<span class="w"> </span>redis:6.0.8
</code></pre></div>
<p>简单版Redis没有配置容器卷映射，当容器被删除时数据无法恢复。适用于测试和开发环境。</p>
<p><strong>2、连接redis容器</strong></p>
<p>执行命令<code>`docker exec -it 容器id /bin/bash</code>连接容器（容器id获取：docker ps）</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><a href="#__codelineno-2-1"><span class="linenos" data-linenos="1 "></span></a>docker exec -it 8009fd9e4739 /bin/bash
</code></pre></div>
<p><strong>3、操作redis测试</strong></p>
<p>将键&rdquo;username&rdquo;的值设置为&rdquo;scott&rdquo;，并返回&rdquo;OK&rdquo;表示设置成功。</p>
<p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><a href="#__codelineno-3-1"><span class="linenos" data-linenos="1 "></span></a>127.0.0.1:6379&gt; set username scott
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><a href="#__codelineno-3-2"><span class="linenos" data-linenos="2 "></span></a>OK
</code></pre></div>
获取键&rdquo;username&rdquo;的值，并返回&rdquo;scott&rdquo;，表示成功获取到了之前设置的值。</p>
<p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a>127.0.0.1:6379&gt; get username
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><a href="#__codelineno-4-2"><span class="linenos" data-linenos="2 "></span></a>&quot;scott&quot;
</code></pre></div>
删除键&rdquo;username&rdquo;，并返回整数1，表示成功删除了一个键。</p>
<p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos="1 "></span></a>127.0.0.1:6379&gt; del username
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><a href="#__codelineno-5-2"><span class="linenos" data-linenos="2 "></span></a>(integer) 1
</code></pre></div>
通过以上操作，成功地连接到Redis，并进行了设置值、获取值和删除键的操作。</p>
<h3 id="2实际应用版redis">（2）实际应用版Redis<a class="headerlink" href="#2实际应用版redis" title="Permanent link">&para;</a></h3>
<p>实际应用中，我们通常需要将Redis的配置文件和数据文件与宿主机进行映射，以便于配置和数据的管理。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>在宿主机上创建目录，用于存放Redis的配置文件和数据文件：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><a href="#__codelineno-6-1"><span class="linenos" data-linenos="1 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/app/redis
</code></pre></div>
<ol>
<li>
<p>在/app/redis目录下创建文件redis.conf，并进行相应的配置修改。以下是一些常用的配置项：</p>
</li>
<li>
<p>开启密码验证（可选）：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a>requirepass 123
</code></pre></div>
</li>
<li>
<p>允许Redis外部连接，需要注释掉绑定的IP：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><a href="#__codelineno-8-1"><span class="linenos" data-linenos="1 "></span></a># bind 127.0.0.1
</code></pre></div>
</li>
<li>
<p>关闭保护模式（可选）：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><a href="#__codelineno-9-1"><span class="linenos" data-linenos="1 "></span></a>protected-mode no
</code></pre></div>
</li>
<li>
<p>注释掉daemonize yes，或者配置成daemonize no。因为该配置和docker run中的-d参数冲突，会导致容器一直启动失败：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><a href="#__codelineno-10-1"><span class="linenos" data-linenos="1 "></span></a>daemonize no
</code></pre></div>
</li>
<li>
<p>开启Redis数据持久化（可选）：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><a href="#__codelineno-11-1"><span class="linenos" data-linenos="1 "></span></a>appendonly yes
</code></pre></div>
</li>
</ol>
<p>最终的配置文件内容如下：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><a href="#__codelineno-12-1"><span class="linenos" data-linenos=" 1 "></span></a># 开启密码验证（可选）
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><a href="#__codelineno-12-2"><span class="linenos" data-linenos=" 2 "></span></a>requirepass 123
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><a href="#__codelineno-12-3"><span class="linenos" data-linenos=" 3 "></span></a># 允许Redis外部连接，需要注释掉绑定的IP
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><a href="#__codelineno-12-4"><span class="linenos" data-linenos=" 4 "></span></a># bind 127.0.0.1
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><a href="#__codelineno-12-5"><span class="linenos" data-linenos=" 5 "></span></a># 关闭保护模式（可选）
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><a href="#__codelineno-12-6"><span class="linenos" data-linenos=" 6 "></span></a>protected-mode no
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><a href="#__codelineno-12-7"><span class="linenos" data-linenos=" 7 "></span></a># 注释掉daemonize yes，或者配置成daemonize no。因为该配置和docker run中的-d参数冲突，会导致容器一直启动失败
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><a href="#__codelineno-12-8"><span class="linenos" data-linenos=" 8 "></span></a>daemonize no
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><a href="#__codelineno-12-9"><span class="linenos" data-linenos=" 9 "></span></a># 开启Redis数据持久化（可选）
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><a href="#__codelineno-12-10"><span class="linenos" data-linenos="10 "></span></a>appendonly yes
</code></pre></div>
<ol>
<li>启动Redis容器，并指定容器运行的命令为<code>redis-server</code>以使用自定义的配置文件：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><a href="#__codelineno-13-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>:6379<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><a href="#__codelineno-13-2"><span class="linenos" data-linenos="2 "></span></a>--name<span class="w"> </span>redis<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><a href="#__codelineno-13-3"><span class="linenos" data-linenos="3 "></span></a>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><a href="#__codelineno-13-4"><span class="linenos" data-linenos="4 "></span></a>-v<span class="w"> </span>/app/redis/redis.conf:/etc/redis/redis.conf<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><a href="#__codelineno-13-5"><span class="linenos" data-linenos="5 "></span></a>-v<span class="w"> </span>/app/redis/data:/data<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><a href="#__codelineno-13-6"><span class="linenos" data-linenos="6 "></span></a>redis:6.0.8<span class="w"> </span>redis-server<span class="w"> </span>/etc/redis/redis.conf
</code></pre></div>
<p>通过上述命令，我们将Redis容器的6379端口映射到宿主机的6379端口，同时将配置文件和数据文件与宿主机进行映射。这样，我们可以方便地修改配置和管理数据。</p>
<p>以上就是使用Docker部署Redis的简单步骤。接下来，我们可以进一步了解Redis的高可用部署、集群模式等内容，以满足不同场景的需求。</p>
<h3 id="3集群部署redis">（3）集群部署Redis<a class="headerlink" href="#3集群部署redis" title="Permanent link">&para;</a></h3>
<p><strong>搭建3主3从的Redis集群，每台主机都对应一台从机。</strong></p>
<h4 id="1启动6台redis容器">1、启动6台redis容器<a class="headerlink" href="#1启动6台redis容器" title="Permanent link">&para;</a></h4>
<p>启动6台节点的命令：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><a href="#__codelineno-14-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1"># 启动第1台节点</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><a href="#__codelineno-14-2"><span class="linenos" data-linenos=" 2 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>redis-node-1<span class="w"> </span>--net<span class="w"> </span>host<span class="w"> </span>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-v<span class="w"> </span>/app/redis-cluster/share/redis-node-1:/data<span class="w"> </span>redis:6.0.8<span class="w"> </span>--cluster-enabled<span class="w"> </span>yes<span class="w"> </span>--appendonly<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">6381</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><a href="#__codelineno-14-3"><span class="linenos" data-linenos=" 3 "></span></a>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><a href="#__codelineno-14-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="c1"># 启动第2台节点</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><a href="#__codelineno-14-5"><span class="linenos" data-linenos=" 5 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>redis-node-2<span class="w"> </span>--net<span class="w"> </span>host<span class="w"> </span>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-v<span class="w"> </span>/app/redis-cluster/share/redis-node-2:/data<span class="w"> </span>redis:6.0.8<span class="w"> </span>--cluster-enabled<span class="w"> </span>yes<span class="w"> </span>--appendonly<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">6382</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><a href="#__codelineno-14-6"><span class="linenos" data-linenos=" 6 "></span></a>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><a href="#__codelineno-14-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="c1"># 启动第3台节点</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><a href="#__codelineno-14-8"><span class="linenos" data-linenos=" 8 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>redis-node-3<span class="w"> </span>--net<span class="w"> </span>host<span class="w"> </span>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-v<span class="w"> </span>/app/redis-cluster/share/redis-node-3:/data<span class="w"> </span>redis:6.0.8<span class="w"> </span>--cluster-enabled<span class="w"> </span>yes<span class="w"> </span>--appendonly<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">6383</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><a href="#__codelineno-14-9"><span class="linenos" data-linenos=" 9 "></span></a>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><a href="#__codelineno-14-10"><span class="linenos" data-linenos="10 "></span></a><span class="c1"># 启动第4台节点</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><a href="#__codelineno-14-11"><span class="linenos" data-linenos="11 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>redis-node-4<span class="w"> </span>--net<span class="w"> </span>host<span class="w"> </span>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-v<span class="w"> </span>/app/redis-cluster/share/redis-node-4:/data<span class="w"> </span>redis:6.0.8<span class="w"> </span>--cluster-enabled<span class="w"> </span>yes<span class="w"> </span>--appendonly<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">6384</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><a href="#__codelineno-14-12"><span class="linenos" data-linenos="12 "></span></a>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><a href="#__codelineno-14-13"><span class="linenos" data-linenos="13 "></span></a><span class="c1"># 启动第5台节点</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><a href="#__codelineno-14-14"><span class="linenos" data-linenos="14 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>redis-node-5<span class="w"> </span>--net<span class="w"> </span>host<span class="w"> </span>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-v<span class="w"> </span>/app/redis-cluster/share/redis-node-5:/data<span class="w"> </span>redis:6.0.8<span class="w"> </span>--cluster-enabled<span class="w"> </span>yes<span class="w"> </span>--appendonly<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">6385</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><a href="#__codelineno-14-15"><span class="linenos" data-linenos="15 "></span></a>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><a href="#__codelineno-14-16"><span class="linenos" data-linenos="16 "></span></a><span class="c1"># 启动第6台节点</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><a href="#__codelineno-14-17"><span class="linenos" data-linenos="17 "></span></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>redis-node-6<span class="w"> </span>--net<span class="w"> </span>host<span class="w"> </span>--privileged<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-v<span class="w"> </span>/app/redis-cluster/share/redis-node-6:/data<span class="w"> </span>redis:6.0.8<span class="w"> </span>--cluster-enabled<span class="w"> </span>yes<span class="w"> </span>--appendonly<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">6386</span>
</code></pre></div>
<p>这条命令将启动第2台Redis节点，并配置它作为Redis集群的一部分。参数解释如下：</p>
<ul>
<li><code>-d</code>：以后台模式运行容器。</li>
<li><code>--name redis-node-xx</code>：指定容器的名称为redis-node xx。</li>
<li><code>--net host</code>：使用宿主机的网络设置。</li>
<li><code>--privileged=true</code>：在容器内启用特权模式，以便容器可以执行一些特权操作。</li>
<li><code>-v /app/redis-cluster/share/redis-node-2:/data</code>：将宿主机的<code>/app/redis-cluster/share/redis-node-2</code>目录映射到容器内的<code>/data</code>目录，用于持久化Redis数据。</li>
<li><code>redis:6.0.8</code>：使用Redis 6.0.8镜像。</li>
<li><code>--cluster-enabled yes</code>：开启Redis集群模式。</li>
<li><code>--appendonly yes</code>：开启Redis的AOF持久化。</li>
<li><code>--port 6382</code>：配置Redis节点的端口号为6382。</li>
</ul>
<p>通过运行以上命令，你将成功启动第2台Redis节点，并使其成为Redis集群的一部分。你可以根据需要修改命令中的参数来启动其他节点。</p>
<h4 id="2构建主从关系">2、构建主从关系<a class="headerlink" href="#2构建主从关系" title="Permanent link">&para;</a></h4>
<p>接下来是构建主从关系的步骤：</p>
<ol>
<li>首先，进入任意一个节点（这里以节点1为例）：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><a href="#__codelineno-15-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>redis-node-1<span class="w"> </span>/bin/bash
</code></pre></div>
<ol>
<li>在节点1的容器中，执行以下命令来构建主从关系：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli<span class="w"> </span>--cluster<span class="w"> </span>create<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6381<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6382<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6383<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6384<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6385<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6386<span class="w"> </span>--cluster-replicas<span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>其中，<code>192.168.xxx.xxx</code>是宿主机的IP地址，后面的端口号分别对应每个节点的Redis端口号。<code>--cluster-replicas 1</code>表示为每个主节点创建一个从节点。</p>
<ol>
<li>
<p>执行上述命令后，Redis会尝试自动进行主从节点的分配。由于我们在Docker容器中使用的IP地址相同，可能会出现警告，但可以忽略该警告。</p>
</li>
<li>
<p>当Redis完成自动分配后，会显示分配结果，需要输入<code>Yes</code>确认配置信息。</p>
</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><a href="#__codelineno-17-1"><span class="linenos" data-linenos=" 1 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Performing<span class="w"> </span><span class="nb">hash</span><span class="w"> </span>slots<span class="w"> </span>allocation<span class="w"> </span>on<span class="w"> </span><span class="m">6</span><span class="w"> </span>nodes...
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><a href="#__codelineno-17-2"><span class="linenos" data-linenos=" 2 "></span></a>Master<span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w"> </span>-&gt;<span class="w"> </span>Slots<span class="w"> </span><span class="m">0</span><span class="w"> </span>-<span class="w"> </span><span class="m">5460</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><a href="#__codelineno-17-3"><span class="linenos" data-linenos=" 3 "></span></a>Master<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>-&gt;<span class="w"> </span>Slots<span class="w"> </span><span class="m">5461</span><span class="w"> </span>-<span class="w"> </span><span class="m">10922</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><a href="#__codelineno-17-4"><span class="linenos" data-linenos=" 4 "></span></a>Master<span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span>-&gt;<span class="w"> </span>Slots<span class="w"> </span><span class="m">10923</span><span class="w"> </span>-<span class="w"> </span><span class="m">16383</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><a href="#__codelineno-17-5"><span class="linenos" data-linenos=" 5 "></span></a>Adding<span class="w"> </span>replica<span class="w"> </span><span class="m">192</span>.168.31.223:6385<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.31.223:6381
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><a href="#__codelineno-17-6"><span class="linenos" data-linenos=" 6 "></span></a>Adding<span class="w"> </span>replica<span class="w"> </span><span class="m">192</span>.168.31.223:6386<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.31.223:6382
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><a href="#__codelineno-17-7"><span class="linenos" data-linenos=" 7 "></span></a>Adding<span class="w"> </span>replica<span class="w"> </span><span class="m">192</span>.168.31.223:6384<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.31.223:6383
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><a href="#__codelineno-17-8"><span class="linenos" data-linenos=" 8 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Trying<span class="w"> </span>to<span class="w"> </span>optimize<span class="w"> </span>slaves<span class="w"> </span>allocation<span class="w"> </span><span class="k">for</span><span class="w"> </span>anti-affinity
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><a href="#__codelineno-17-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>Some<span class="w"> </span>slaves<span class="w"> </span>are<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>host<span class="w"> </span>as<span class="w"> </span>their<span class="w"> </span>master
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><a href="#__codelineno-17-10"><span class="linenos" data-linenos="10 "></span></a>M:<span class="w"> </span>0c54ff47b1cb373485bfbdd964a618ecea76bb29<span class="w"> </span><span class="m">192</span>.168.31.223:6381<span class="w">   </span>slots:<span class="o">[</span><span class="m">0</span>-5460<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5461</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><a href="#__codelineno-17-11"><span class="linenos" data-linenos="11 "></span></a>M:<span class="w"> </span>703a1f294087c009d04eda5acf2c4255ce14c28a<span class="w"> </span><span class="m">192</span>.168.31.223:6382<span class="w">   </span>slots:<span class="o">[</span><span class="m">5461</span>-10922<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5462</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><a href="#__codelineno-17-12"><span class="linenos" data-linenos="12 "></span></a>M:<span class="w"> </span>30e2409b3031a0c927efe75b56909bec5281c3d8<span class="w"> </span><span class="m">192</span>.168.31.223:6383<span class="w">   </span>slots:<span class="o">[</span><span class="m">10923</span>-16383<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5461</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><a href="#__codelineno-17-13"><span class="linenos" data-linenos="13 "></span></a>S:<span class="w"> </span>03d3bd91c1df1e618a5b887b24b510466efa55a3<span class="w"> </span><span class="m">192</span>.168.31.223:6384<span class="w">   </span>replicates<span class="w"> </span>30e2409b3031a0c927efe75b56909bec5281c3d8
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><a href="#__codelineno-17-14"><span class="linenos" data-linenos="14 "></span></a>S:<span class="w"> </span>fef4eee9045d7c434c3f22b36eb16391f1078f59<span class="w"> </span><span class="m">192</span>.168.31.223:6385<span class="w">   </span>replicates<span class="w"> </span>0c54ff47b1cb373485bfbdd964a618ecea76bb29
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><a href="#__codelineno-17-15"><span class="linenos" data-linenos="15 "></span></a>S:<span class="w"> </span>44950ffde9147011c424e906a0e1f001c1c17a71<span class="w"> </span><span class="m">192</span>.168.31.223:6386<span class="w">   </span>replicates<span class="w"> </span>703a1f294087c009d04eda5acf2c4255ce14c28a
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><a href="#__codelineno-17-16"><span class="linenos" data-linenos="16 "></span></a>Can<span class="w"> </span>I<span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>above<span class="w"> </span>configuration?<span class="w"> </span><span class="o">(</span><span class="nb">type</span><span class="w"> </span><span class="s1">&#39;yes&#39;</span><span class="w"> </span>to<span class="w"> </span>accept<span class="o">)</span>:<span class="w"> </span>yes
</code></pre></div>
<ol>
<li>在确认配置信息后，Redis会向其他节点发送信息加入集群，并分配哈希槽。</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><a href="#__codelineno-18-1"><span class="linenos" data-linenos=" 1 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Nodes<span class="w"> </span>configuration<span class="w"> </span>updated
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><a href="#__codelineno-18-2"><span class="linenos" data-linenos=" 2 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Assign<span class="w"> </span>a<span class="w"> </span>different<span class="w"> </span>config<span class="w"> </span>epoch<span class="w"> </span>to<span class="w"> </span>each<span class="w"> </span>node
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><a href="#__codelineno-18-3"><span class="linenos" data-linenos=" 3 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Sending<span class="w"> </span>CLUSTER<span class="w"> </span>MEET<span class="w"> </span>messages<span class="w"> </span>to<span class="w"> </span>join<span class="w"> </span>the<span class="w"> </span>cluster
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><a href="#__codelineno-18-4"><span class="linenos" data-linenos=" 4 "></span></a>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>cluster<span class="w"> </span>to<span class="w"> </span>join<span class="w"> </span>...
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><a href="#__codelineno-18-5"><span class="linenos" data-linenos=" 5 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Performing<span class="w"> </span>Cluster<span class="w"> </span>Check<span class="w"> </span><span class="o">(</span>using<span class="w"> </span>node<span class="w"> </span><span class="m">192</span>.168.31.223:6381<span class="o">)</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><a href="#__codelineno-18-6"><span class="linenos" data-linenos=" 6 "></span></a>M:<span class="w"> </span>0c54ff47b1cb373485bfbdd964a618ecea76bb29<span class="w"> </span><span class="m">192</span>.168.31.223:6381<span class="w">   </span>slots:<span class="o">[</span><span class="m">0</span>-5460<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5461</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master<span class="w">   </span><span class="m">1</span><span class="w"> </span>additional<span class="w"> </span>replica<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><a href="#__codelineno-18-7"><span class="linenos" data-linenos=" 7 "></span></a>M:<span class="w"> </span>703a1f294087c009d04eda5acf2c4255ce14c28a<span class="w"> </span><span class="m">192</span>.168.31.223:6382<span class="w">   </span>slots:<span class="o">[</span><span class="m">5461</span>-10922<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5462</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master<span class="w">   </span><span class="m">1</span><span class="w"> </span>additional<span class="w"> </span>replica<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><a href="#__codelineno-18-8"><span class="linenos" data-linenos=" 8 "></span></a>S:<span class="w"> </span>03d3bd91c1df1e618a5b887b24b510466efa55a3<span class="w"> </span><span class="m">192</span>.168.31.223:6384<span class="w">   </span>slots:<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>slave<span class="w">   </span>replicates<span class="w"> </span>30e2409b3031a0c927efe75b56909bec5281c3d8
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><a href="#__codelineno-18-9"><span class="linenos" data-linenos=" 9 "></span></a>S:<span class="w"> </span>44950ffde9147011c424e906a0e1f001c1c17a71<span class="w"> </span><span class="m">192</span>.168.31.223:6386<span class="w">   </span>slots:<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>slave<span class="w">   </span>replicates<span class="w"> </span>703a1f294087c009d04eda5acf2c4255ce14c28a
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><a href="#__codelineno-18-10"><span class="linenos" data-linenos="10 "></span></a>M:<span class="w"> </span>30e2409b3031a0c927efe75b56909bec5281c3d8<span class="w"> </span><span class="m">192</span>.168.31.223:6383<span class="w">   </span>slots:<span class="o">[</span><span class="m">10923</span>-16383<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5461</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master<span class="w">   </span><span class="m">1</span><span class="w"> </span>additional<span class="w"> </span>replica<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><a href="#__codelineno-18-11"><span class="linenos" data-linenos="11 "></span></a>S:<span class="w"> </span>fef4eee9045d7c434c3f22b36eb16391f1078f59<span class="w"> </span><span class="m">192</span>.168.31.223:6385<span class="w">   </span>slots:<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>slave<span class="w">   </span>replicates<span class="w"> </span>0c54ff47b1cb373485bfbdd964a618ecea76bb29
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><a href="#__codelineno-18-12"><span class="linenos" data-linenos="12 "></span></a><span class="o">[</span>OK<span class="o">]</span><span class="w"> </span>All<span class="w"> </span>nodes<span class="w"> </span>agree<span class="w"> </span>about<span class="w"> </span>slots<span class="w"> </span>configuration.
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><a href="#__codelineno-18-13"><span class="linenos" data-linenos="13 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Check<span class="w"> </span><span class="k">for</span><span class="w"> </span>open<span class="w"> </span>slots...
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><a href="#__codelineno-18-14"><span class="linenos" data-linenos="14 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Check<span class="w"> </span>slots<span class="w"> </span>coverage...
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><a href="#__codelineno-18-15"><span class="linenos" data-linenos="15 "></span></a><span class="o">[</span>OK<span class="o">]</span><span class="w"> </span>All<span class="w"> </span><span class="m">16384</span><span class="w"> </span>slots<span class="w"> </span>covered.
</code></pre></div>
<p>完成以上步骤后，你将成功构建了一个包含3个主节点和3个从节点的Redis集群，并完成了主从关系的配置。你可以根据需要修改命令中的IP地址和端口号来适应你的环境。</p>
<h4 id="3查看集群状态">3、查看集群状态<a class="headerlink" href="#3查看集群状态" title="Permanent link">&para;</a></h4>
<p>查看集群状态的步骤：</p>
<ol>
<li>首先，进入任意一个节点（这里以节点1为例）：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><a href="#__codelineno-19-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>redis-node-1<span class="w"> </span>/bin/bash
</code></pre></div>
<ol>
<li>在节点1的容器中，使用以下命令连接到节点1的Redis实例（端口号为6381）：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><a href="#__codelineno-20-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6381</span>
</code></pre></div>
<ol>
<li>使用Redis的相关命令来查看集群状态：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><a href="#__codelineno-21-1"><span class="linenos" data-linenos="1 "></span></a>cluster<span class="w"> </span>info
</code></pre></div>
<p>执行上述命令后，将显示集群的状态信息，包括分配的哈希槽数量、集群节点数量等：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><a href="#__codelineno-22-1"><span class="linenos" data-linenos=" 1 "></span></a>cluster_state:ok
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><a href="#__codelineno-22-2"><span class="linenos" data-linenos=" 2 "></span></a>cluster_slots_assigned:16384
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><a href="#__codelineno-22-3"><span class="linenos" data-linenos=" 3 "></span></a>cluster_slots_ok:16384
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><a href="#__codelineno-22-4"><span class="linenos" data-linenos=" 4 "></span></a>cluster_slots_pfail:0
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><a href="#__codelineno-22-5"><span class="linenos" data-linenos=" 5 "></span></a>cluster_slots_fail:0
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><a href="#__codelineno-22-6"><span class="linenos" data-linenos=" 6 "></span></a>cluster_known_nodes:6
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><a href="#__codelineno-22-7"><span class="linenos" data-linenos=" 7 "></span></a>cluster_size:3
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><a href="#__codelineno-22-8"><span class="linenos" data-linenos=" 8 "></span></a>cluster_current_epoch:6
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><a href="#__codelineno-22-9"><span class="linenos" data-linenos=" 9 "></span></a>cluster_my_epoch:1
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><a href="#__codelineno-22-10"><span class="linenos" data-linenos="10 "></span></a>cluster_stats_messages_ping_sent:560
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><a href="#__codelineno-22-11"><span class="linenos" data-linenos="11 "></span></a>cluster_stats_messages_pong_sent:564
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><a href="#__codelineno-22-12"><span class="linenos" data-linenos="12 "></span></a>cluster_stats_messages_sent:1124
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><a href="#__codelineno-22-13"><span class="linenos" data-linenos="13 "></span></a>cluster_stats_messages_ping_received:559
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><a href="#__codelineno-22-14"><span class="linenos" data-linenos="14 "></span></a>cluster_stats_messages_pong_received:560
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><a href="#__codelineno-22-15"><span class="linenos" data-linenos="15 "></span></a>cluster_stats_messages_meet_received:5
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><a href="#__codelineno-22-16"><span class="linenos" data-linenos="16 "></span></a>cluster_stats_messages_received:1124
</code></pre></div>
<ol>
<li>如果想查看集群的节点信息，可以使用以下命令：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><a href="#__codelineno-23-1"><span class="linenos" data-linenos="1 "></span></a>cluster<span class="w"> </span>nodes
</code></pre></div>
<p>执行上述命令后，将显示集群中所有节点的信息，包括节点的ID、IP地址、端口号等。</p>
<p>通过以上步骤，你可以查看Redis集群的状态信息和节点信息，以确保集</p>
<h4 id="4集群读写出错">4、集群读写出错<a class="headerlink" href="#4集群读写出错" title="Permanent link">&para;</a></h4>
<p>处理集群读写出错的步骤：</p>
<ol>
<li>首先，进入任意一个节点（这里以节点1为例）：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><a href="#__codelineno-24-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>redis-node-1<span class="w"> </span>/bin/bash
</code></pre></div>
<ol>
<li>在节点1的容器中，使用以下命令连接到节点1的Redis实例（端口号为6381），并不加<code>-c</code>参数：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><a href="#__codelineno-25-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6381</span>
</code></pre></div>
<ol>
<li>在没有使用<code>-c</code>参数的情况下，尝试向Redis中添加键值对，可能会成功，也可能会失败。举例来说，执行以下命令：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><a href="#__codelineno-26-1"><span class="linenos" data-linenos="1 "></span></a><span class="nb">set</span><span class="w"> </span>k1<span class="w"> </span>v1
</code></pre></div>
<p>如果键<code>k1</code>经过计算得到的哈希槽为12706，但当前连接的Redis服务器为6381（即节点1），它的哈希槽范围是[0,5460]（在创建构建主从关系时Redis有提示，也可以通过<code>cluster nodes</code>查看），因此会因为不在范围内而报错。而执行<code>set k2 v2</code>可以成功，因为<code>k2</code>计算出的哈希槽在[0-5460]范围中。</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><a href="#__codelineno-27-1"><span class="linenos" data-linenos="1 "></span></a>127.0.0.1:6381&gt; set k1 v1
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><a href="#__codelineno-27-2"><span class="linenos" data-linenos="2 "></span></a>(error) MOVED 12706 192.168.31.223:6383
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><a href="#__codelineno-27-3"><span class="linenos" data-linenos="3 "></span></a>127.0.0.1:6381&gt; set k2 v2
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><a href="#__codelineno-27-4"><span class="linenos" data-linenos="4 "></span></a>OK
</code></pre></div>
<ol>
<li>为了解决这个问题，需要使用带有<code>-c</code>参数的<code>redis-cli</code>命令来连接集群。<code>-c</code>表示连接到集群，可以正常地插入所有数据。执行以下命令：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><a href="#__codelineno-28-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6381</span><span class="w"> </span>-c
</code></pre></div>
<p>连接成功后，可以执行命令插入数据，例如：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><a href="#__codelineno-29-1"><span class="linenos" data-linenos="1 "></span></a><span class="m">127</span>.0.0.1:6381&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k1<span class="w"> </span>v1
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><a href="#__codelineno-29-2"><span class="linenos" data-linenos="2 "></span></a>-&gt;<span class="w"> </span>Redirected<span class="w"> </span>to<span class="w"> </span>slot<span class="w"> </span><span class="o">[</span><span class="m">12706</span><span class="o">]</span><span class="w"> </span>located<span class="w"> </span>at<span class="w"> </span><span class="m">192</span>.168.31.223:6383
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><a href="#__codelineno-29-3"><span class="linenos" data-linenos="3 "></span></a>OK
</code></pre></div>
<p>会有提示信息显示，哈希槽为12706，重定向到6383（即节点3，哈希槽范围为[10923, 16383]）。这样就可以成功地插入数据了。</p>
<h4 id="5检查集群信息">5、检查集群信息<a class="headerlink" href="#5检查集群信息" title="Permanent link">&para;</a></h4>
<p>以下是检查集群信息的步骤：</p>
<ol>
<li>首先，进入任意一个节点（这里以节点1为例）：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><a href="#__codelineno-30-1"><span class="linenos" data-linenos="1 "></span></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>redis-node-1<span class="w"> </span>/bin/bash
</code></pre></div>
<ol>
<li>在节点1的容器中，使用以下命令来检查集群信息：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><a href="#__codelineno-31-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli<span class="w"> </span>--cluster<span class="w"> </span>check<span class="w"> </span><span class="m">192</span>.168.xxx.xxx:6381
</code></pre></div>
<p>其中，<code>192.168.xxx.xxx:6381</code>是任意一个主节点的地址，可以选择其中一个主节点进行检查。</p>
<ol>
<li>执行以上命令后，将返回集群的检查结果。例如：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><a href="#__codelineno-32-1"><span class="linenos" data-linenos="1 "></span></a><span class="m">192</span>.168.31.223:6381<span class="w"> </span><span class="o">(</span>0c54ff47...<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">1</span><span class="w"> </span>keys<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">5461</span><span class="w"> </span>slots<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>slaves.
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><a href="#__codelineno-32-2"><span class="linenos" data-linenos="2 "></span></a><span class="m">192</span>.168.31.223:6382<span class="w"> </span><span class="o">(</span>703a1f29...<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">0</span><span class="w"> </span>keys<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">5462</span><span class="w"> </span>slots<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>slaves.
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><a href="#__codelineno-32-3"><span class="linenos" data-linenos="3 "></span></a><span class="m">192</span>.168.31.223:6383<span class="w"> </span><span class="o">(</span>30e2409b...<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">1</span><span class="w"> </span>keys<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">5461</span><span class="w"> </span>slots<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>slaves.
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><a href="#__codelineno-32-4"><span class="linenos" data-linenos="4 "></span></a><span class="o">[</span>OK<span class="o">]</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>keys<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>masters.<span class="w"> </span><span class="m">0</span>.00<span class="w"> </span>keys<span class="w"> </span>per<span class="w"> </span>slot<span class="w"> </span>on<span class="w"> </span>average.
</code></pre></div>
<p>该结果显示了每个节点存储的键的数量、哈希槽的分布情况以及从节点的数量。</p>
<ol>
<li>检查主从关系的信息，执行以上命令后会显示主从节点的信息，例如：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><a href="#__codelineno-33-1"><span class="linenos" data-linenos="1 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Performing<span class="w"> </span>Cluster<span class="w"> </span>Check<span class="w"> </span><span class="o">(</span>using<span class="w"> </span>node<span class="w"> </span><span class="m">192</span>.168.31.223:6381<span class="o">)</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><a href="#__codelineno-33-2"><span class="linenos" data-linenos="2 "></span></a>M:<span class="w"> </span>0c54ff47b1cb373485bfbdd964a618ecea76bb29<span class="w"> </span><span class="m">192</span>.168.31.223:6381<span class="w">   </span>slots:<span class="o">[</span><span class="m">0</span>-5460<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5461</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master<span class="w">   </span><span class="m">1</span><span class="w"> </span>additional<span class="w"> </span>replica<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><a href="#__codelineno-33-3"><span class="linenos" data-linenos="3 "></span></a>M:<span class="w"> </span>703a1f294087c009d04eda5acf2c4255ce14c28a<span class="w"> </span><span class="m">192</span>.168.31.223:6382<span class="w">   </span>slots:<span class="o">[</span><span class="m">5461</span>-10922<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5462</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master<span class="w">   </span><span class="m">1</span><span class="w"> </span>additional<span class="w"> </span>replica<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><a href="#__codelineno-33-4"><span class="linenos" data-linenos="4 "></span></a>S:<span class="w"> </span>03d3bd91c1df1e618a5b887b24b510466efa55a3<span class="w"> </span><span class="m">192</span>.168.31.223:6384<span class="w">   </span>slots:<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>slave<span class="w">   </span>replicates<span class="w"> </span>30e2409b3031a0c927efe75b56909bec5281c3d8
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><a href="#__codelineno-33-5"><span class="linenos" data-linenos="5 "></span></a>S:<span class="w"> </span>44950ffde9147011c424e906a0e1f001c1c17a71<span class="w"> </span><span class="m">192</span>.168.31.223:6386<span class="w">   </span>slots:<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>slave<span class="w">   </span>replicates<span class="w"> </span>703a1f294087c009d04eda5acf2c4255ce14c28a
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><a href="#__codelineno-33-6"><span class="linenos" data-linenos="6 "></span></a>M:<span class="w"> </span>30e2409b3031a0c927efe75b56909bec5281c3d8<span class="w"> </span><span class="m">192</span>.168.31.223:6383<span class="w">   </span>slots:<span class="o">[</span><span class="m">10923</span>-16383<span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="m">5461</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>master<span class="w">   </span><span class="m">1</span><span class="w"> </span>additional<span class="w"> </span>replica<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><a href="#__codelineno-33-7"><span class="linenos" data-linenos="7 "></span></a>S:<span class="w"> </span>fef4eee9045d7c434c3f22b36eb16391f1078f59<span class="w"> </span><span class="m">192</span>.168.31.223:6385<span class="w">   </span>slots:<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>slots<span class="o">)</span><span class="w"> </span>slave<span class="w">   </span>replicates<span class="w"> </span>0c54ff47b1cb373485bfbdd964a618ecea76bb29
</code></pre></div>
<p>该结果显示了每个节点的角色（主节点或从节点）、哈希槽的范围、从节点的复制关系等信息。</p>
<ol>
<li>最后，检查哈希槽的覆盖情况，执行以上命令后会显示哈希槽的覆盖情况，例如：</li>
</ol>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><a href="#__codelineno-34-1"><span class="linenos" data-linenos="1 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Check<span class="w"> </span><span class="k">for</span><span class="w"> </span>open<span class="w"> </span>slots...
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><a href="#__codelineno-34-2"><span class="linenos" data-linenos="2 "></span></a>&gt;&gt;&gt;<span class="w"> </span>Check<span class="w"> </span>slots<span class="w"> </span>coverage...
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><a href="#__codelineno-34-3"><span class="linenos" data-linenos="3 "></span></a><span class="o">[</span>OK<span class="o">]</span><span class="w"> </span>All<span class="w"> </span><span class="m">16384</span><span class="w"> </span>slots<span class="w"> </span>covered.
</code></pre></div>
<p>该结果表示所有的16384个哈希槽都被覆盖了，没有未分配的哈希槽。</p>
<p>通过以上步骤，可以检查集群的信息、主从关系以及哈希槽的覆盖情况，确保集群正常运行。</p>
<h4 id="6主从扩容">6、主从扩容<a class="headerlink" href="#6主从扩容" title="Permanent link">&para;</a></h4>
<p>假设由于业务量激增，需要将当前的3主3从集群扩容，加入1个主节点和1个从节点。</p>
<p>以下是具体操作步骤：</p>
<ol>
<li>启动两个新的容器节点。</li>
</ol>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><a href="#__codelineno-35-1"><span class="linenos" data-linenos="1 "></span></a># 启动第7台节点
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><a href="#__codelineno-35-2"><span class="linenos" data-linenos="2 "></span></a>docker run -d --name redis-node-7 --net host --privileged=true -v /app/redis-cluster/share/redis-node-7:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6387
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><a href="#__codelineno-35-3"><span class="linenos" data-linenos="3 "></span></a>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><a href="#__codelineno-35-4"><span class="linenos" data-linenos="4 "></span></a># 启动第8台节点
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><a href="#__codelineno-35-5"><span class="linenos" data-linenos="5 "></span></a>docker run -d --name redis-node-8 --net host --privileged=true -v /app/redis-cluster/share/redis-node-8:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6388
</code></pre></div>
<ol>
<li>进入6387节点（第7台节点）的容器内部。</li>
</ol>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><a href="#__codelineno-36-1"><span class="linenos" data-linenos="1 "></span></a>docker exec -it redis-node-7 /bin/bash
</code></pre></div>
<ol>
<li>将6387节点作为主节点加入集群。</li>
</ol>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><a href="#__codelineno-37-1"><span class="linenos" data-linenos="1 "></span></a># 使用redis-cli命令将本节点加入到集群中的任一节点
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><a href="#__codelineno-37-2"><span class="linenos" data-linenos="2 "></span></a>redis-cli --cluster add-node 192.168.xxx.xxx:6387 192.168.xxx.xxx:6381
</code></pre></div>
<p>这里的<code>192.168.xxx.xxx:6387</code>是当前节点的地址，而<code>192.168.xxx.xxx:6381</code>是集群中的任一节点地址。</p>
<p>请注意，上述步骤中的IP地址和端口号需要根据实际情况进行替换。另外，对于第8台节点，可以按照相似的步骤将其加入集群。完成这些步骤后，你将成功扩容主从集群。</p>
<ol>
<li>检查当前集群状态</li>
</ol>
<p>运行以下命令来检查集群的状态：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><a href="#__codelineno-38-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre></div>
<p>这将显示集群的状态信息。在这里，你可以发现6387节点已经作为主节点成功加入了集群，但是该节点尚未被分配任何槽位。</p>
<ol>
<li>重新分配集群的槽位</li>
</ol>
<p>使用以下命令重新分配集群的槽位：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><a href="#__codelineno-39-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster reshard 192.168.xxx.xxx:6381
</code></pre></div>
<p>执行此命令后，Redis会提示你需要分配的槽位数量。例如，假设你现在有4个主节点，你想给node7分配4096个槽位，使得每个节点都有4096个槽位。输入4096后，Redis会要求你输入要接收这些哈希槽位的节点ID，填入node7的节点ID（节点ID是一长串十六进制字符串，如0abc6c68790b604e8a418a3f6f3bfd4ef442a3a0）即可。</p>
<p>接下来，Redis会询问你从哪些节点中拨出一部分槽位来凑足4096个槽位，以分配给Node7。一般选择&rdquo;all&rdquo;，即将之前的3个主节点的槽位均匀分配给Node7，以实现每个节点的槽位数均衡。输入&rdquo;all&rdquo;后，Redis会列出一个计划，显示自动从前面的3个主节点中拨出一部分槽位分配给Node7。你需要确认此分配计划。输入&rdquo;yes&rdquo;确认后，Redis将自动重新分配槽位，将其分配给Node7。</p>
<p>完成以上步骤后，Redis会重新洗牌并分配槽位，确保Node7获得了相应的槽位。</p>
<p>重新分配完成后，你可以运行以下命令检查集群信息，查看槽位的重新分配结果：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><a href="#__codelineno-40-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre></div>
<p>运行该命令后，你将看到槽位的重新分配情况。例如：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><a href="#__codelineno-41-1"><span class="linenos" data-linenos="1 "></span></a>192.168.31.223:6381 (0c54ff47...) -&gt; 0 keys | 4096 slots | 1 slaves.
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><a href="#__codelineno-41-2"><span class="linenos" data-linenos="2 "></span></a>192.168.31.223:6382 (703a1f29...) -&gt; 0 keys | 4096 slots | 1 slaves.
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><a href="#__codelineno-41-3"><span class="linenos" data-linenos="3 "></span></a>192.168.31.223:6383 (30e2409b...) -&gt; 1 keys | 4096 slots | 1 slaves.
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><a href="#__codelineno-41-4"><span class="linenos" data-linenos="4 "></span></a>192.168.31.223:6387 (0abc6c68...) -&gt; 1 keys | 4096 slots | 0 slaves.
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><a href="#__codelineno-41-5"><span class="linenos" data-linenos="5 "></span></a>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><a href="#__codelineno-41-6"><span class="linenos" data-linenos="6 "></span></a>[OK] 2 keys in 4 masters. 0.00 keys per slot on average.
</code></pre></div>
<p>这里显示了每个节点的信息，包括节点的IP地址、端口号、节点ID以及分配的槽位情况。你可以根据这些信息确认槽位的重新分配结果。</p>
<p>最后，Redis会进行一次集群检查，确保槽位的分配没有问题。</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><a href="#__codelineno-42-1"><span class="linenos" data-linenos=" 1 "></span></a>&gt;&gt;&gt; Performing Cluster Check (using node 192.168.31.223:6381)
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><a href="#__codelineno-42-2"><span class="linenos" data-linenos=" 2 "></span></a>M: 0c54ff47b1cb373485bfbdd964a618ecea76bb29 192.168.31.223:6381   slots:[1365-5460] (4096 slots) master   1 additional replica(s)
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><a href="#__codelineno-42-3"><span class="linenos" data-linenos=" 3 "></span></a>M: 703a1f294087c009d04eda5acf2c4255ce14c28a 192.168.31.223:6382   slots:[6827-10922] (4096 slots) master   1 additional replica(s)
<a id="__codelineno-42-4" name="__codelineno-42-4"></a><a href="#__codelineno-42-4"><span class="linenos" data-linenos=" 4 "></span></a>S: 03d3bd91c1df1e618a5b887b24b510466efa55a3 192.168.31.223:6384   slots: (0 slots) slave   replicates 30e2409b3031a0c927efe75b56909bec5281c3d8
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><a href="#__codelineno-42-5"><span class="linenos" data-linenos=" 5 "></span></a>S: 44950ffde9147011c424e906a0e1f001c1c17a71 192.168.31.223:6386   slots: (0 slots) slave   replicates 703a1f294087c009d04eda5acf2c4255ce14c28a
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><a href="#__codelineno-42-6"><span class="linenos" data-linenos=" 6 "></span></a>M: 30e2409b3031a0c927efe75b56909bec5281c3d8 192.168.31.223:6383   slots:[12288-16383] (4096 slots) master   1 additional replica(s)
<a id="__codelineno-42-7" name="__codelineno-42-7"></a><a href="#__codelineno-42-7"><span class="linenos" data-linenos=" 7 "></span></a>M: 0abc6c68790b604e8a418a3f6f3bfd4ef442a3a0 192.168.31.223:6387    #节点id：0abc6c68790b604e8a418a3f6f3bfd4ef442a3a0   slots:[0-1364],[5461-6826],[10923-12287] (4096 slots) master
<a id="__codelineno-42-8" name="__codelineno-42-8"></a><a href="#__codelineno-42-8"><span class="linenos" data-linenos=" 8 "></span></a>S: fef4eee9045d7c434c3f22b36eb16391f1078f59 192.168.31.223:6385   slots: (0 slots) slave   replicates 0c54ff47b1cb373485bfbdd964a618ecea76bb29
<a id="__codelineno-42-9" name="__codelineno-42-9"></a><a href="#__codelineno-42-9"><span class="linenos" data-linenos=" 9 "></span></a>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a><a href="#__codelineno-42-10"><span class="linenos" data-linenos="10 "></span></a>[OK] All nodes agree about slots configuration.
</code></pre></div>
<p>这里显示了每个节点的详细信息，包括主节点、从节点、槽位范围等。最后，Redis会检查是否存在未分配的槽位以及槽位的覆盖情况，确保所有的16384个槽位都得到了覆盖。</p>
<p>通过执行以上步骤，你已经成功地扩容了主从集群，并重新分配了槽位，使得每个节点都具有相等数量的槽位。</p>
<p>如果你想为主节点6387分配从节点6388，并且希望从前三个节点中分配一部分槽位给节点7，可以执行以下步骤：</p>
<ol>
<li>首先，使用以下命令将节点6388添加到集群中作为节点6387的从节点：</li>
</ol>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><a href="#__codelineno-43-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster add-node 192.168.xxx.xxx:6388 192.168.xxx.xxx:6387 --cluster-slave --cluster-master-id &lt;node7节点的ID&gt;
</code></pre></div>
<p>这将使节点6388加入集群，并成为节点6387的从节点。Redis会向节点6388发送消息，使其加入集群并与节点6387建立主从复制关系。</p>
<ol>
<li>接下来，你需要手动将一部分槽位从前三个节点中分配给节点7（即节点6388）。可以使用以下命令将槽位从节点1、节点2和节点3中迁移给节点7：</li>
</ol>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><a href="#__codelineno-44-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster reshard 192.168.xxx.xxx:6381 --cluster-from &lt;node1节点的ID&gt; --cluster-to &lt;node7节点的ID&gt; --cluster-slots &lt;槽位数量&gt; --cluster-yes
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><a href="#__codelineno-44-2"><span class="linenos" data-linenos="2 "></span></a>redis-cli --cluster reshard 192.168.xxx.xxx:6381 --cluster-from &lt;node2节点的ID&gt; --cluster-to &lt;node7节点的ID&gt; --cluster-slots &lt;槽位数量&gt; --cluster-yes
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><a href="#__codelineno-44-3"><span class="linenos" data-linenos="3 "></span></a>redis-cli --cluster reshard 192.168.xxx.xxx:6381 --cluster-from &lt;node3节点的ID&gt; --cluster-to &lt;node7节点的ID&gt; --cluster-slots &lt;槽位数量&gt; --cluster-yes
</code></pre></div>
<p>在上述命令中，将 <code>&lt;node1节点的ID&gt;</code>、<code>&lt;node2节点的ID&gt;</code> 和 <code>&lt;node3节点的ID&gt;</code> 替换为实际节点1、节点2和节点3的ID。将 <code>&lt;node7节点的ID&gt;</code> 替换为节点7（即节点6388）的ID。<code>&lt;槽位数量&gt;</code> 是你想要迁移的槽位数量。</p>
<ol>
<li>完成槽位迁移后，你可以使用以下命令检查集群的当前状态：</li>
</ol>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><a href="#__codelineno-45-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre></div>
<p>这个命令将显示集群的信息，包括每个节点的角色、槽位分配情况和从节点信息。</p>
<p>通过执行以上步骤，你可以将节点6388添加为节点6387的从节点，并从前三个节点中迁移一部分槽位给节点6388。最后，你可以使用 <code>redis-cli --cluster check</code> 命令来验证集群的状态。</p>
<h4 id="7主从缩容">7、主从缩容<a class="headerlink" href="#7主从缩容" title="Permanent link">&para;</a></h4>
<p>如果你想将主从集群从4主4从缩容到3主3从，并移除节点8和节点7，可以按照以下步骤进行操作：</p>
<p><strong>1. 删除从节点6388：</strong></p>
<p>首先，进入容器节点1，可以使用以下命令：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><a href="#__codelineno-46-1"><span class="linenos" data-linenos="1 "></span></a>docker exec -it redis-node-1 /bin/bash
</code></pre></div>
<p>然后，检查容器状态，获取节点6388的节点编号，可以使用以下命令：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><a href="#__codelineno-47-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster check 192.168.xxx.xxx:6381
</code></pre></div>
<p>接下来，使用以下命令将节点6388从集群中移除：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><a href="#__codelineno-48-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster del-node 192.168.xxx.xxx:6388 &lt;6388节点编号&gt;
</code></pre></div>
<p>请将 <code>&lt;6388节点编号&gt;</code> 替换为实际的节点6388的编号。</p>
<p><strong>2. 对节点7重新分配哈希槽：</strong></p>
<p>首先，使用以下命令对集群进行哈希槽的重新分配：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><a href="#__codelineno-49-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster reshard 192.168.xxx.xxx:6381
</code></pre></div>
<p>Redis会提示你输入要移动的槽位数量。如果你想将节点7的所有4096个哈希槽都分配给某个节点，可以直接输入4096。</p>
<p>然后，Redis会要求你输入要接收这些哈希槽的节点ID。假设你想将这4096个槽位都分配给节点1，直接输入节点1的编号即可。</p>
<p>接下来，Redis会询问你要从哪些节点中移动一部分槽位以满足4096个槽位分配给节点1。在这里，你需要输入节点7的节点编号，然后按回车，最后输入&rdquo;done&rdquo;表示完成。</p>
<p>一旦节点7上没有哈希槽，你就可以将节点7从集群中移除。使用以下命令将节点7从集群中移除：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><a href="#__codelineno-50-1"><span class="linenos" data-linenos="1 "></span></a>redis-cli --cluster del-node 192.168.xxx.xxx:6387 &lt;node7节点编号&gt;
</code></pre></div>
<p>请将 <code>&lt;node7节点编号&gt;</code> 替换为实际的节点7的编号。</p>
<p>通过执行以上步骤，你可以将主从集群从4主4从缩容到3主3从，并移除节点8和节点7。请确保在移除节点之前，节点7上没有任何哈希槽。</p>
<h2 id="三自定义配置文件启动redis">三、自定义配置文件启动redis<a class="headerlink" href="#三自定义配置文件启动redis" title="Permanent link">&para;</a></h2>
<p><strong>redis使用自定义配置文件启动</strong></p>
<p>1、创建持久化挂载redis配置文件</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><a href="#__codelineno-51-1"><span class="linenos" data-linenos="1 "></span></a>mkdir -p /data/docker/redis
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><a href="#__codelineno-51-2"><span class="linenos" data-linenos="2 "></span></a>vim redis.conf
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><a href="#__codelineno-51-3"><span class="linenos" data-linenos="3 "></span></a>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a><a href="#__codelineno-51-4"><span class="linenos" data-linenos="4 "></span></a>#写入内容：
<a id="__codelineno-51-5" name="__codelineno-51-5"></a><a href="#__codelineno-51-5"><span class="linenos" data-linenos="5 "></span></a>appendonly yes
<a id="__codelineno-51-6" name="__codelineno-51-6"></a><a href="#__codelineno-51-6"><span class="linenos" data-linenos="6 "></span></a>requirepass 123456
</code></pre></div>
<p>创建数据挂载目录</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><a href="#__codelineno-52-1"><span class="linenos" data-linenos="1 "></span></a>mkdir -p /data/docker/data
</code></pre></div>
<p>创建日志挂载文件</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a><a href="#__codelineno-53-1"><span class="linenos" data-linenos="1 "></span></a>touch /data/docker/redis/logs
</code></pre></div>
<p>启动redis容器命令：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><a href="#__codelineno-54-1"><span class="linenos" data-linenos="1 "></span></a>docker run -v /data/docker/redis/redis.conf:/etc/redis/redis.conf \
<a id="__codelineno-54-2" name="__codelineno-54-2"></a><a href="#__codelineno-54-2"><span class="linenos" data-linenos="2 "></span></a>-v /data/docker/redis/data:/data \
<a id="__codelineno-54-3" name="__codelineno-54-3"></a><a href="#__codelineno-54-3"><span class="linenos" data-linenos="3 "></span></a>-v /data/docker/redis/logs:/var/log/redis \
<a id="__codelineno-54-4" name="__codelineno-54-4"></a><a href="#__codelineno-54-4"><span class="linenos" data-linenos="4 "></span></a>-d --name redis \
<a id="__codelineno-54-5" name="__codelineno-54-5"></a><a href="#__codelineno-54-5"><span class="linenos" data-linenos="5 "></span></a>-p 6379:6379 \
<a id="__codelineno-54-6" name="__codelineno-54-6"></a><a href="#__codelineno-54-6"><span class="linenos" data-linenos="6 "></span></a>redis:latest  redis-server /etc/redis/redis.conf
</code></pre></div>
<ul>
<li><code>-v /data/docker/redis/redis.conf:/etc/redis/redis.conf</code>：使用卷挂载功能，将本地文件 <code>/data/docker/redis/redis.conf</code> 挂载到容器内的 <code>/etc/redis/redis.conf</code> 文件。这样可以在容器中使用自定义的 Redis 配置文件。</li>
<li><code>-v /data/docker/redis/data:/data</code>：使用卷挂载功能，将本地目录 <code>/data/docker/redis/data</code> 挂载到容器内的 <code>/data</code> 目录。这样可以将 Redis 数据持久化到本地目录。</li>
<li><code>-v /data/docker/redis/logs:/var/log/redis</code>挂载本地目录 /data/docker/redis/logs 到容器内的 Redis 日志文件位置 /var/log/redis</li>
<li><code>-d</code>：以后台模式运行容器。</li>
<li><code>--name myredis</code>：为容器指定一个名称，这里是 &ldquo;myredis&rdquo;。</li>
<li><code>-p 6379:6379</code>：将容器内的端口 6379 映射到主机的端口 6379。这样可以通过主机的端口访问 Redis 服务。</li>
<li><code>redis:latest</code>：基于 Redis 镜像运行容器，使用最新的标签。</li>
<li><code>redis-server /etc/redis/redis.conf</code>：在容器内部执行的命令，启动 Redis 服务并指定配置文件为 <code>/etc/redis/redis.conf</code>。</li>
</ul>
<h2 id="四redis客户端连接">四、redis客户端连接<a class="headerlink" href="#四redis客户端连接" title="Permanent link">&para;</a></h2>
<h2 id="五扩展内容">五、扩展内容<a class="headerlink" href="#五扩展内容" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Redis高可用部署：介绍Redis Sentinel和Redis Cluster两种常见的高可用部署方案，以保证Redis的可靠性和容错性。</p>
</li>
<li>
<p>Redis持久化配置：详细介绍Redis的持久化机制，包括RDB快照和AOF日志，以及如何根据实际需求进行配置。</p>
</li>
<li>
<p>Redis性能优化：提供一些常见的Redis性能优化技巧，包括使用连接池、合理设置过期时间、优化数据结构等。</p>
</li>
<li>
<p>Redis应用场景：介绍Redis在缓存、队列、实时分析等场景中的应用，并提供相应的最佳实践和示例代码。</p>
</li>
<li>
<p>Redis安全配置：讲解如何保护Redis的安全，包括密码认证、网络访问控制等方面的配置。</p>
</li>
</ol>
<p>通过对这些扩展内容的整理和扩展，可以帮助读者更好地理解和应用Redis，以上是关于使用Docker部署Redis的内容扩展和整理，希望对你的学习和工作有所帮助。</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-11-21</span>
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../docker%20%E9%83%A8%E7%BD%B2redis%20-%20%E5%89%AF%E6%9C%AC/" class="md-footer__link md-footer__link--prev" aria-label="上一页: docker 部署redis - 副本">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                docker 部署redis - 副本
              </div>
            </div>
          </a>
        
        
          
          <a href="../docker%20%E9%83%A8%E7%BD%B2smokeping/" class="md-footer__link md-footer__link--next" aria-label="下一页: docker 部署SmokePing">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                docker 部署SmokePing
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
  
    <div class="md-copyright__highlight">
      版权所有 © 2023-2024 | <a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">粤ICP备2024253391号</a>
    </div>
  
  
    <script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3JIbgFniDcGIaNP7/quote.js?theme=#FFFFFF,#808080,#808080,#B3B3B3,#FFFFFF,#1690FF,12&f=12&display=0,0,1,1,1,1,1,1"></script>
    <!--Made with
    <a
      href="https://squidfunk.github.io/mkdocs-material/"
      target="_blank" rel="noopener"
    >
      Material for MkDocs
    </a> | <a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">粤ICP备16023717号</a-->
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.google.com/" target="_blank" rel="noopener" title="Google" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linux.org/" target="_blank" rel="noopener" title="Linux" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.tracking", "navigation.indexes", "navigation.sections", "navigation.expand", "navigation.prune", "navigation.path", "toc.follow", "navigation.top", "search.suggest", "search.highlight", "search.share", "navigation.footer", "content.code.copy", "content.action.view"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.af256bd8.min.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.bootcss.com/mathjax/3.0.5/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>